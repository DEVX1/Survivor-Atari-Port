<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>survivor.js</title>
  <style type="text/css">
/**
 * http://jashkenas.github.com/docco/resources/docco.css
 */

/*--------------------- Layout and Typography ----------------------------*/
body {
  font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
  font-size: 15px;
  line-height: 22px;
  color: #252519;
  margin: 0; padding: 0;
}
a {
  color: #261a3b;
}
  a:visited {
    color: #261a3b;
  }
p {
  margin: 0 0 15px 0;
}
h1, h2, h3, h4, h5, h6 {
  margin: 0px 0 15px 0;
}
  h1 {
    margin-top: 40px;
  }
#container {
  position: relative;
}
#background {
  position: fixed;
  top: 0; left: 525px; right: 0; bottom: 0;
  background: #f5f5ff;
  border-left: 1px solid #e5e5ee;
  z-index: -1;
}
#jump_to, #jump_page {
  background: white;
  -webkit-box-shadow: 0 0 25px #777; -moz-box-shadow: 0 0 25px #777;
  -webkit-border-bottom-left-radius: 5px; -moz-border-radius-bottomleft: 5px;
  font: 10px Arial;
  text-transform: uppercase;
  cursor: pointer;
  text-align: right;
}
#jump_to, #jump_wrapper {
  position: fixed;
  right: 0; top: 0;
  padding: 5px 10px;
}
  #jump_wrapper {
    padding: 0;
    display: none;
  }
    #jump_to:hover #jump_wrapper {
      display: block;
    }
    #jump_page {
      padding: 5px 0 3px;
      margin: 0 0 25px 25px;
    }
      #jump_page .source {
        display: block;
        padding: 5px 10px;
        text-decoration: none;
        border-top: 1px solid #eee;
      }
        #jump_page .source:hover {
          background: #f5f5ff;
        }
        #jump_page .source:first-child {
        }
table td {
  border: 0;
  outline: 0;
}
  td.docs, th.docs {
    max-width: 450px;
    min-width: 450px;
    min-height: 5px;
    padding: 10px 25px 1px 50px;
    overflow-x: hidden;
    vertical-align: top;
    text-align: left;
  }
    .docs pre {
      margin: 15px 0 15px;
      padding-left: 15px;
    }
    .docs p tt, .docs p code {
      background: #f8f8ff;
      border: 1px solid #dedede;
      font-size: 12px;
      padding: 0 0.2em;
    }
    .pilwrap {
      position: relative;
    }
      .pilcrow {
        font: 12px Arial;
        text-decoration: none;
        color: #454545;
        position: absolute;
        top: 3px; left: -20px;
        padding: 1px 2px;
        opacity: 0;
        -webkit-transition: opacity 0.2s linear;
      }
        td.docs:hover .pilcrow {
          opacity: 1;
        }
  td.code, th.code {
    padding: 14px 15px 16px 25px;
    width: 100%;
    vertical-align: top;
    background: #f5f5ff;
    border-left: 1px solid #e5e5ee;
  }
    pre, tt, code {
      font-size: 12px; line-height: 18px;
      font-family: Menlo, Monaco, Consolas, "Lucida Console", monospace;
      margin: 0; padding: 0;
    }


/*---------------------- Syntax Highlighting -----------------------------*/
td.linenos { background-color: #f0f0f0; padding-right: 10px; }
span.lineno { background-color: #f0f0f0; padding: 0 5px 0 5px; }
body .hll { background-color: #ffffcc }
body .c { color: #408080; font-style: italic }  /* Comment */
body .err { border: 1px solid #FF0000 }         /* Error */
body .k { color: #954121 }                      /* Keyword */
body .o { color: #666666 }                      /* Operator */
body .cm { color: #408080; font-style: italic } /* Comment.Multiline */
body .cp { color: #BC7A00 }                     /* Comment.Preproc */
body .c1 { color: #408080; font-style: italic } /* Comment.Single */
body .cs { color: #408080; font-style: italic } /* Comment.Special */
body .gd { color: #A00000 }                     /* Generic.Deleted */
body .ge { font-style: italic }                 /* Generic.Emph */
body .gr { color: #FF0000 }                     /* Generic.Error */
body .gh { color: #000080; font-weight: bold }  /* Generic.Heading */
body .gi { color: #00A000 }                     /* Generic.Inserted */
body .go { color: #808080 }                     /* Generic.Output */
body .gp { color: #000080; font-weight: bold }  /* Generic.Prompt */
body .gs { font-weight: bold }                  /* Generic.Strong */
body .gu { color: #800080; font-weight: bold }  /* Generic.Subheading */
body .gt { color: #0040D0 }                     /* Generic.Traceback */
body .kc { color: #954121 }                     /* Keyword.Constant */
body .kd { color: #954121; font-weight: bold }  /* Keyword.Declaration */
body .kn { color: #954121; font-weight: bold }  /* Keyword.Namespace */
body .kp { color: #954121 }                     /* Keyword.Pseudo */
body .kr { color: #954121; font-weight: bold }  /* Keyword.Reserved */
body .kt { color: #B00040 }                     /* Keyword.Type */
body .m { color: #666666 }                      /* Literal.Number */
body .s { color: #219161 }                      /* Literal.String */
body .na { color: #7D9029 }                     /* Name.Attribute */
body .nb { color: #954121 }                     /* Name.Builtin */
body .nc { color: #0000FF; font-weight: bold }  /* Name.Class */
body .no { color: #880000 }                     /* Name.Constant */
body .nd { color: #AA22FF }                     /* Name.Decorator */
body .ni { color: #999999; font-weight: bold }  /* Name.Entity */
body .ne { color: #D2413A; font-weight: bold }  /* Name.Exception */
body .nf { color: #0000FF }                     /* Name.Function */
body .nl { color: #A0A000 }                     /* Name.Label */
body .nn { color: #0000FF; font-weight: bold }  /* Name.Namespace */
body .nt { color: #954121; font-weight: bold }  /* Name.Tag */
body .nv { color: #19469D }                     /* Name.Variable */
body .ow { color: #AA22FF; font-weight: bold }  /* Operator.Word */
body .w { color: #bbbbbb }                      /* Text.Whitespace */
body .mf { color: #666666 }                     /* Literal.Number.Float */
body .mh { color: #666666 }                     /* Literal.Number.Hex */
body .mi { color: #666666 }                     /* Literal.Number.Integer */
body .mo { color: #666666 }                     /* Literal.Number.Oct */
body .sb { color: #219161 }                     /* Literal.String.Backtick */
body .sc { color: #219161 }                     /* Literal.String.Char */
body .sd { color: #219161; font-style: italic } /* Literal.String.Doc */
body .s2 { color: #219161 }                     /* Literal.String.Double */
body .se { color: #BB6622; font-weight: bold }  /* Literal.String.Escape */
body .sh { color: #219161 }                     /* Literal.String.Heredoc */
body .si { color: #BB6688; font-weight: bold }  /* Literal.String.Interpol */
body .sx { color: #954121 }                     /* Literal.String.Other */
body .sr { color: #BB6688 }                     /* Literal.String.Regex */
body .s1 { color: #219161 }                     /* Literal.String.Single */
body .ss { color: #19469D }                     /* Literal.String.Symbol */
body .bp { color: #954121 }                     /* Name.Builtin.Pseudo */
body .vc { color: #19469D }                     /* Name.Variable.Class */
body .vg { color: #19469D }                     /* Name.Variable.Global */
body .vi { color: #19469D }                     /* Name.Variable.Instance */
body .il { color: #666666 }                     /* Literal.Number.Integer.Long */
</style>
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <table cellspacing=0 cellpadding=0>
  <thead>
    <tr>
      <th class=docs><h1>survivor.js</h1></th>
      <th class=code></th>
    </tr>
  </thead>
  <tbody>
    <tr id='section-1'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-1">&#182;</a>
        </div>
        
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="err">ï»¿</span><span class="cm">/** @license</span>
<span class="cm"> *</span>
<span class="cm"> * SURVIVOR: A HTML + CSS + JavaScript prototype</span>
<span class="cm"> * based on the Commodore 64 version of Survivor from 1983</span>
<span class="cm"> * -------------------------------------------------------</span>
<span class="cm"> * http://schillmania.com/survivor/</span>
<span class="cm"> * http://www.flickr.com/photos/schill/sets/72157628885315581/</span>
<span class="cm"> *</span>
<span class="cm"> * Scott Schiller wrote this beginning in December 2011, while on a plane to Hawaii.</span>
<span class="cm"> * Code provided under the Attribution-NonCommercial 3.0 Unported (CC BY-NC 3.0) License:</span>
<span class="cm"> * http://creativecommons.org/licenses/by-nc/3.0/</span>
<span class="cm"> *</span>
<span class="cm"> */</span>

<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">window</span><span class="p">.</span><span class="nx">console</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-2'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-2">&#182;</a>
        </div>
        <p>hax</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nb">window</span><span class="p">.</span><span class="nx">console</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">log</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{}</span>
  <span class="p">};</span>
<span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-The_TODO:_list_(written_on_an_old_laptop_while_on_a_plane_to_Hawaii,_12/21/2011)'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-The_TODO:_list_(written_on_an_old_laptop_while_on_a_plane_to_Hawaii,_12/21/2011)">&#182;</a>
        </div>
        <h2>The TODO: list (written on an old laptop while on a plane to Hawaii, 12/21/2011)</h2>

<h2>Map (grid) of space</h2>

<h2>Main UI</h2>

<ul>
<li>ship always in center</li>
<li>inertia? some inertia.</li>
<li>slight parallax on background stars? maybe a blur/streak effect? why not.</li>
<li>fixed screen size, center or no?</li>
<li>fixed grid item size? 20x20px?</li>
<li>world should be able to wrap around. Draw in tiles?</li>
<li>debug mode should show outlines, overlays, collision detection etc. in CSS.</li>
</ul>

<h2>Collision detection</h2>

<ul>
<li>player vs. bricks, bad guys, gunfire (= death)</li>
<li>x/y + vector &ndash;&gt; row/col? player can occupy potentially 4 grid spaces at once with overlap?</li>
<li>when in a row/column, determine exactly what is in contact. isOverlappingGrid({x, y, row, col}) or somesuch.</li>
<li>spaceballs should reverse course and randomly flip the other axis when they hit a boundary (wall, or another spaceball.)</li>
<li>bad guys only collide with spaceship. absolutely-positioned for everything else.</li>
</ul>

<h2>Graphic elements</h2>

<ul>
<li>blocks</li>
<li>&ldquo;bases&rdquo; (structures which hold turrets)</li>
<li>turrets themselves</li>
<li>turret gunfire</li>
<li>bad guys</li>
<li>spaceballs</li>
</ul>

<h2>Things that move, object collision etc.</h2>

<ul>
<li>blocks (can be shot, disappear)</li>
<li>bad guys</li>
<li>spaceballs (immune to shots, move randomly)</li>
<li>turret gunfire</li>
</ul>

<h2>Sound effects</h2>

<ul>
<li>welcome screen &ldquo;flight of the valkyries&rdquo; music?</li>
<li>initial game start / &ldquo;warp&rdquo; sound</li>
<li>spaceship thrust</li>
<li>bad guy cartoon noises (one per bad guy? simultaneous allowed?)</li>
<li>bad guy single-frozen-note death sound</li>
<li>box shot/popping sounds (incremental sounds?)</li>
<li>ship explosion noise</li>
<li>base explosion (60 Hz, louder, BOOM) sound</li>
<li>background pulse noise set to &ldquo;frame rate&rdquo; of level</li>
</ul>

<h2>UI considerations</h2>

<ul>
<li>mobile, iOS: No sound, or single-channel sound hack?</li>
<li>touch controls &ndash; finger on screen = direction? circle-based joystick UI?</li>
<li>touch controls &ndash; fire button, smartbomb button?</li>
</ul>

<h2>Game logic</h2>

<ul>
<li>intro screen, retro font etc.?</li>
<li>ability to choose start level?</li>
<li>begin game: startGame({ level: x, lives: y, smartbombs: z }); ?</li>
<li>points/scoring? who cares?</li>
<li>level finished animation sequence &ndash; large explosions, show next &ldquo;level X&rdquo; screen etc.</li>
</ul>

<h2>BEHAVIOURS</h2>

<ul>
<li>gunfire

<ul>
<li>from turret, fixed target distance and speed</li>
<li>once target is reached, fires again (any delay?)</li>
<li>collides only with spaceship</li>
</ul></li>
<li>base

<ul>
<li>explodes once all turrets are shot out</li>
<li>noise, animation, increases points, increases game speed(?)</li>
</ul></li>
<li>spaceballs

<ul>
<li>wander aimlessly around the world</li>
<li>bounce off walls and each other</li>
<li>collision logic: see above, or spaceship (death)</li>
<li>absorb spaceship fire? turret gunfire?</li>
</ul></li>
<li>bad guys

<ul>
<li>show up at random intervals, depending on level/difficulty?</li>
<li>start randomly off-screen, seek out player</li>
<li>jittery motion (animation) and movement</li>
<li>bird, face, &ldquo;X&rdquo;, ?</li>
</ul></li>
<li>squares/boxes (&ldquo;building blocks&rdquo;)

<ul>
<li>form walls around bases</li>
<li>worth some points(?)</li>
<li>take two hits</li>
<li>increase global &ldquo;box pop&rdquo; sound when hit, eventually resets</li>
<li>collide with spaceship, kill on contact</li>
<li>a few different box designs</li>
<li>up to 4 frames of animation</li>
</ul></li>
</ul>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="kd">var</span> <span class="nx">survivor</span><span class="p">;</span>

<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nb">window</span><span class="p">)</span> <span class="p">{</span>

<span class="kd">var</span> <span class="nx">IS_MUTED</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span><span class="sr">/mute/i</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">Survivor</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-4'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-4">&#182;</a>
        </div>
        <p>internal reference</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="kd">var</span> <span class="nx">game</span><span class="p">;</span>
 
  <span class="kd">var</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">dom</span><span class="p">,</span> <span class="nx">events</span><span class="p">,</span> <span class="nx">objects</span><span class="p">,</span> <span class="nx">mapTypes</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">mapData</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">isIE</span> <span class="o">=</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/msie/i</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">oldIE</span> <span class="o">=</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/msie 6/i</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-5'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-5">&#182;</a>
        </div>
        <p>adds debug elements to the grid, UI etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="kd">var</span> <span class="nx">DEBUG_MODE</span> <span class="o">=</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span><span class="sr">/debug/i</span><span class="p">));</span></pre></div>
      </td>
    </tr>
    <tr id='section-6'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-6">&#182;</a>
        </div>
        <p>?profile=1, ?profiling=1, whatever.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="kd">var</span> <span class="nx">PERFORMANCE_MODE</span> <span class="o">=</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span><span class="sr">/profil/i</span><span class="p">));</span>

  <span class="kd">var</span> <span class="nx">DEFAULT_LIVES</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">DEFAULT_SMARTBOMBS</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">DEFAULT_HOME_ROW</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">DEFAULT_HOME_COL</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-7'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-7">&#182;</a>
        </div>
        <p>for transform-based window scrolling vs. traditional scrolling, transform() may be faster under Firefox
(but causes some visual glitches in Webkit)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="kd">var</span> <span class="nx">is_firefox</span> <span class="o">=</span> <span class="o">!!</span><span class="p">(</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/firefox/i</span><span class="p">));</span>

  <span class="nx">objects</span> <span class="o">=</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-8'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-8">&#182;</a>
        </div>
        <p>instances of controllers, major objects and so forth</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">baseController</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">badGuyController</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">blockController</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">gameLoop</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">focusMonitor</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">keyboardMonitor</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">levelEndSequence</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">mapData</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">gameController</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">ship</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">shipGunfireMap</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">smartbombController</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">statsController</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">turretGunfireMap</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">badGuyMap</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">badGuys</span><span class="o">:</span> <span class="p">[],</span>
    <span class="nx">screen</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">spaceBalls</span><span class="o">:</span> <span class="p">[],</span>
    <span class="nx">spaceBallMap</span><span class="o">:</span> <span class="kc">null</span>

  <span class="p">};</span>

  <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>

    <span class="nx">map</span><span class="o">:</span> <span class="p">[],</span>
    <span class="nx">NODE_WIDTH</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
    <span class="nx">NODE_HEIGHT</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
    <span class="nx">world_width</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">world_height</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">world_cols</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">world_rows</span><span class="o">:</span> <span class="mi">0</span>

  <span class="p">};</span>

  <span class="nx">dom</span> <span class="o">=</span> <span class="p">{</span>

    <span class="nx">gridItemTemplate</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">),</span>
    <span class="nx">world</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;world&#39;</span><span class="p">),</span>
    <span class="nx">worldContainer</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;world-container&#39;</span><span class="p">),</span>
    <span class="nx">worldFragment</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">()</span>

  <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-9'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-9">&#182;</a>
        </div>
        <p>for internal reference</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">game</span> <span class="o">=</span> <span class="p">{</span>

    <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
    <span class="nx">dom</span><span class="o">:</span> <span class="nx">dom</span><span class="p">,</span>
    <span class="nx">events</span><span class="o">:</span> <span class="nx">events</span><span class="p">,</span>
    <span class="nx">objects</span><span class="o">:</span> <span class="nx">objects</span>

  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">soundSprites</span><span class="p">;</span>

  <span class="nx">soundSprites</span> <span class="o">=</span> <span class="p">{</span>

    <span class="nx">popSpriteCounter</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">popSpriteCounterMax</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="nx">boomSpriteCounter</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">boomSpriteCounterMax</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>

    <span class="nx">playBoom</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scale</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">sID</span> <span class="o">=</span> <span class="s1">&#39;boom-sprite-&#39;</span> <span class="o">+</span> <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">boomSpriteCounter</span><span class="p">;</span>

      <span class="nx">soundManager</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="nx">sID</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">from</span><span class="o">:</span> <span class="p">(</span><span class="nx">scale</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
        <span class="nx">to</span><span class="o">:</span> <span class="p">(</span><span class="nx">scale</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">+</span> <span class="mi">750</span>
      <span class="p">});</span>

      <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">boomSpriteCounter</span><span class="o">++</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">soundSprites</span><span class="p">.</span><span class="nx">boomSpriteCounter</span> <span class="o">&gt;=</span> <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">boomSpriteCounterMax</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">boomSpriteCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">},</span>

    <span class="nx">playPop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">audioPitch</span><span class="p">)</span> <span class="p">{</span>

      <span class="nx">soundManager</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s1">&#39;pop-sprite-&#39;</span> <span class="o">+</span> <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">popSpriteCounter</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">from</span><span class="o">:</span> <span class="p">(</span><span class="nx">audioPitch</span><span class="o">*</span><span class="mi">400</span><span class="p">)</span> <span class="o">-</span> <span class="mi">10</span><span class="p">,</span>
         <span class="nx">to</span><span class="o">:</span> <span class="p">(</span><span class="nx">audioPitch</span><span class="o">*</span><span class="mi">400</span><span class="p">)</span> <span class="o">+</span> <span class="mi">350</span>
      <span class="p">});</span>

      <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">popSpriteCounter</span><span class="o">++</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">soundSprites</span><span class="p">.</span><span class="nx">popSpriteCounter</span> <span class="o">&gt;=</span> <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">popSpriteCounterMax</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">popSpriteCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">utils</span><span class="p">;</span>

  <span class="nx">utils</span> <span class="o">=</span> <span class="p">{</span>

    <span class="nx">css</span><span class="o">:</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">function</span> <span class="nx">hasClass</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">cStr</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">className</span><span class="p">)</span><span class="o">!==</span><span class="s1">&#39;undefined&#39;</span><span class="o">?</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;(^|\\s)&#39;</span><span class="o">+</span><span class="nx">cStr</span><span class="o">+</span><span class="s1">&#39;(\\s|$)&#39;</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">className</span><span class="p">)</span><span class="o">:</span><span class="kc">false</span><span class="p">);</span>

      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">addClass</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">cStr</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">o</span> <span class="o">||</span> <span class="o">!</span><span class="nx">cStr</span> <span class="o">||</span> <span class="nx">hasClass</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="nx">cStr</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">// safety net</span>
        <span class="p">}</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">className</span><span class="o">?</span><span class="nx">o</span><span class="p">.</span><span class="nx">className</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">:</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">+</span><span class="nx">cStr</span><span class="p">;</span>

      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">removeClass</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">cStr</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">o</span> <span class="o">||</span> <span class="o">!</span><span class="nx">cStr</span> <span class="o">||</span> <span class="o">!</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="nx">cStr</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;( &#39;</span><span class="o">+</span><span class="nx">cStr</span><span class="o">+</span><span class="s1">&#39;)|(&#39;</span><span class="o">+</span><span class="nx">cStr</span><span class="o">+</span><span class="s1">&#39;)&#39;</span><span class="p">,</span><span class="s1">&#39;g&#39;</span><span class="p">),</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">swapClass</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">cStr1</span><span class="p">,</span> <span class="nx">cStr2</span><span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">tmpClass</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">className</span><span class="o">:</span> <span class="nx">o</span><span class="p">.</span><span class="nx">className</span>
        <span class="p">};</span>

        <span class="nx">removeClass</span><span class="p">(</span><span class="nx">tmpClass</span><span class="p">,</span> <span class="nx">cStr1</span><span class="p">);</span>
        <span class="nx">addClass</span><span class="p">(</span><span class="nx">tmpClass</span><span class="p">,</span> <span class="nx">cStr2</span><span class="p">);</span>

        <span class="nx">o</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">tmpClass</span><span class="p">.</span><span class="nx">className</span><span class="p">;</span>

      <span class="p">}</span>

      <span class="kd">function</span> <span class="nx">toggleClass</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">cStr</span><span class="p">)</span> <span class="p">{</span>

        <span class="p">(</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">cStr</span><span class="p">)</span><span class="o">?</span><span class="nx">removeClass</span><span class="o">:</span><span class="nx">addClass</span><span class="p">)(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">cStr</span><span class="p">);</span>

      <span class="p">}</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">has</span><span class="o">:</span> <span class="nx">hasClass</span><span class="p">,</span>
        <span class="nx">add</span><span class="o">:</span> <span class="nx">addClass</span><span class="p">,</span>
        <span class="nx">remove</span><span class="o">:</span> <span class="nx">removeClass</span><span class="p">,</span>
        <span class="nx">swap</span><span class="o">:</span> <span class="nx">swapClass</span><span class="p">,</span>
        <span class="nx">toggle</span><span class="o">:</span> <span class="nx">toggleClass</span>
      <span class="p">};</span>

    <span class="p">}()),</span>

    <span class="nx">events</span><span class="o">:</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">add</span><span class="p">,</span> <span class="nx">remove</span><span class="p">;</span>

      <span class="nx">add</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">evtName</span><span class="p">,</span> <span class="nx">evtHandler</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">o</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">evtName</span><span class="p">,</span><span class="nx">evtHandler</span><span class="p">,</span><span class="kc">false</span><span class="p">);</span>
      <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">evtName</span><span class="p">,</span> <span class="nx">evtHandler</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span><span class="s1">&#39;on&#39;</span><span class="o">+</span><span class="nx">evtName</span><span class="p">,</span><span class="nx">evtHandler</span><span class="p">);</span>
      <span class="p">});</span>

      <span class="nx">remove</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">evtName</span><span class="p">,</span> <span class="nx">evtHandler</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">o</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">evtName</span><span class="p">,</span><span class="nx">evtHandler</span><span class="p">,</span><span class="kc">false</span><span class="p">);</span>
      <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">evtName</span><span class="p">,</span> <span class="nx">evtHandler</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">o</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span><span class="s1">&#39;on&#39;</span><span class="o">+</span><span class="nx">evtName</span><span class="p">,</span><span class="nx">evtHandler</span><span class="p">);</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">add</span><span class="o">:</span> <span class="nx">add</span><span class="p">,</span>
        <span class="nx">remove</span><span class="o">:</span> <span class="nx">remove</span>
      <span class="p">};</span>

    <span class="p">}())</span>

  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">features</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">testDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>

  <span class="nx">features</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">getAnimationFrame</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-10'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-10">&#182;</a>
        </div>
        <p>hat tip: paul irish
http://paulirish.com/2011/requestanimationframe-for-smart-animating/
https://gist.github.com/838785</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">getAnimationFrame</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span>  <span class="o">||</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span> <span class="o">||</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span>    <span class="o">||</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">oRequestAnimationFrame</span>      <span class="o">||</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">msRequestAnimationFrame</span>     <span class="o">||</span>
        <span class="kc">null</span><span class="p">;</span>
    <span class="p">}());</span></pre></div>
      </td>
    </tr>
    <tr id='section-11'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-11">&#182;</a>
        </div>
        <p>TODO: sort out &ldquo;illegal invocation&rdquo; Chrome errors when trying to call wrapped function.
also, it delivers lower FPS at time of writing anyways.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">getAnimationFrame</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">getAnimationFrame</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span><span class="sr">/interval/i</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;forcing setInterval() for game loop&#39;</span><span class="p">);</span>
      <span class="nx">getAnimationFrame</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">transform</span><span class="p">,</span> <span class="nx">styles</span><span class="p">,</span> <span class="nx">prop</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">has</span><span class="p">(</span><span class="nx">prop</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-12'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-12">&#182;</a>
        </div>
        <p>test for feature support</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">testDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">prop</span><span class="p">];</span>
      <span class="k">return</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">result</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">?</span> <span class="nx">prop</span> <span class="o">:</span> <span class="kc">null</span><span class="p">);</span>

    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-13'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-13">&#182;</a>
        </div>
        <p>note local scope.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">features</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">audio</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// set later via SM2</span>

      <span class="nx">opacity</span><span class="o">:</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">testDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="s1">&#39;0.5&#39;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}()),</span>

      <span class="nx">transform</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">ie</span><span class="o">:</span>  <span class="nx">has</span><span class="p">(</span><span class="s1">&#39;-ms-transform&#39;</span><span class="p">),</span>
        <span class="nx">moz</span><span class="o">:</span> <span class="nx">has</span><span class="p">(</span><span class="s1">&#39;MozTransform&#39;</span><span class="p">),</span>
        <span class="nx">opera</span><span class="o">:</span> <span class="nx">has</span><span class="p">(</span><span class="s1">&#39;OTransform&#39;</span><span class="p">),</span>
        <span class="nx">webkit</span><span class="o">:</span> <span class="nx">has</span><span class="p">(</span><span class="s1">&#39;webkitTransform&#39;</span><span class="p">),</span>
        <span class="nx">w3</span><span class="o">:</span> <span class="nx">has</span><span class="p">(</span><span class="s1">&#39;transform&#39;</span><span class="p">),</span>
        <span class="nx">prop</span><span class="o">:</span> <span class="kc">null</span> <span class="c1">// the normalized property value</span>
      <span class="p">},</span>

      <span class="nx">rotate</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">has3D</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">prop</span><span class="o">:</span> <span class="kc">null</span>
      <span class="p">},</span>

      <span class="s1">&#39;getAnimationFrame&#39;</span><span class="o">:</span> <span class="nx">getAnimationFrame</span>

    <span class="p">};</span>

    <span class="nx">features</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">prop</span> <span class="o">=</span> <span class="p">(</span>
      <span class="nx">features</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">w3</span> <span class="o">||</span> 
      <span class="nx">features</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">moz</span> <span class="o">||</span>
      <span class="nx">features</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">webkit</span> <span class="o">||</span>
      <span class="nx">features</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">ie</span> <span class="o">||</span>
      <span class="nx">features</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">opera</span>
    <span class="p">);</span>

    <span class="kd">function</span> <span class="nx">attempt</span><span class="p">(</span><span class="nx">style</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">testDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">transform</span><span class="p">]</span> <span class="o">=</span> <span class="nx">style</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-14'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-14">&#182;</a>
        </div>
        <p>that <em>definitely</em> didn&rsquo;t work.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-15'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-15">&#182;</a>
        </div>
        <p>if we can read back the style, it should be cool.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">return</span> <span class="o">!!</span><span class="nx">testDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="nx">transform</span><span class="p">];</span>

    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">prop</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-16'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-16">&#182;</a>
        </div>
        <p>try to derive the rotate/3D support.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">transform</span> <span class="o">=</span> <span class="nx">features</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">prop</span><span class="p">;</span>
      <span class="nx">styles</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">css_2d</span><span class="o">:</span> <span class="s1">&#39;rotate(0deg)&#39;</span><span class="p">,</span>
        <span class="nx">css_3d</span><span class="o">:</span> <span class="s1">&#39;rotate3d(0,0,0,0deg)&#39;</span>
      <span class="p">};</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">attempt</span><span class="p">(</span><span class="nx">styles</span><span class="p">.</span><span class="nx">css_3d</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">features</span><span class="p">.</span><span class="nx">rotate</span><span class="p">.</span><span class="nx">has3D</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">prop</span> <span class="o">=</span> <span class="s1">&#39;rotate3d&#39;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">attempt</span><span class="p">(</span><span class="nx">styles</span><span class="p">.</span><span class="nx">css_2d</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">prop</span> <span class="o">=</span> <span class="s1">&#39;rotate&#39;</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-17'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-17">&#182;</a>
        </div>
        <p>soundManager._wD(&lsquo;Has 3D rotate: &rsquo;+features.rotate.has3D);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">features</span><span class="p">.</span><span class="nx">rotate</span><span class="p">.</span><span class="nx">prop</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;user agent feature test:&#39;</span><span class="p">,</span> <span class="nx">features</span><span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;requestAnimationFrame() is&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">getAnimationFrame</span> <span class="o">?</span> <span class="s1">&#39;&#39;</span> <span class="o">:</span> <span class="s1">&#39; not&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; available&#39;</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">features</span><span class="p">;</span>

  <span class="p">}());</span>

  <span class="kd">var</span> <span class="nx">_slice</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">mixin</span><span class="p">(</span><span class="nx">oMain</span><span class="p">,</span> <span class="nx">oAdd</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-18'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-18">&#182;</a>
        </div>
        <p>non-destructive merge</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">o1</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">o2</span><span class="p">,</span> <span class="nx">o</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-19'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-19">&#182;</a>
        </div>
        <p>clone c1</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="k">in</span> <span class="nx">oMain</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">oMain</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">o1</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">oMain</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">o2</span> <span class="o">=</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">oAdd</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="o">?</span><span class="p">{}</span><span class="o">:</span><span class="nx">oAdd</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">o</span> <span class="k">in</span> <span class="nx">o2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">o2</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">o1</span><span class="p">[</span><span class="nx">o</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o1</span><span class="p">[</span><span class="nx">o</span><span class="p">]</span> <span class="o">=</span> <span class="nx">o2</span><span class="p">[</span><span class="nx">o</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">o1</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">GameLoop</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-20'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-20">&#182;</a>
        </div>
        <p>the timer and main loop which drives everything</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">oStats</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">fpsCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">heartbeatCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">lastExec</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">css</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">events</span><span class="p">;</span>

    <span class="nx">css</span> <span class="o">=</span> <span class="p">{</span>

      <span class="s1">&#39;phase0&#39;</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="c1">// default state</span>
      <span class="s1">&#39;phase1&#39;</span><span class="o">:</span> <span class="s1">&#39;phase-1&#39;</span><span class="p">,</span>
      <span class="s1">&#39;phase2&#39;</span><span class="o">:</span> <span class="s1">&#39;phase-2&#39;</span><span class="p">,</span>
      <span class="s1">&#39;phase3&#39;</span><span class="o">:</span> <span class="s1">&#39;phase-3&#39;</span><span class="p">,</span>
      <span class="s1">&#39;phase4&#39;</span><span class="o">:</span> <span class="s1">&#39;phase-4&#39;</span>

    <span class="p">};</span>

    <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">GAME_SPEED</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// the game speed multiplier</span>
      <span class="nx">loopTimer</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">loopInterval</span><span class="o">:</span> <span class="mi">1000</span><span class="o">/</span><span class="mi">30</span><span class="p">,</span> <span class="c1">// aim for 30 fps</span>
      <span class="nx">lastPhase</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">pulseCount</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">pulseStage</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">pulsePhases</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
      <span class="nx">pulseTimer</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="c1">// will inherit default</span>
      <span class="nx">pulseIntervals</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;stage0&#39;</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
        <span class="s1">&#39;stage1&#39;</span><span class="o">:</span> <span class="mf">366.67</span><span class="p">,</span>
        <span class="s1">&#39;stage2&#39;</span><span class="o">:</span> <span class="mf">233.33</span><span class="p">,</span>
        <span class="s1">&#39;stage3&#39;</span><span class="o">:</span> <span class="mi">100</span>
      <span class="p">},</span>
      <span class="nx">speedMultiplier</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="nx">speedMultipliers</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;stage0&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;stage1&#39;</span><span class="o">:</span> <span class="mf">1.1</span><span class="p">,</span>
        <span class="s1">&#39;stage2&#39;</span><span class="o">:</span> <span class="mf">1.2</span><span class="p">,</span>
        <span class="s1">&#39;stage3&#39;</span><span class="o">:</span> <span class="mf">1.3</span>
      <span class="p">},</span>
      <span class="nx">statsTimer</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">statsInterval</span><span class="o">:</span> <span class="mi">1000</span>

    <span class="p">};</span>

    <span class="nx">events</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">loop</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

<span class="cm">/*</span>
<span class="cm">        var now = new Date();</span>

<span class="cm">        if (now - lastExec &lt; data.loopThrottle) {</span></pre></div>
      </td>
    </tr>
    <tr id='section-21'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-21">&#182;</a>
        </div>
        <p>exit if this loop is running too fast</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="cm">          return false;</span>
<span class="cm">        }</span>

<span class="cm">        lastExec = now;</span>
<span class="cm">*/</span></pre></div>
      </td>
    </tr>
    <tr id='section-22'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-22">&#182;</a>
        </div>
        <p>based on game state, animate or wait for input or ?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>
        <span class="nx">fpsCounter</span><span class="o">++</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">levelEndSequence</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">levelEndSequence</span><span class="p">.</span><span class="nx">animate</span><span class="p">();</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

        <span class="p">}</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">animate</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">maybeFire</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">baseController</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">animate</span><span class="p">();</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyController</span><span class="p">.</span><span class="nx">animate</span><span class="p">();</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">blockController</span><span class="p">.</span><span class="nx">animate</span><span class="p">();</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">smartbombController</span><span class="p">.</span><span class="nx">animate</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-23'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-23">&#182;</a>
        </div>
        <p>don&rsquo;t animate certain objects if ship is exploding (dying/dead)
if (game.objects.ship.isAlive()) {</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">animateSpaceBalls</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-24'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-24">&#182;</a>
        </div>
        <p>}</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="p">},</span>

      <span class="nx">pulse</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">currentPhase</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-25'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-25">&#182;</a>
        </div>
        <p>don&rsquo;t animate the world if the ship is dying/dead.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">isAlive</span><span class="p">())</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-26'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-26">&#182;</a>
        </div>
        <p>the world heartbeat, per se.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">data</span><span class="p">.</span><span class="nx">pulseCount</span><span class="o">++</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">pulseCount</span> <span class="o">&gt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pulsePhases</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">pulseCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">currentPhase</span> <span class="o">=</span> <span class="nx">css</span><span class="p">[</span><span class="s1">&#39;phase&#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pulseCount</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">oldIE</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">swap</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lastPhase</span><span class="p">,</span> <span class="nx">currentPhase</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">lastPhase</span> <span class="o">=</span> <span class="nx">currentPhase</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">heartbeatCounter</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">soundManager</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s1">&#39;heartbeat&#39;</span><span class="p">);</span>

          <span class="p">}</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">baseController</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">pulse</span><span class="p">();</span>

        <span class="p">}</span>

        <span class="nx">heartbeatCounter</span><span class="o">++</span><span class="p">;</span>

      <span class="p">},</span>

      <span class="nx">statsUpdate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">fpsCount</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">fpsCounter</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">oStats</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">oStats</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">fpsCount</span><span class="p">)</span> <span class="o">?</span> <span class="nx">fpsCount</span> <span class="o">:</span> <span class="s1">&#39;N/A&#39;</span><span class="p">);</span>
        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-27'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-27">&#182;</a>
        </div>
        <p>data.GAME_SPEED = (fpsCount &gt;= 15 ? 1 : 15 / fpsCount);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">fpsCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">refreshAnimationCallback</span><span class="p">(</span><span class="nx">time</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="p">(</span><span class="nx">time</span><span class="o">?</span> <span class="nx">time</span> <span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()),</span>
          <span class="nx">delta</span> <span class="o">=</span> <span class="nx">now</span> <span class="o">-</span> <span class="nx">lastExec</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">delta</span> <span class="o">&gt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">loopInterval</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">lastExec</span> <span class="o">=</span> <span class="nx">now</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-28'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-28">&#182;</a>
        </div>
        <p>do work, son</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">events</span><span class="p">.</span><span class="nx">loop</span><span class="p">();</span>

      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">loopTimer</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-29'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-29">&#182;</a>
        </div>
        <p>and repeat the process</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">getNextFrame</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getNextFrame</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">features</span><span class="p">.</span><span class="nx">getAnimationFrame</span><span class="p">(</span><span class="nx">refreshAnimationCallback</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">pause</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-30'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-30">&#182;</a>
        </div>
        <p>TODO: this.paused check?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">soundManager</span><span class="p">.</span><span class="nx">mute</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="nx">stopTimer</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">resume</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">soundManager</span><span class="p">.</span><span class="nx">unmute</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="nx">startTimer</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">startTimer</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">startPulse</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">loopTimer</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">features</span><span class="p">.</span><span class="nx">getAnimationFrame</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">data</span><span class="p">.</span><span class="nx">loopTimer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">loop</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">loopInterval</span><span class="p">);</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

          <span class="nx">data</span><span class="p">.</span><span class="nx">loopTimer</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="nx">getNextFrame</span><span class="p">();</span>

        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">oStats</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">statsTimer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">statsUpdate</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">statsInterval</span><span class="p">);</span>
        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">stopTimer</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">stopPulse</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">loopTimer</span><span class="p">)</span> <span class="p">{</span>

        <span class="nb">window</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">loopTimer</span><span class="p">);</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">loopTimer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

        <span class="nb">window</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">statsTimer</span><span class="p">);</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">statsTimer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

        <span class="nx">fpsCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">stopPulse</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">pulseTimer</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">pulseTimer</span><span class="p">);</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">pulseTimer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">startPulse</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-31'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-31">&#182;</a>
        </div>
        <p>check and set default, if needed</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">pulseTimer</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">pulseInterval</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">setPulseStage</span><span class="p">();</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-32'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-32">&#182;</a>
        </div>
        <p>re-start.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">stopPulse</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">pulseTimer</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">pulseTimer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">events</span><span class="p">.</span><span class="nx">pulse</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pulseInterval</span><span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getPulseStage</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pulseStage</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">setPulseStage</span><span class="p">(</span><span class="nx">nStage</span><span class="p">)</span> <span class="p">{</span>

      <span class="nx">stopPulse</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">nStage</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">nStage</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">pulseStage</span> <span class="o">=</span> <span class="nx">nStage</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-33'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-33">&#182;</a>
        </div>
        <p>TODO: clean up</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">data</span><span class="p">.</span><span class="nx">pulseInterval</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pulseIntervals</span><span class="p">[</span><span class="s1">&#39;stage&#39;</span> <span class="o">+</span> <span class="nx">nStage</span><span class="p">];</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">speedMultiplier</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">speedMultipliers</span><span class="p">[</span><span class="s1">&#39;stage&#39;</span> <span class="o">+</span> <span class="nx">nStage</span><span class="p">];</span>

      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;set pulse stage &#39;</span> <span class="o">+</span> <span class="nx">nStage</span> <span class="o">+</span><span class="s1">&#39;, interval &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pulseInterval</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">nextPulseStage</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">setPulseStage</span><span class="p">(</span><span class="nx">getPulseStage</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">isActive</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-34'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-34">&#182;</a>
        </div>
        <p>is the game running?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">return</span> <span class="o">!!</span><span class="nx">data</span><span class="p">.</span><span class="nx">loopTimer</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-35'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-35">&#182;</a>
        </div>
        <p>set default state? welcome screen, etc.?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>     <span class="nx">oStats</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;fps&#39;</span><span class="p">);</span>

     <span class="nx">startTimer</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span><span class="p">,</span>
      <span class="nx">isActive</span><span class="o">:</span> <span class="nx">isActive</span><span class="p">,</span>
      <span class="nx">pause</span><span class="o">:</span> <span class="nx">pause</span><span class="p">,</span>
      <span class="nx">resume</span><span class="o">:</span> <span class="nx">resume</span><span class="p">,</span>
      <span class="nx">nextPulseStage</span><span class="o">:</span> <span class="nx">nextPulseStage</span><span class="p">,</span>
      <span class="nx">setPulseStage</span><span class="o">:</span> <span class="nx">setPulseStage</span><span class="p">,</span>
      <span class="nx">startTimer</span><span class="o">:</span> <span class="nx">startTimer</span><span class="p">,</span>
      <span class="nx">stopTimer</span><span class="o">:</span> <span class="nx">stopTimer</span>
    <span class="p">};</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">BlockController</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-36'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-36">&#182;</a>
        </div>
        <p>maintains an array of blocks actively being hit
and animates them, removing from the array once finished</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">blocks_hash</span><span class="o">:</span> <span class="p">{},</span>
      <span class="nx">blocks</span><span class="o">:</span> <span class="p">[]</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">objects</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">objects</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">blocks</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">animate</span><span class="p">())</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-37'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-37">&#182;</a>
        </div>
        <p>if true is returned, animation is complete &ndash; remove from the array</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="k">delete</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">blocks_hash</span><span class="p">[</span><span class="nx">objects</span><span class="p">.</span><span class="nx">blocks</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">];</span>

          <span class="nx">objects</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">PERFORMANCE_MODE</span> <span class="o">||</span> <span class="nx">DEBUG_MODE</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;removed animating block; new count: &#39;</span> <span class="o">+</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

          <span class="p">}</span>

        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">startAnimation</span><span class="p">(</span><span class="nx">oBlock</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-38'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-38">&#182;</a>
        </div>
        <p>we have something that should now be animating.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">blocks_hash</span><span class="p">[</span><span class="nx">oBlock</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">objects</span><span class="p">.</span><span class="nx">blocks_hash</span><span class="p">[</span><span class="nx">oBlock</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">blocks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">oBlock</span><span class="p">);</span>

      <span class="p">}</span>

    <span class="p">}</span>
 
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">startAnimation</span><span class="o">:</span> <span class="nx">startAnimation</span>
    <span class="p">};</span>

  <span class="p">}</span>

  <span class="nx">objects</span><span class="p">.</span><span class="nx">blockController</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BlockController</span><span class="p">();</span>

  <span class="kd">var</span> <span class="nx">blockCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">Block</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">objectInterface</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">power</span><span class="o">:</span> <span class="mi">2</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;block_&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">blockCounter</span><span class="o">++</span><span class="p">),</span>
      <span class="nx">power</span><span class="o">:</span> <span class="nx">defaults</span><span class="p">.</span><span class="nx">power</span><span class="p">,</span> <span class="c1">// when 0: dead</span>
      <span class="nx">points</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="nx">dead</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">,</span>
      <span class="nx">w</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">,</span>
      <span class="nx">h</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">,</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
      <span class="nx">subType</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">subType</span><span class="p">,</span>
      <span class="nx">hitFrame</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">hitFrames</span><span class="o">:</span> <span class="mi">6</span>

    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">getNode</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hittable</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-39'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-39">&#182;</a>
        </div>
        <p>this thing can be hit (or collide with the ship), provied it is active.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">return</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">pixelCollisionCheck</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">hit</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">collision</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">;</span>

      <span class="nx">hit</span> <span class="o">=</span> <span class="nx">collision</span><span class="p">.</span><span class="nx">checkSprites</span><span class="p">({</span>
         <span class="nx">object1</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">,</span>
         <span class="nx">object2</span><span class="o">:</span> <span class="p">{</span>
           <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;block-type-generic&#39;</span><span class="p">,</span>
           <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
           <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
           <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
           <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
         <span class="p">}</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="nx">hit</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">applyFrame</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundPosition</span> <span class="o">=</span> <span class="s1">&#39;0px &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">hitFrame</span> <span class="o">*</span> <span class="o">-</span><span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animationComplete</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-40'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-40">&#182;</a>
        </div>
        <p>go back to letting CSS do its thing</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundPosition</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s1">&#39;exploding&#39;</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-41'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-41">&#182;</a>
        </div>
        <p>hit / death sequence</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-42'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-42">&#182;</a>
        </div>
        <p>edge case (and tell controller this should not be animated any more.)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">complete</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">hitFrame</span> <span class="o">&gt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">hitFrames</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-43'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-43">&#182;</a>
        </div>
        <p>animation sequence is complete</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">data</span><span class="p">.</span><span class="nx">hitFrame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

          <span class="nx">animationComplete</span><span class="p">();</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">power</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-44'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-44">&#182;</a>
        </div>
        <p>it&rsquo;s all over.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">dead</span><span class="p">();</span>
          <span class="p">}</span>

          <span class="nx">complete</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

          <span class="nx">applyFrame</span><span class="p">();</span>

        <span class="p">}</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">hitFrame</span><span class="o">++</span><span class="p">;</span>

        <span class="k">return</span> <span class="nx">complete</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animationStart</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-45'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-45">&#182;</a>
        </div>
        <p>register animation sequence with controller&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">blockController</span><span class="p">.</span><span class="nx">startAnimation</span><span class="p">(</span><span class="nx">objectInterface</span><span class="p">);</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s1">&#39;exploding&#39;</span><span class="p">);</span>
        <span class="nx">applyFrame</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hit</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-46'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-46">&#182;</a>
        </div>
        <p>explode?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">power</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">power</span><span class="o">--</span><span class="p">;</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">addPoints</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">points</span><span class="p">);</span>
        <span class="nx">animationStart</span><span class="p">();</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">dead</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-47'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-47">&#182;</a>
        </div>
        <p>after explosion sequence has finished</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">power</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>
          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">statsController</span><span class="p">.</span><span class="nx">record</span><span class="p">(</span><span class="s1">&#39;block&#39;</span><span class="p">);</span>
          <span class="nx">destruct</span><span class="p">();</span>

        <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">destruct</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-48'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-48">&#182;</a>
        </div>
        <p>clean-up: remove from the DOM.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">o</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
      <span class="nx">o</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">restore</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-49'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-49">&#182;</a>
        </div>
        <p>reset state and re-init</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundPosition</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="s1">&#39;dead&#39;</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">power</span> <span class="o">=</span> <span class="nx">defaults</span><span class="p">.</span><span class="nx">power</span><span class="p">;</span>

      <span class="nx">init</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">o</span> <span class="o">=</span> <span class="nx">makeGridItem</span><span class="p">({</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
          <span class="nx">type</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
          <span class="nx">subType</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">subType</span>
        <span class="p">});</span>

      <span class="p">}</span>

      <span class="nx">dom</span><span class="p">.</span><span class="nx">worldFragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="nx">init</span><span class="p">();</span>

    <span class="nx">objectInterface</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">hit</span><span class="o">:</span> <span class="nx">hit</span><span class="p">,</span>
      <span class="nx">hittable</span><span class="o">:</span> <span class="nx">hittable</span><span class="p">,</span>
      <span class="nx">pixelCollisionCheck</span><span class="o">:</span> <span class="nx">pixelCollisionCheck</span><span class="p">,</span>
      <span class="nx">restore</span><span class="o">:</span> <span class="nx">restore</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">objectInterface</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">BadGuyController</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">badGuys</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">,</span>
          <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">animate</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">collision</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-50'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-50">&#182;</a>
        </div>
        <p>make noise.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">incrementAudioPitch</span><span class="p">();</span>
        <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">playBoom</span><span class="p">(</span><span class="nx">audioBoomScale</span><span class="p">[</span><span class="nx">getAudioPitch</span><span class="p">()]);</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">selfCollisionCheck</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-51'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-51">&#182;</a>
        </div>
        <p>did one bad guy crash into another?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">,</span>
          <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">hit</span><span class="p">,</span> <span class="nx">thisPoint</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">j</span><span class="o">=</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>

          <span class="nx">thisPoint</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
            <span class="nx">w</span><span class="o">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
            <span class="nx">h</span><span class="o">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
          <span class="p">}</span>

          <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-52'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-52">&#182;</a>
        </div>
        <p>don&rsquo;t compare to self, or dead things&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">!==</span> <span class="nx">j</span> <span class="o">&amp;&amp;</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span> <span class="o">&amp;&amp;</span> <span class="nx">items</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">items</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span><span class="p">)</span> <span class="p">{</span>

              <span class="nx">hit</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">thisPoint</span><span class="p">,</span> <span class="p">{</span>
                <span class="nx">x</span><span class="o">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                <span class="nx">y</span><span class="o">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                <span class="nx">w</span><span class="o">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                <span class="nx">h</span><span class="o">:</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
              <span class="p">});</span>

              <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-53'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-53">&#182;</a>
        </div>
        <p>double-boom, all the way!</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">die</span><span class="p">();</span>
                <span class="nx">items</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">die</span><span class="p">();</span>
              <span class="p">}</span>

            <span class="p">}</span>

          <span class="p">}</span>

        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">collision</span><span class="p">();</span>
        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">collisionCheck</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-54'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-54">&#182;</a>
        </div>
        <p>check bad guy objects for collision</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">,</span>
          <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">hit</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">hit</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">collisionCheck</span><span class="p">();</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">hit</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-55'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-55">&#182;</a>
        </div>
        <p>TODO: needless optimization?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">selfCollisionCheck</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">collision</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">hit</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">createBadGuy</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-56'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-56">&#182;</a>
        </div>
        <p>hack: check and clean up any dead ones, first.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">BadGuy</span><span class="p">());</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">killAll</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-57'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-57">&#182;</a>
        </div>
        <p>the effect of a smartbomb.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-58'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-58">&#182;</a>
        </div>
        <p>TODO: active check?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">die</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">collisionCheck</span><span class="o">:</span> <span class="nx">collisionCheck</span><span class="p">,</span>
      <span class="nx">createBadGuy</span><span class="o">:</span> <span class="nx">createBadGuy</span><span class="p">,</span>
      <span class="nx">killAll</span><span class="o">:</span> <span class="nx">killAll</span><span class="p">,</span>
      <span class="nx">objects</span><span class="o">:</span> <span class="nx">objects</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyController</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BadGuyController</span><span class="p">();</span>

  <span class="kd">var</span> <span class="nx">badGuyTemplate</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
  <span class="nx">badGuyTemplate</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;&lt;div class=&quot;icon&quot;&gt;&lt;/div&gt;&#39;</span><span class="p">;</span>
  <span class="nx">badGuyTemplate</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;bad-guy&#39;</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">badGuyCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">BadGuy</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">css</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">events</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">objectInterface</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">oIcon</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-59'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-59">&#182;</a>
        </div>
        <p>for centering around ship</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">centerOffset</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">sound</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">nodeParent</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">;</span>

    <span class="nx">css</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">&#39;bird&#39;</span><span class="o">:</span> <span class="s1">&#39;bird&#39;</span><span class="p">,</span>
      <span class="s1">&#39;smiley&#39;</span><span class="o">:</span> <span class="s1">&#39;smiley&#39;</span><span class="p">,</span>
      <span class="s1">&#39;x&#39;</span><span class="o">:</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span>
      <span class="s1">&#39;exploding&#39;</span><span class="o">:</span> <span class="s1">&#39;exploding&#39;</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">active</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">dead</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">visible</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;badGuy&#39;</span> <span class="o">+</span> <span class="nx">badGuyCounter</span><span class="o">++</span><span class="p">,</span>
      <span class="nx">exploding</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">x</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">w</span><span class="o">:</span> <span class="mi">24</span><span class="p">,</span> <span class="c1">// HACK: container is actually 32 (for explosion), character is 24x24.</span>
      <span class="nx">h</span><span class="o">:</span> <span class="mi">24</span><span class="p">,</span>
      <span class="nx">containerW</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
      <span class="nx">containerH</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
      <span class="nx">vX</span><span class="o">:</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="o">/</span><span class="mi">16</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">GAME_SPEED</span><span class="p">,</span>
      <span class="nx">vY</span><span class="o">:</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="o">/</span><span class="mi">16</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">GAME_SPEED</span><span class="p">,</span>
      <span class="nx">points</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>
      <span class="nx">explosionFrame</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">explosionFrames</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="nx">jitterX</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">jitterY</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">lastX</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastY</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">row</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">col</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">type</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">types</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;bird&#39;</span><span class="p">,</span> <span class="s1">&#39;smiley&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">],</span>
      <span class="nx">frame</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">frameCount</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">frameCounts</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">bird</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="nx">smiley</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="nx">x</span><span class="o">:</span> <span class="mi">4</span>
      <span class="p">}</span>
    <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-60'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-60">&#182;</a>
        </div>
        <p>die when fire hits end of screen?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">function</span> <span class="nx">hide</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">nodeParent</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">show</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">nodeParent</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">hide</span><span class="p">();</span>

      <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">css</span><span class="p">.</span><span class="nx">exploding</span><span class="p">);</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getRandomJitter</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">centerOffset</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">randomizeJitter</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">jitterX</span> <span class="o">=</span> <span class="nx">centerOffset</span> <span class="o">+</span> <span class="nx">getRandomJitter</span><span class="p">();</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">jitterY</span> <span class="o">=</span> <span class="nx">centerOffset</span> <span class="o">+</span> <span class="nx">getRandomJitter</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">location</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">isInView</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">))</span> <span class="p">{</span>

          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-61'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-61">&#182;</a>
        </div>
        <p>only apply jitter every so often</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginLeft</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">jitterX</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
            <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginTop</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">jitterY</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

            <span class="nx">randomizeJitter</span><span class="p">();</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

            <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginLeft</span> <span class="o">=</span> <span class="nx">centerOffset</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
            <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginTop</span> <span class="o">=</span> <span class="nx">centerOffset</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

          <span class="p">}</span>

          <span class="nx">show</span><span class="p">();</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

          <span class="nx">hide</span><span class="p">();</span>

        <span class="p">}</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">lastX</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">lastY</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-62'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-62">&#182;</a>
        </div>
        <p>TODO: Review vs. coordinate checks</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">location</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">xyToRowCol</span><span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">jitterX</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">jitterY</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">col</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">||</span> <span class="nx">location</span><span class="p">.</span><span class="nx">row</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">col</span><span class="p">;</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">row</span><span class="p">;</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyMap</span><span class="p">.</span><span class="nx">registerLocation</span><span class="p">({</span>
            <span class="nx">object</span><span class="o">:</span> <span class="nx">objectInterface</span><span class="p">,</span>
            <span class="nx">id</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
            <span class="nx">col</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
            <span class="nx">row</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span>
          <span class="p">});</span>

        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveBy</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// TODO: labels for relative grid item values?</span></pre></div>
      </td>
    </tr>
    <tr id='section-63'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-63">&#182;</a>
        </div>
        <p>move and do collision check?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">speedMultiplier</span><span class="p">);</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">speedMultiplier</span><span class="p">);</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">applyFrame</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">oIcon</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">oIcon</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundPosition</span> <span class="o">=</span> <span class="s1">&#39;0px &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">frame</span> <span class="o">*</span> <span class="o">-</span><span class="nx">data</span><span class="p">.</span><span class="nx">h</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">applyFrameX</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-64'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-64">&#182;</a>
        </div>
        <p>for horizontal sprites</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundPosition</span> <span class="o">=</span> <span class="p">(</span><span class="nx">frame</span> <span class="o">*</span> <span class="o">-</span><span class="nx">data</span><span class="p">.</span><span class="nx">containerW</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px 0px&#39;</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">targetPlayer</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-65'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-65">&#182;</a>
        </div>
        <p>home in on player coordinates.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">ship</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">;</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">deltaX</span><span class="o">:</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="p">(</span><span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
        <span class="nx">deltaY</span><span class="o">:</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="p">(</span><span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">h</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">ship</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-66'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-66">&#182;</a>
        </div>
        <p>may be inactive, or died and awaiting cleanup</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">data</span><span class="p">.</span><span class="nx">frame</span><span class="o">++</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">frame</span> <span class="o">&gt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">frameCount</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-67'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-67">&#182;</a>
        </div>
        <p>apply background position</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">applyFrame</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">frame</span><span class="p">);</span>

        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-68'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-68">&#182;</a>
        </div>
        <p>figure out direction.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">deltas</span> <span class="o">=</span> <span class="nx">targetPlayer</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-69'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-69">&#182;</a>
        </div>
        <p>increase frame count, move vX + vY</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">moveBy</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*</span> <span class="nx">deltas</span><span class="p">.</span><span class="nx">deltaX</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">GAME_SPEED</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*</span> <span class="nx">deltas</span><span class="p">.</span><span class="nx">deltaY</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">GAME_SPEED</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-70'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-70">&#182;</a>
        </div>
        <p>and do collision check?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">collisionCheck</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-71'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-71">&#182;</a>
        </div>
        <p>explosion/death sequence</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-72'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-72">&#182;</a>
        </div>
        <p>if (counter % 2 === 0) {</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span><span class="o">++</span><span class="p">;</span>

          <span class="nx">applyFrameX</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span><span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span> <span class="o">&gt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrames</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-73'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-73">&#182;</a>
        </div>
        <p>it&rsquo;s all over.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">dead</span><span class="p">();</span>
          <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-74'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-74">&#182;</a>
        </div>
        <p>}</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">startAttack</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">randomizePosition</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-75'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-75">&#182;</a>
        </div>
        <p>play sound on loop, annoy user?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">sound</span> <span class="o">=</span> <span class="nx">soundManager</span><span class="p">.</span><span class="nx">getSoundById</span><span class="p">(</span><span class="s1">&#39;badguy-loop-&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">sound</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">sound</span><span class="p">.</span><span class="nx">playState</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">sound</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">randomizePosition</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-76'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-76">&#182;</a>
        </div>
        <p>warp to a random row/col. give &lsquo;er.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">col</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">;</span>

      <span class="nx">row</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_rows</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
      <span class="nx">col</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_cols</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

      <span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">col</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">);</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">row</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">);</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">collisionCheck</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-77'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-77">&#182;</a>
        </div>
        <p>did the bad guy hit its target, or turret fire, or ?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">intersects</span><span class="p">,</span> <span class="nx">item</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">ship</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">hit</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">incrementPitch</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">audioPitch</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">turretGunfire</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">thisPoint</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-78'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-78">&#182;</a>
        </div>
        <p>check ship
check ship gunfire
check turrent gunfire
check other bad guys
check spaceballs?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">thisPoint</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">jitterX</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">jitterY</span><span class="p">,</span>
        <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
        <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
      <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-79'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-79">&#182;</a>
        </div>
        <p>did the bad guy hit the ship?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">hit</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">collisionCheck</span><span class="p">(</span><span class="nx">thisPoint</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;bad guy hit the ship&#39;</span><span class="p">);</span>
        <span class="nx">die</span><span class="p">();</span>
        <span class="nx">ship</span><span class="p">.</span><span class="nx">die</span><span class="p">();</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-80'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-80">&#182;</a>
        </div>
        <p>did we hit a bullet?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">fire</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfire</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">gunfireObject</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">fire</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">fire</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">hit</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">thisPoint</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">fire</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">fire</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
            <span class="nx">w</span><span class="o">:</span> <span class="nx">fire</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
            <span class="nx">h</span><span class="o">:</span> <span class="nx">fire</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
          <span class="p">});</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-81'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-81">&#182;</a>
        </div>
        <p>we have a winner.
let gunfire pass through, per original game rules.
fire[i].die();</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>

        <span class="p">}</span>

      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-82'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-82">&#182;</a>
        </div>
        <p>TODO: Make new map-based method work better.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="cm">/*</span>
<span class="cm">      gunfireObject = game.objects.shipGunfireMap.check(data.row, data.col);</span>

<span class="cm">      if (gunfireObject &amp;&amp; !gunfireObject.data.dead) {</span></pre></div>
      </td>
    </tr>
    <tr id='section-83'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-83">&#182;</a>
        </div>
        <p>we have a (potential) winner.
do more precise coordinate check within grid.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="cm">        hit = game.objects.collision.check(thisPoint, {</span>
<span class="cm">          x: gunfireObject.data.x,</span>
<span class="cm">          y: gunfireObject.data.y,</span>
<span class="cm">          w: gunfireObject.data.w,</span>
<span class="cm">          h: gunfireObject.data.h</span>
<span class="cm">        });</span>
<span class="cm">      }</span>
<span class="cm">*/</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;bad guy hit ship gunfire&#39;</span><span class="p">);</span>
        <span class="nx">die</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-84'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-84">&#182;</a>
        </div>
        <p>did the bad guy hit turret gunfire?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-85'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-85">&#182;</a>
        </div>
        <p>if heading down or right, base coordinates on far edges.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="kd">var</span> <span class="nx">location</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">xyToRowCol</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">h</span><span class="o">/</span><span class="mi">2</span><span class="p">));</span></pre></div>
      </td>
    </tr>
    <tr id='section-86'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-86">&#182;</a>
        </div>
        <p>var location = game.objects.collision.xyToRowCol(data.x, data.y);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">turretGunfire</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfireMap</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span> <span class="nx">location</span><span class="p">.</span><span class="nx">col</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">turretGunfire</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-87'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-87">&#182;</a>
        </div>
        <p>we have an object. do a collision check.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">hit</span> <span class="o">=</span> <span class="nx">turretGunfire</span><span class="p">.</span><span class="nx">collisionCheck</span><span class="p">();</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">die</span><span class="p">();</span>
          <span class="p">}</span>

        <span class="p">}</span>

      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">hit</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">setRandomType</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">types</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">data</span><span class="p">.</span><span class="nx">types</span><span class="p">.</span><span class="nx">length</span><span class="p">)];</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">frameCount</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">frameCounts</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span><span class="p">];</span></pre></div>
      </td>
    </tr>
    <tr id='section-88'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-88">&#182;</a>
        </div>
        <p>append relevant CSS</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span><span class="p">]);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">die</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-89'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-89">&#182;</a>
        </div>
        <p>explosion effect/noise</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">addPoints</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">points</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">incrementAudioPitch</span><span class="p">();</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">sound</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">sound</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">playBoom</span><span class="p">(</span><span class="nx">audioBoomScale</span><span class="p">[</span><span class="nx">getAudioPitch</span><span class="p">()]);</span>
        <span class="p">}</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">exploding</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-90'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-90">&#182;</a>
        </div>
        <p>and remove from the collision map.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyMap</span><span class="p">.</span><span class="nx">clearLocation</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">statsController</span><span class="p">.</span><span class="nx">record</span><span class="p">(</span><span class="s1">&#39;badGuy&#39;</span><span class="p">);</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">dead</span><span class="p">()</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">reset</span><span class="p">();</span>
        <span class="nx">destruct</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">destruct</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-91'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-91">&#182;</a>
        </div>
        <p>remove from the dom, etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="nx">oIcon</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

         <span class="nx">o</span> <span class="o">=</span> <span class="nx">badGuyTemplate</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
         <span class="nx">oIcon</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

        <span class="nx">setRandomType</span><span class="p">();</span>

      <span class="p">}</span>

    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-92'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-92">&#182;</a>
        </div>
        <p>hack/convenience: start right away?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">init</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-93'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-93">&#182;</a>
        </div>
        <p>hack/testing</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">startAttack</span><span class="p">();</span>

    <span class="nx">objectInterface</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">collisionCheck</span><span class="o">:</span> <span class="nx">collisionCheck</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">die</span><span class="o">:</span> <span class="nx">die</span><span class="p">,</span>
      <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span><span class="p">,</span>
      <span class="nx">startAttack</span><span class="o">:</span> <span class="nx">startAttack</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">objectInterface</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">animateSpaceBalls</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
      <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">animate</span><span class="p">();</span>
    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-94'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-94">&#182;</a>
        </div>
        <p>also do &ldquo;own&rdquo; collision check</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-95'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-95">&#182;</a>
        </div>
        <p>don&rsquo;t compare against self&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">j</span> <span class="o">!==</span> <span class="nx">i</span> <span class="o">&amp;&amp;</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">===</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">&amp;&amp;</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">===</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-96'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-96">&#182;</a>
        </div>
        <p>console.log('spaceball vs. spaceball!&rsquo;);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">bounce</span><span class="p">();</span>
          <span class="k">break</span><span class="p">;</span>

        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">spaceBallTemplate</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
  <span class="nx">spaceBallTemplate</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;spaceball&#39;</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">spaceBallCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">SpaceBall</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-97'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-97">&#182;</a>
        </div>
        <p>&ldquo;it&rsquo;s like a meatball, but in space!&rdquo;
a mysterious asteroid blob that idly floats around the world.
it doesn&rsquo;t judge, it doesn&rsquo;t blame, it just <em>is</em>.
oblivious to ship and turret gunfire.
destroys everything in its path.
bounces off of blocks, walls and other spaceballs.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">events</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">objectInterface</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">active</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">visible</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;spaceBall&#39;</span> <span class="o">+</span> <span class="nx">spaceBallCounter</span><span class="o">++</span><span class="p">,</span>
      <span class="nx">x</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">w</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
      <span class="nx">h</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
      <span class="nx">vX</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">vY</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">lastX</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastY</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">row</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span>
      <span class="nx">col</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">col</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">nodeParent</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">setDirection</span><span class="p">(</span><span class="nx">noAxisFlip</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-98'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-98">&#182;</a>
        </div>
        <p>randomly choose a direction.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">xAxis</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-99'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-99">&#182;</a>
        </div>
        <p>randomly choose +/&ndash;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">velocity</span> <span class="o">=</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="o">/</span><span class="mi">16</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">GAME_SPEED</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-100'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-100">&#182;</a>
        </div>
        <p>HACK: for now, just be stupid and reverse course.
current bug exists where reversing direction causes minute up/down/left/right movements, resulting in imperfect grid alignment</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">noAxisFlip</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">noAxisFlip</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">=</span> <span class="p">(</span><span class="nx">xAxis</span> <span class="o">?</span> <span class="nx">velocity</span><span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">=</span> <span class="p">(</span><span class="nx">xAxis</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">velocity</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-101'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-101">&#182;</a>
        </div>
        <p>reverse direction on the current axis.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*=</span> <span class="nx">xAxis</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*=</span> <span class="nx">xAxis</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hide</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">nodeParent</span> <span class="o">&amp;&amp;</span> <span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">nodeParent</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">show</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">nodeParent</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">location</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
        <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">lastX</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">lastY</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-102'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-102">&#182;</a>
        </div>
        <p>location = game.objects.collision.xyToRowCol(x + (data.vX &gt;= 0 ? data.w : 0), y + (data.vY &gt;= 0 ? data.h : 0));</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">location</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">xyToRowCol</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">isInView</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span> <span class="nx">location</span><span class="p">.</span><span class="nx">row</span><span class="p">))</span> <span class="p">{</span>

          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">y</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

          <span class="nx">show</span><span class="p">();</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

          <span class="nx">hide</span><span class="p">();</span>

        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">col</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">||</span> <span class="nx">location</span><span class="p">.</span><span class="nx">row</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">col</span><span class="p">;</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">row</span><span class="p">;</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBallMap</span><span class="p">.</span><span class="nx">registerLocation</span><span class="p">({</span>
            <span class="nx">object</span><span class="o">:</span> <span class="nx">objectInterface</span><span class="p">,</span>
            <span class="nx">id</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
            <span class="nx">col</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
            <span class="nx">row</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span>
          <span class="p">});</span>

        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveBy</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// TODO: labels for relative grid item values?</span></pre></div>
      </td>
    </tr>
    <tr id='section-103'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-103">&#182;</a>
        </div>
        <p>move and do collision check?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">speedMultiplier</span><span class="p">);</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">speedMultiplier</span><span class="p">);</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="p">}</span>


    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-104'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-104">&#182;</a>
        </div>
        <p>increase frame count, move vX + vY</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">moveBy</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-105'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-105">&#182;</a>
        </div>
        <p>and do collision check?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">collisionCheck</span><span class="p">();</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">bounce</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-106'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-106">&#182;</a>
        </div>
        <p>immediately move to exact grid coordinates, so we don&rsquo;t get double-collision issues&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-107'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-107">&#182;</a>
        </div>
        <p>reverse direction on a random axis.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">setDirection</span><span class="p">();</span>

      <span class="nx">moveBy</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">collisionCheck</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-108'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-108">&#182;</a>
        </div>
        <p>bounce if we hit a world boundary, a grid item, or another spaceball.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-109'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-109">&#182;</a>
        </div>
        <p>TODO: allow wrap-around, if objects don&rsquo;t exist at the other end?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">location</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nx">bounce</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">&gt;=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_cols</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nx">bounce</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">&gt;=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_rows</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nx">bounce</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">return</span> <span class="nx">bounce</span><span class="p">();</span>

      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-110'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-110">&#182;</a>
        </div>
        <p>check next block?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-111'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-111">&#182;</a>
        </div>
        <p>check right side</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">location</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">xyToRowCol</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-112'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-112">&#182;</a>
        </div>
        <p>check bottom side</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">location</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">xyToRowCol</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span><span class="p">);</span>

      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">location</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-113'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-113">&#182;</a>
        </div>
        <p>check grid for blocks</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">item</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">][</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">]</span> <span class="o">||</span> <span class="kc">null</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">item</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">location</span><span class="p">.</span><span class="nx">row</span><span class="p">][</span><span class="nx">location</span><span class="p">.</span><span class="nx">col</span><span class="p">]</span> <span class="o">||</span> <span class="kc">null</span><span class="p">;</span>

      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-114'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-114">&#182;</a>
        </div>
        <p>this should be only a Block() instance.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">item</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-115'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-115">&#182;</a>
        </div>
        <p>console.log(&lsquo;spaceball hit block&rsquo;);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">return</span> <span class="nx">bounce</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">startAttack</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">setInitialPosition</span><span class="p">();</span>

      <span class="nx">setDirection</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hittable</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">pixelCollisionCheck</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">hit</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">collision</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">;</span>

      <span class="nx">hit</span> <span class="o">=</span> <span class="nx">collision</span><span class="p">.</span><span class="nx">checkSprites</span><span class="p">({</span>
         <span class="nx">object1</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">,</span>
         <span class="nx">object2</span><span class="o">:</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-116'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-116">&#182;</a>
        </div>
        <p>HACK: note re-use of ship pixel data here. It&rsquo;s close enough. :D</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>           <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship&#39;</span><span class="p">,</span>
           <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
           <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
           <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
           <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
         <span class="p">}</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="nx">hit</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">setInitialPosition</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-117'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-117">&#182;</a>
        </div>
        <p>warp to a random, unoccupied space.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">row</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span>
          <span class="nx">col</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
          <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">;</span>

      <span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">col</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">);</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">row</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">);</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">velocity</span> <span class="o">=</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="o">/</span><span class="mi">16</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">GAME_SPEED</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

         <span class="nx">o</span> <span class="o">=</span> <span class="nx">spaceBallTemplate</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

         <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
           <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">=</span> <span class="nx">velocity</span><span class="p">;</span>
         <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
           <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">=</span> <span class="nx">velocity</span><span class="p">;</span>
         <span class="p">}</span>

      <span class="p">}</span>

      <span class="nx">startAttack</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-118'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-118">&#182;</a>
        </div>
        <p>append to DOM
game.dom.worldFragment.appendChild(o);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">restore</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-119'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-119">&#182;</a>
        </div>
        <p>you can&rsquo;t kill a roach, man.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">init</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-120'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-120">&#182;</a>
        </div>
        <p>show right away if it should be visible, too</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">nodeParent</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>

      <span class="p">}</span>

    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-121'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-121">&#182;</a>
        </div>
        <p>hack/convenience: start right away?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">init</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-122'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-122">&#182;</a>
        </div>
        <p>hack/testing</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">startAttack</span><span class="p">();</span>

    <span class="nx">objectInterface</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">bounce</span><span class="o">:</span> <span class="nx">bounce</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">hittable</span><span class="o">:</span> <span class="nx">hittable</span><span class="p">,</span>
      <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span><span class="p">,</span>
      <span class="nx">pixelCollisionCheck</span><span class="o">:</span> <span class="nx">pixelCollisionCheck</span><span class="p">,</span>
      <span class="nx">restore</span><span class="o">:</span> <span class="nx">restore</span><span class="p">,</span>
      <span class="nx">startAttack</span><span class="o">:</span> <span class="nx">startAttack</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">objectInterface</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">Screen</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">events</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">lastVisibleCheck</span> <span class="o">=</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-123'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-123">&#182;</a>
        </div>
        <p>previous screen coordinates</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">x</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">screen_width</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">screen_height</span><span class="o">:</span> <span class="kc">null</span>
    <span class="p">}</span>

    <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">coords</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">lastX</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">lastY</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">0</span>
      <span class="p">},</span>

      <span class="nx">visibleGridInfo</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">from</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">row</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nx">col</span><span class="o">:</span> <span class="kc">null</span>
        <span class="p">},</span>
        <span class="nx">to</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">row</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nx">col</span><span class="o">:</span> <span class="kc">null</span>
        <span class="p">},</span>
        <span class="nx">range</span><span class="o">:</span> <span class="kc">null</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="nx">events</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">resize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-124'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-124">&#182;</a>
        </div>
        <p>note additional ORed legacy browser (IE 8, etc.) checks</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span> <span class="o">||</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">clientWidth</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollWidth</span><span class="p">);</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">||</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">clientHeight</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollHeight</span><span class="p">);</span>

        <span class="nx">refreshVisibleGrid</span><span class="p">();</span>

      <span class="p">}</span>

    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

      <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">lastX</span> <span class="o">!==</span> <span class="nx">x</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">lastY</span> <span class="o">!==</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">lastX</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">lastY</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-125'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-125">&#182;</a>
        </div>
        <p>scroll the world.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="cm">/*</span>
<span class="cm">        if (is_firefox &amp;&amp; features.transform.prop) {</span>
<span class="cm">          game.dom.world.style[features.transform.prop] = &#39;translate(-&#39; + x + &#39;px, -&#39; + y + &#39;px)&#39;;</span>
<span class="cm">        } else {</span>
<span class="cm">          window.scrollTo(x, y);</span>
<span class="cm">        }</span>
<span class="cm">*/</span>

        <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>

        <span class="nx">refreshVisibleGrid</span><span class="p">();</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">centerAtPoint</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-126'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-126">&#182;</a>
        </div>
        <p>given x/y, set the mid-point of the screen there.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">targetX</span><span class="p">,</span>
          <span class="nx">targetY</span><span class="p">,</span>
          <span class="nx">midX</span><span class="p">,</span>
          <span class="nx">midY</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">targetX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">targetX</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
      <span class="p">}</span> 

      <span class="k">if</span> <span class="p">(</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">targetY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">targetY</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
      <span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">      window.scrollTo(targetX, targetY);</span>

<span class="cm">      data.coords.lastX = targetX;</span>
<span class="cm">      data.coords.lastY = targetY;</span>

<span class="cm">      data.coords.x = targetX;</span>
<span class="cm">      data.coords.y = targetY;</span>
<span class="cm">*/</span>
      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">targetX</span><span class="p">,</span> <span class="nx">targetY</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveBy</span><span class="p">(</span><span class="nx">xMultiplier</span><span class="p">,</span> <span class="nx">yMultiplier</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">oldX</span><span class="p">,</span> <span class="nx">oldY</span><span class="p">,</span> <span class="nx">newX</span><span class="p">,</span> <span class="nx">newY</span><span class="p">;</span>

      <span class="nx">oldX</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
      <span class="nx">oldY</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

      <span class="nx">newX</span> <span class="o">=</span> <span class="nx">oldX</span> <span class="o">+</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span> <span class="o">*</span> <span class="nx">xMultiplier</span><span class="p">);</span>
      <span class="nx">newY</span> <span class="o">=</span> <span class="nx">oldY</span> <span class="o">+</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span> <span class="o">*</span> <span class="nx">yMultiplier</span><span class="p">);</span>

      <span class="nx">newX</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_width</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">newX</span><span class="p">));</span>
      <span class="nx">newY</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_height</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">newY</span><span class="p">));</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">newX</span> <span class="o">===</span> <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">lastX</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">newY</span> <span class="o">===</span> <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">lastY</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">newX</span><span class="p">,</span> <span class="nx">newY</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">refreshVisibleGrid</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">coords</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">last</span> <span class="o">=</span> <span class="nx">lastVisibleCheck</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-127'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-127">&#182;</a>
        </div>
        <p>TODO: make sure this check works.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">last</span><span class="p">.</span><span class="nx">x</span> <span class="o">===</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">last</span><span class="p">.</span><span class="nx">y</span> <span class="o">===</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">y</span> <span class="o">&amp;&amp;</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">screen_width</span> <span class="o">===</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">width</span> <span class="o">&amp;&amp;</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">screen_height</span> <span class="o">===</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-128'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-128">&#182;</a>
        </div>
        <p>no change since last check</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">visibleGridInfo</span><span class="p">;</span>

      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-129'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-129">&#182;</a>
        </div>
        <p>update previous screen coordinates</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">last</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
      <span class="nx">last</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

      <span class="nx">coords</span><span class="p">.</span><span class="nx">screen_width</span> <span class="o">=</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
      <span class="nx">coords</span><span class="p">.</span><span class="nx">screen_height</span> <span class="o">=</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

      <span class="nx">last</span><span class="p">.</span><span class="nx">screen_width</span> <span class="o">=</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
      <span class="nx">last</span><span class="p">.</span><span class="nx">screen_height</span> <span class="o">=</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span>
          <span class="nx">rows</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_rows</span><span class="p">,</span>
          <span class="nx">cols</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_cols</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">visible_range</span> <span class="o">=</span> <span class="p">[];</span>

      <span class="kd">var</span> <span class="nx">visible</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">from</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">xyToRowCol</span><span class="p">(</span><span class="nx">coords</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">y</span><span class="p">),</span>
        <span class="nx">to</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">xyToRowCol</span><span class="p">(</span><span class="nx">coords</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">coords</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span>
      <span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">      if (game.data.map) {</span></pre></div>
      </td>
    </tr>
    <tr id='section-130'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-130">&#182;</a>
        </div>
        <p>data.map</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="cm">        for (i=visible.from.rows, j=visible.to.rows; i&lt;j; i++) {</span>
<span class="cm">          for (k=visible.from.cols, l=visible.to.cols; k&lt;l; j++) {</span>
<span class="cm">            visible_range.push(game.data.map[i][k]);</span>
<span class="cm">          }</span>
<span class="cm">        }</span>

<span class="cm">      }</span>
<span class="cm">*/</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">visibleGridInfo</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">from</span><span class="o">:</span> <span class="nx">visible</span><span class="p">.</span><span class="nx">from</span><span class="p">,</span>
        <span class="nx">to</span><span class="o">:</span> <span class="nx">visible</span><span class="p">.</span><span class="nx">to</span></pre></div>
      </td>
    </tr>
    <tr id='section-131'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-131">&#182;</a>
        </div>
        <p>range: visible_range</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-132'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-132">&#182;</a>
        </div>
        <p>console.log(&lsquo;refreshVisibleGrid: &rsquo; + data.visibleGridInfo.from.col + &lsquo; &ndash;&gt; &rsquo; + data.visibleGridInfo.to.col + &lsquo;, &rsquo; + data.visibleGridInfo.from.row + &lsquo; &ndash;&gt; &rsquo; + data.visibleGridInfo.to.row + &lsquo;)&rsquo;);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">visibleGridInfo</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">isInView</span><span class="p">(</span><span class="nx">col</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-133'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-133">&#182;</a>
        </div>
        <p>is this location on-screen?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">visibleGridInfo</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-134'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-134">&#182;</a>
        </div>
        <p>console.log(&lsquo;isInView(&rsquo; + col +&lsquo;, &rsquo; + row + &lsquo; / &rsquo; + info.from.col + &lsquo; &ndash;&gt; &rsquo; + info.to.col + &lsquo;, &rsquo; + info.from.row + &lsquo; &ndash;&gt; &rsquo; + info.to.row + &lsquo;)&rsquo;);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">return</span> <span class="p">(</span><span class="nx">col</span> <span class="o">&gt;=</span> <span class="nx">info</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">col</span> <span class="o">&amp;&amp;</span> <span class="nx">row</span> <span class="o">&gt;=</span> <span class="nx">info</span><span class="p">.</span><span class="nx">from</span><span class="p">.</span><span class="nx">row</span> <span class="o">&amp;&amp;</span> <span class="nx">col</span> <span class="o">&lt;=</span> <span class="nx">info</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">col</span> <span class="o">&amp;&amp;</span> <span class="nx">row</span> <span class="o">&lt;=</span> <span class="nx">info</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">row</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">attachEvents</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">utils</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s1">&#39;resize&#39;</span><span class="p">,</span> <span class="nx">events</span><span class="p">.</span><span class="nx">resize</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">attachEvents</span><span class="p">();</span>

      <span class="nx">events</span><span class="p">.</span><span class="nx">resize</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>

      <span class="nx">centerAtPoint</span><span class="o">:</span> <span class="nx">centerAtPoint</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span><span class="p">,</span>
      <span class="nx">isInView</span><span class="o">:</span> <span class="nx">isInView</span><span class="p">,</span>
      <span class="nx">moveBy</span><span class="o">:</span> <span class="nx">moveBy</span><span class="p">,</span>
      <span class="nx">moveTo</span><span class="o">:</span> <span class="nx">moveTo</span><span class="p">,</span>
      <span class="nx">refreshVisibleGrid</span><span class="o">:</span> <span class="nx">refreshVisibleGrid</span>

    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">stopEvent</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">evt</span> <span class="o">=</span> <span class="nx">e</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>

      <span class="nx">evt</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

      <span class="nx">evt</span><span class="p">.</span><span class="nx">cancelBubble</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">KeyboardMonitor</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-135'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-135">&#182;</a>
        </div>
        <p>hash for keys being pressed</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">downKeys</span> <span class="o">=</span> <span class="p">{};</span></pre></div>
      </td>
    </tr>
    <tr id='section-136'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-136">&#182;</a>
        </div>
        <p>meaningful labels for key values</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">keyMap</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">&#39;shift&#39;</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span>
      <span class="s1">&#39;ctrl&#39;</span><span class="o">:</span> <span class="mi">17</span><span class="p">,</span>
      <span class="s1">&#39;space&#39;</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
      <span class="s1">&#39;left&#39;</span><span class="o">:</span> <span class="mi">37</span><span class="p">,</span>
      <span class="s1">&#39;up&#39;</span><span class="o">:</span> <span class="mi">38</span><span class="p">,</span>
      <span class="s1">&#39;right&#39;</span><span class="o">:</span> <span class="mi">39</span><span class="p">,</span>
      <span class="s1">&#39;down&#39;</span><span class="o">:</span> <span class="mi">40</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">keydown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">keys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">].</span><span class="nx">down</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">downKeys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">downKeys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">keys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">].</span><span class="nx">down</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">].</span><span class="nx">allowEvent</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">stopEvent</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

      <span class="p">},</span>

      <span class="nx">keyup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">downKeys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">])</span> <span class="p">{</span>
          <span class="k">delete</span> <span class="nx">downKeys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">];</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">keys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">].</span><span class="nx">up</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">keys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">].</span><span class="nx">up</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">].</span><span class="nx">allowEvent</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">stopEvent</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-137'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-137">&#182;</a>
        </div>
        <p>shift</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;16&#39;</span><span class="o">:</span> <span class="p">{</span>

        <span class="nx">allowEvent</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// don&#39;t use stopEvent()</span>

        <span class="nx">down</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">startFire</span><span class="p">();</span>

        <span class="p">},</span>

        <span class="nx">up</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">endFire</span><span class="p">();</span>

        <span class="p">}</span>

      <span class="p">},</span></pre></div>
      </td>
    </tr>
    <tr id='section-138'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-138">&#182;</a>
        </div>
        <p>ctrl (alternate for shift key)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;17&#39;</span><span class="o">:</span> <span class="p">{</span>

        <span class="nx">allowEvent</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// don&#39;t use stopEvent()</span>

        <span class="nx">down</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">startFire</span><span class="p">();</span>

        <span class="p">},</span>

        <span class="nx">up</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">endFire</span><span class="p">();</span>

        <span class="p">}</span>

      <span class="p">},</span></pre></div>
      </td>
    </tr>
    <tr id='section-139'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-139">&#182;</a>
        </div>
        <p>left</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;37&#39;</span><span class="o">:</span> <span class="p">{</span>

        <span class="nx">down</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">thrust</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

        <span class="p">},</span>


        <span class="nx">up</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">endThrust</span><span class="p">();</span>

        <span class="p">}</span>

      <span class="p">},</span></pre></div>
      </td>
    </tr>
    <tr id='section-140'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-140">&#182;</a>
        </div>
        <p>up</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;38&#39;</span><span class="o">:</span> <span class="p">{</span>

        <span class="nx">down</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">thrust</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>

        <span class="p">},</span>


        <span class="nx">up</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">endThrust</span><span class="p">();</span>

        <span class="p">}</span>

      <span class="p">},</span></pre></div>
      </td>
    </tr>
    <tr id='section-141'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-141">&#182;</a>
        </div>
        <p>right</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;39&#39;</span><span class="o">:</span> <span class="p">{</span>

        <span class="nx">down</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">thrust</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

        <span class="p">},</span>


        <span class="nx">up</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">endThrust</span><span class="p">();</span>

        <span class="p">}</span>

      <span class="p">},</span></pre></div>
      </td>
    </tr>
    <tr id='section-142'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-142">&#182;</a>
        </div>
        <p>down</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;40&#39;</span><span class="o">:</span> <span class="p">{</span>

        <span class="nx">down</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">thrust</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

        <span class="p">},</span>


        <span class="nx">up</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">endThrust</span><span class="p">();</span>

        <span class="p">}</span>

      <span class="p">},</span></pre></div>
      </td>
    </tr>
    <tr id='section-143'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-143">&#182;</a>
        </div>
        <p>space bar!</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;32&#39;</span><span class="o">:</span> <span class="p">{</span>

        <span class="nx">down</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">smartbombController</span><span class="p">.</span><span class="nx">fire</span><span class="p">();</span>

        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">isDown</span><span class="p">(</span><span class="nx">labelOrCode</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-144'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-144">&#182;</a>
        </div>
        <p>check for a pressed key based on &lsquo;37&rsquo; or &lsquo;left&rsquo;, etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">return</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">keyMap</span><span class="p">[</span><span class="nx">labelOrCode</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">?</span> <span class="nx">downKeys</span><span class="p">[</span><span class="nx">keyMap</span><span class="p">[</span><span class="nx">labelOrCode</span><span class="p">]]</span> <span class="o">:</span> <span class="nx">downKeys</span><span class="p">[</span><span class="nx">labelOrCode</span><span class="p">]);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">releaseAll</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-145'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-145">&#182;</a>
        </div>
        <p>reset all pressed key states.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">item</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">item</span> <span class="k">in</span> <span class="nx">downKeys</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">downKeys</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">item</span><span class="p">))</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-146'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-146">&#182;</a>
        </div>
        <p>simulate the keyup event</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">events</span><span class="p">.</span><span class="nx">keyup</span><span class="p">({</span>
            <span class="nx">keyCode</span><span class="o">:</span> <span class="nx">item</span>
          <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">attachEvents</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">utils</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span> <span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="nx">events</span><span class="p">.</span><span class="nx">keydown</span><span class="p">);</span>
      <span class="nx">utils</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span> <span class="s1">&#39;keyup&#39;</span><span class="p">,</span> <span class="nx">events</span><span class="p">.</span><span class="nx">keyup</span><span class="p">);</span>

    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-147'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-147">&#182;</a>
        </div>
        <p>init?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">attachEvents</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>

      <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span><span class="p">,</span>
      <span class="nx">isDown</span><span class="o">:</span> <span class="nx">isDown</span><span class="p">,</span>
      <span class="nx">releaseAll</span><span class="o">:</span> <span class="nx">releaseAll</span>

    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">LevelEndSequence</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">explosions</span><span class="o">:</span> <span class="p">[]</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">active</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">waiting</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">node</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">node</span><span class="p">,</span>
      <span class="nx">explosionCount</span><span class="o">:</span> <span class="mi">16</span><span class="p">,</span>
      <span class="nx">maxRuntime</span><span class="o">:</span> <span class="mi">5000</span><span class="p">,</span>
      <span class="nx">screenOffset</span><span class="o">:</span> <span class="mi">96</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">runTime</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">waiting</span> <span class="o">||</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span>
          <span class="nx">isComplete</span><span class="p">,</span>
          <span class="nx">position</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">explosions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">isComplete</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">explosions</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">explosions</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">animate</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">isComplete</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-148'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-148">&#182;</a>
        </div>
        <p>randomly delay via frame offset, reposition and recycle</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">objects</span><span class="p">.</span><span class="nx">explosions</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="o">-</span><span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">5</span><span class="p">);</span>
          <span class="nx">position</span> <span class="o">=</span> <span class="nx">getRandomPosition</span><span class="p">();</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">explosions</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">explosions</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="nx">makeNoise</span><span class="p">();</span>
        <span class="p">}</span>

      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()</span> <span class="o">-</span> <span class="nx">runTime</span> <span class="o">&gt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">maxRuntime</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">end</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">makeNoise</span><span class="p">(</span><span class="nx">pan</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.85</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">playBoom</span><span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span></pre></div>
      </td>
    </tr>
    <tr id='section-149'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-149">&#182;</a>
        </div>
        <p>TODO: pan</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getRandomPosition</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">screenOffset</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">data</span><span class="p">.</span><span class="nx">screenOffset</span><span class="p">),</span> <span class="mi">10</span><span class="p">),</span>
        <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">screenOffset</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">data</span><span class="p">.</span><span class="nx">screenOffset</span><span class="p">),</span> <span class="mi">10</span><span class="p">)</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">createExplosion</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span>
          <span class="nx">position</span><span class="p">;</span>

      <span class="nx">position</span> <span class="o">=</span> <span class="nx">getRandomPosition</span><span class="p">();</span>

      <span class="nx">objects</span><span class="p">.</span><span class="nx">explosions</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">BigExplosion</span><span class="p">({</span>
        <span class="nx">node</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">node</span><span class="p">,</span>
        <span class="nx">animationModulus</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">position</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="nx">position</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
        <span class="nx">vX</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">vY</span><span class="o">:</span> <span class="mi">0</span>
      <span class="p">}));</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">boom</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
          <span class="nx">maxObjects</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

        <span class="nx">runTime</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-150'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-150">&#182;</a>
        </div>
        <p>create several explosions over time</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">createExplosion</span><span class="p">();</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">maxObjects</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">createExplosion</span><span class="p">,</span> <span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">50</span><span class="p">)</span>
          <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">createExplosion</span><span class="p">,</span> <span class="p">(</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">50</span><span class="p">)</span>
        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">show</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hide</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">end</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">oEnd</span><span class="p">,</span>
          <span class="nx">oBody</span><span class="p">,</span>
          <span class="nx">oStats</span><span class="p">,</span>
          <span class="nx">statsData</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-151'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-151">&#182;</a>
        </div>
        <p>complete.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">waiting</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">waiting</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

      <span class="nx">destruct</span><span class="p">();</span>

      <span class="nx">oEnd</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;level-passed-screen&#39;</span><span class="p">);</span>
      <span class="nx">oBody</span> <span class="o">=</span> <span class="nx">oEnd</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">oStats</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;level-passed-stats&#39;</span><span class="p">);</span>
      <span class="nx">statsData</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">statsController</span><span class="p">.</span><span class="nx">getStats</span><span class="p">();</span>

      <span class="nx">oStats</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;&lt;br&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;&lt;p&gt;Your score: &#39;</span> <span class="o">+</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">getScore</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; points&lt;/p&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;&lt;br&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;&lt;div class=&quot;fixed&quot;&gt;&lt;div class=&quot;icon type-2 block&quot;&gt;&lt;/div&gt; Blocks: &#39;</span> <span class="o">+</span> <span class="nx">statsData</span><span class="p">.</span><span class="nx">block</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;&lt;div class=&quot;fixed&quot;&gt;&lt;div class=&quot;icon type-1 turret right&quot;&gt;&lt;/div&gt; Turrets: &#39;</span> <span class="o">+</span> <span class="nx">statsData</span><span class="p">.</span><span class="nx">turret</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">,</span>
        <span class="s1">&#39;&lt;div class=&quot;fixed bad-guy smiley&quot;&gt;&lt;div class=&quot;icon&quot;&gt;&lt;/div&gt; Bad guys: &#39;</span> <span class="o">+</span> <span class="nx">statsData</span><span class="p">.</span><span class="nx">badGuy</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span>
      <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>

      <span class="nx">oEnd</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>

      <span class="nx">oBody</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginTop</span> <span class="o">=</span> <span class="o">-</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">oBody</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span>

      <span class="nb">document</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="nb">document</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-152'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-152">&#182;</a>
        </div>
        <p>increase game speed multiplier? this will probably break all kinds of stuff.
TODO: Look at this.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">GAME_SPEED</span> <span class="o">+=</span> <span class="mf">0.25</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-153'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-153">&#182;</a>
        </div>
        <p>reset score, stats and so forth</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">oEnd</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">waiting</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">hide</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-154'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-154">&#182;</a>
        </div>
        <p>reset the whole (entire) game</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">survivor</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">resume</span><span class="p">();</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">start</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">show</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-155'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-155">&#182;</a>
        </div>
        <p>&ldquo;Jamie wants big boom.&rdquo; (&mdash; Adam Savage, Mythbusters.)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">boom</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">destruct</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-156'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-156">&#182;</a>
        </div>
        <p>clean-up?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">explosions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">explosions</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">destruct</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="nx">objects</span><span class="p">.</span><span class="nx">explosions</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="p">}</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">levelEndSequence</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">start</span><span class="o">:</span> <span class="nx">start</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">isFreeSpace</span><span class="p">(</span><span class="nx">col</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-157'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-157">&#182;</a>
        </div>
        <p>determine if anything is occupying a map (grid) location.
TODO: also consider &ldquo;in turret gunfire path.&rdquo;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">result</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-158'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-158">&#182;</a>
        </div>
        <p>first, round down.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">col</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">col</span><span class="p">);</span>
    <span class="nx">row</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-159'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-159">&#182;</a>
        </div>
        <p>and check&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">result</span> <span class="o">=</span> <span class="p">(</span></pre></div>
      </td>
    </tr>
    <tr id='section-160'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-160">&#182;</a>
        </div>
        <p>is not a hittable, static map object</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="p">(</span><span class="o">!</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">].</span><span class="nx">hittable</span><span class="p">()))</span></pre></div>
      </td>
    </tr>
    <tr id='section-161'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-161">&#182;</a>
        </div>
        <p>and is not a space inside a base</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="o">&amp;&amp;</span> <span class="nx">mapData</span><span class="p">[</span><span class="nx">row</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">col</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">MAP_INSIDE_BASE_CHAR</span></pre></div>
      </td>
    </tr>
    <tr id='section-162'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-162">&#182;</a>
        </div>
        <p>and is not a turret gunfire object</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfireMap</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">col</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr id='section-163'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-163">&#182;</a>
        </div>
        <p>and is not a bad guy</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyMap</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">col</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span></pre></div>
      </td>
    </tr>
    <tr id='section-164'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-164">&#182;</a>
        </div>
        <p>and is not a spaceball</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBallMap</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">col</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span>

    <span class="p">);</span>

    <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">findFreeSpace</span><span class="p">(</span><span class="nx">col</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-165'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-165">&#182;</a>
        </div>
        <p>given a point, find nearest unoccupied neighbouring space.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
        <span class="nx">targetCol</span><span class="p">,</span>
        <span class="nx">targetRow</span><span class="p">,</span>
        <span class="nx">freeSpace</span><span class="p">,</span>
        <span class="nx">direction</span><span class="p">,</span>
        <span class="nx">directions</span><span class="p">;</span>

    <span class="nx">directions</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
      <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
      <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
      <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
      <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
      <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
    <span class="p">];</span>

    <span class="nx">col</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">col</span><span class="p">);</span>
    <span class="nx">row</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-166'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-166">&#182;</a>
        </div>
        <p>restrict to valid range, also</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">col</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">col</span><span class="p">,</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_cols</span><span class="p">));</span>
    <span class="nx">row</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_rows</span><span class="p">));</span></pre></div>
      </td>
    </tr>
    <tr id='section-167'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-167">&#182;</a>
        </div>
        <p>is the current space OK?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">if</span> <span class="p">(</span><span class="nx">isFreeSpace</span><span class="p">(</span><span class="nx">col</span><span class="p">,</span> <span class="nx">row</span><span class="p">))</span> <span class="p">{</span>

      <span class="k">return</span> <span class="p">[</span><span class="nx">col</span><span class="p">,</span> <span class="nx">row</span><span class="p">];</span>

    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">directions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>

      <span class="nx">targetCol</span> <span class="o">=</span> <span class="nx">col</span> <span class="o">+</span> <span class="nx">directions</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">targetRow</span> <span class="o">=</span> <span class="nx">row</span> <span class="o">+</span> <span class="nx">directions</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span></pre></div>
      </td>
    </tr>
    <tr id='section-168'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-168">&#182;</a>
        </div>
        <p>stay within valid grid ranges, of course.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">targetCol</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">targetRow</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">targetCol</span> <span class="o">&lt;=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_cols</span> <span class="o">&amp;&amp;</span> <span class="nx">targetRow</span> <span class="o">&lt;=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_rows</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">isFreeSpace</span><span class="p">(</span><span class="nx">targetCol</span><span class="p">,</span> <span class="nx">targetRow</span><span class="p">))</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-169'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-169">&#182;</a>
        </div>
        <p>use this one.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="k">return</span> <span class="p">[</span><span class="nx">targetCol</span><span class="p">,</span> <span class="nx">targetRow</span><span class="p">];</span>

          <span class="k">break</span><span class="p">;</span>

        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-170'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-170">&#182;</a>
        </div>
        <p>edge case: all spaces occupied? try recursing with a random direction.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>   <span class="nx">direction</span> <span class="o">=</span> <span class="nx">directions</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="nx">directions</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="mi">10</span><span class="p">)];</span>

   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;recursing with &#39;</span><span class="p">,</span> <span class="nx">col</span> <span class="o">+</span> <span class="nx">direction</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">row</span> <span class="o">+</span> <span class="nx">direction</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

   <span class="k">return</span> <span class="nx">findFreeSpace</span><span class="p">(</span><span class="nx">col</span> <span class="o">+</span> <span class="nx">direction</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">row</span> <span class="o">+</span> <span class="nx">direction</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

  <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-171'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-171">&#182;</a>
        </div>
        <p>hash of sprites</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="kd">var</span> <span class="nx">spriteData</span> <span class="o">=</span> <span class="p">{};</span>

  <span class="kd">function</span> <span class="nx">SpriteData</span><span class="p">(</span><span class="nx">oData</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-172'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-172">&#182;</a>
        </div>
        <p>the simplest, dumbest, least-efficient way of describing pixel data
for hit/collision detection purposes. at least it&rsquo;s fun to look at. :D</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">id</span><span class="o">:</span> <span class="nx">oData</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
      <span class="nx">pixelMap</span><span class="o">:</span> <span class="nx">oData</span><span class="p">.</span><span class="nx">pixelMap</span><span class="p">,</span>
      <span class="nx">width</span><span class="o">:</span> <span class="nx">oData</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
      <span class="nx">height</span><span class="o">:</span> <span class="nx">oData</span><span class="p">.</span><span class="nx">height</span>

    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">check</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">col</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">return</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pixelMap</span><span class="p">[</span><span class="nx">row</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pixelMap</span><span class="p">[</span><span class="nx">row</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pixelMap</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">pixelMap</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">]);</span>

    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-173'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-173">&#182;</a>
        </div>
        <p>console.log(data);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">check</span><span class="o">:</span> <span class="nx">check</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">createSprites</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-174'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-174">&#182;</a>
        </div>
        <p>defines the sprite objects for pixel-level collision detection purposes.
it was either this, or using canvas to load + parse images.
this method is less-flexible, but should be faster (and more fun.)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
        <span class="nx">data</span><span class="p">;</span>

      <span class="nx">data</span> <span class="o">=</span> <span class="p">[{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ship&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;block-type-generic&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-1-upRight&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-1-rightDown&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-1-downLeft&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-1-downRight&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-1-horizontal&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-1-vertical&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-generic-upRight&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-generic-rightDown&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-generic-downLeft&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-generic-downRight&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>


        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-generic-horizontal&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;wall-type-generic-vertical&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;turret-gunfire-horizontal&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;turret-gunfire-vertical&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span><span class="p">,</span>
          <span class="kc">null</span>

        <span class="p">]</span>

      <span class="p">},</span> <span class="p">{</span>

        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ship-gunfire&#39;</span><span class="p">,</span>
        <span class="nx">width</span><span class="o">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="nx">height</span><span class="o">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="nx">pixelMap</span><span class="o">:</span> <span class="p">[</span>

          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

        <span class="p">]</span>

      <span class="p">}</span>
      
    <span class="p">];</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
      <span class="nx">spriteData</span><span class="p">[</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SpriteData</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="nx">createSprites</span><span class="p">();</span>


  <span class="kd">function</span> <span class="nx">Collision</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-175'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-175">&#182;</a>
        </div>
        <p>intersect/overlap detection</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">spriteData</span><span class="o">:</span> <span class="nx">spriteData</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">xyToRowCol</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">result</span><span class="p">;</span>

      <span class="nx">result</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">col</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_cols</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="o">/</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">))),</span>
        <span class="nx">row</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_rows</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">y</span><span class="o">/</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">)))</span>

      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getIntersect</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">result</span><span class="p">,</span>
          <span class="nx">location</span><span class="p">,</span>
          <span class="nx">mapItem</span><span class="p">,</span>
          <span class="nx">intersect</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">x</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">y</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;getIntersect(): WARN: x/y undefined&#39;</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="nx">location</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nx">mapItem</span><span class="o">:</span> <span class="kc">null</span>
        <span class="p">};</span>
      <span class="p">}</span>

      <span class="nx">location</span> <span class="o">=</span> <span class="nx">xyToRowCol</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-176'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-176">&#182;</a>
        </div>
        <p>is there an object on the map here?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">mapItem</span> <span class="o">=</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">location</span><span class="p">.</span><span class="nx">row</span><span class="p">][</span><span class="nx">location</span><span class="p">.</span><span class="nx">col</span><span class="p">]</span> <span class="o">||</span> <span class="kc">null</span><span class="p">);</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">row</span><span class="o">:</span> <span class="nx">location</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span>
        <span class="nx">col</span><span class="o">:</span> <span class="nx">location</span><span class="p">.</span><span class="nx">col</span>
      <span class="p">};</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">check</span><span class="p">(</span><span class="nx">point1</span><span class="p">,</span> <span class="nx">point2</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-177'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-177">&#182;</a>
        </div>
        <p>given two boxes, check for intersects.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">point2</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;=</span> <span class="nx">point1</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-178'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-178">&#182;</a>
        </div>
        <p>point 2 is to the right.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">point1</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">point1</span><span class="p">.</span><span class="nx">w</span> <span class="o">&gt;=</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-179'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-179">&#182;</a>
        </div>
        <p>point 1 overlaps point 2 on x.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="k">if</span> <span class="p">(</span><span class="nx">point1</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-180'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-180">&#182;</a>
        </div>
        <p>point 1 is above point 2.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">point1</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">point1</span><span class="p">.</span><span class="nx">h</span> <span class="o">&gt;=</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-181'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-181">&#182;</a>
        </div>
        <p>point 1 overlaps point 2 on y.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span><span class="nx">point1</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">h</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-182'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-182">&#182;</a>
        </div>
        <p>point 1 is to the right.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">point2</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">w</span> <span class="o">&gt;=</span> <span class="nx">point1</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-183'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-183">&#182;</a>
        </div>
        <p>point 2 overlaps point 1 on x.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="k">if</span> <span class="p">(</span><span class="nx">point2</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">point1</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-184'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-184">&#182;</a>
        </div>
        <p>point 2 is above point 1.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">return</span> <span class="p">(</span><span class="nx">point2</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">h</span> <span class="o">&gt;=</span> <span class="nx">point1</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-185'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-185">&#182;</a>
        </div>
        <p>point 2 is below point 1.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">return</span> <span class="p">(</span><span class="nx">point1</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">point1</span><span class="p">.</span><span class="nx">h</span> <span class="o">&gt;=</span> <span class="nx">point2</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-186'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-186">&#182;</a>
        </div>
        <p>no overlap?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">checkSprites</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span>

      <span class="cm">/*</span>
<span class="cm">        object1: {</span>
<span class="cm">          type: &#39;base-generic-wall-down-right&#39;,</span>
<span class="cm">          x: data.x,</span>
<span class="cm">          y: data.y,</span>
<span class="cm">          w: data.w,</span>
<span class="cm">          h: data.h</span>
<span class="cm">        },</span>
<span class="cm">        object2: oOptions.object // {spriteType, x, y, w, h}</span>
<span class="cm">      */</span>

      <span class="kd">var</span> <span class="nx">sprite1</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">object1</span><span class="p">,</span>
          <span class="nx">sprite2</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">object2</span><span class="p">,</span>
          <span class="nx">sprite1Data</span><span class="p">,</span>
          <span class="nx">sprite2Data</span><span class="p">,</span>
          <span class="nx">overlap</span><span class="p">;</span>

      <span class="nx">overlap</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">sprite1</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">xOffset</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nx">yOffset</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>

          <span class="nx">from</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="kc">null</span>
          <span class="p">},</span>

          <span class="nx">to</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="kc">null</span>
          <span class="p">}</span>

        <span class="p">},</span>

        <span class="nx">sprite2</span><span class="o">:</span> <span class="p">{</span>

          <span class="nx">xOffset</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
          <span class="nx">yOffset</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>

          <span class="nx">from</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="kc">null</span>
          <span class="p">},</span>

          <span class="nx">to</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="kc">null</span>
          <span class="p">}</span>

        <span class="p">}</span>

      <span class="p">};</span></pre></div>
      </td>
    </tr>
    <tr id='section-187'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-187">&#182;</a>
        </div>
        <p>firstly, determine overlapping area.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">deltaX</span><span class="p">,</span> <span class="nx">deltaY</span><span class="p">,</span> <span class="nx">deltaW</span><span class="p">,</span> <span class="nx">deltaH</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-188'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-188">&#182;</a>
        </div>
        <p>to be safe, round up.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">sprite1</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
      <span class="nx">sprite1</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

      <span class="nx">sprite2</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
      <span class="nx">sprite2</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>

      <span class="nx">deltaX</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">sprite2</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
      <span class="nx">deltaY</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">sprite2</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
      <span class="nx">deltaW</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">w</span> <span class="o">-</span> <span class="nx">sprite2</span><span class="p">.</span><span class="nx">w</span><span class="p">);</span>
      <span class="nx">deltaH</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">h</span> <span class="o">-</span> <span class="nx">sprite2</span><span class="p">.</span><span class="nx">h</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;=</span> <span class="nx">sprite1</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-189'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-189">&#182;</a>
        </div>
        <p>sprite 2 is to the right.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">sprite1</span><span class="p">.</span><span class="nx">w</span> <span class="o">&gt;=</span> <span class="nx">sprite2</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">xOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">xOffset</span> <span class="o">=</span> <span class="nx">deltaX</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-190'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-190">&#182;</a>
        </div>
        <p>partial coverage of sprite 1.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="k">if</span> <span class="p">(</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">sprite2</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="nx">deltaY</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-191'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-191">&#182;</a>
        </div>
        <p>TODO: remove this check since it should always be true?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">sprite1</span><span class="p">.</span><span class="nx">h</span> <span class="o">&gt;=</span> <span class="nx">sprite2</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

              <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="o">-</span><span class="nx">deltaY</span><span class="p">;</span>
              <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-192'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-192">&#182;</a>
        </div>
        <p>edge case?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
              <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="o">-</span><span class="nx">deltaY</span><span class="p">;</span>

            <span class="p">}</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

            <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="nx">deltaY</span><span class="p">;</span>
            <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

          <span class="p">}</span>

        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-193'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-193">&#182;</a>
        </div>
        <p>sprite 1 is to the right.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">sprite2</span><span class="p">.</span><span class="nx">w</span> <span class="o">&gt;=</span> <span class="nx">sprite1</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">xOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">xOffset</span> <span class="o">=</span> <span class="nx">deltaX</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-194'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-194">&#182;</a>
        </div>
        <p>partial coverage of sprite 2.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="k">if</span> <span class="p">(</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">sprite1</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="nx">deltaY</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-195'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-195">&#182;</a>
        </div>
        <p>TODO: remove this check since it should always be true?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">sprite2</span><span class="p">.</span><span class="nx">h</span> <span class="o">&gt;=</span> <span class="nx">sprite1</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

              <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="o">-</span><span class="nx">deltaY</span><span class="p">;</span>
              <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-196'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-196">&#182;</a>
        </div>
        <p>edge case?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
              <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="o">-</span><span class="nx">deltaY</span><span class="p">;</span>

            <span class="p">}</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

            <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="nx">deltaY</span><span class="p">;</span>
            <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">yOffset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

          <span class="p">}</span>

        <span class="p">}</span>


      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">xOffset</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">xOffset</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-197'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-197">&#182;</a>
        </div>
        <p>exception: null overlap case?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">PERFORMANCE_MODE</span> <span class="o">||</span> <span class="nx">DEBUG_MODE</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;pixelCollisionCheck: null overlap/xOffset case&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-198'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-198">&#182;</a>
        </div>
        <p>now we know how the distances between boxes.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-199'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-199">&#182;</a>
        </div>
        <p>console.log(&lsquo;checking&rsquo;, sprite1.type, sprite2.type);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">sprite1Data</span> <span class="o">=</span> <span class="nx">spriteData</span><span class="p">[</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">type</span><span class="p">];</span>
      <span class="nx">sprite2Data</span> <span class="o">=</span> <span class="nx">spriteData</span><span class="p">[</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">type</span><span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">sprite1Data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;WARN: No data for sprite type &#39;</span> <span class="o">+</span> <span class="nx">sprite1</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">sprite2Data</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;WARN: No data for sprite type &#39;</span> <span class="o">+</span> <span class="nx">sprite2</span><span class="p">.</span><span class="nx">type</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">max_width</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">sprite1Data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="nx">sprite2Data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">width</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">max_height</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">sprite1Data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span> <span class="nx">sprite2Data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">l</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">pixel_overlap</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">pixel_test</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-200'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-200">&#182;</a>
        </div>
        <p>compare the sprites.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">s1X</span><span class="p">,</span> <span class="nx">s1Y</span><span class="p">,</span> <span class="nx">s2X</span><span class="p">,</span> <span class="nx">s2Y</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">max_height</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">pixel_overlap</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">k</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">l</span><span class="o">=</span><span class="nx">max_width</span><span class="p">;</span> <span class="nx">k</span><span class="o">&lt;</span><span class="nx">l</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">pixel_overlap</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">s1X</span> <span class="o">=</span> <span class="nx">k</span> <span class="o">-</span> <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">xOffset</span><span class="p">;</span>
          <span class="nx">s1Y</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">-</span> <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">.</span><span class="nx">yOffset</span><span class="p">;</span>
          <span class="nx">s2X</span> <span class="o">=</span> <span class="nx">k</span> <span class="o">-</span> <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">xOffset</span><span class="p">;</span>
          <span class="nx">s2Y</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">-</span> <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">.</span><span class="nx">yOffset</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">s1X</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">s1X</span> <span class="o">&lt;</span> <span class="nx">sprite1Data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">width</span> <span class="o">&amp;&amp;</span> <span class="nx">s1Y</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">s1Y</span> <span class="o">&lt;</span> <span class="nx">sprite1Data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">height</span> <span class="o">&amp;&amp;</span> <span class="nx">s2X</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">s2X</span> <span class="o">&lt;</span> <span class="nx">sprite2Data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">width</span> <span class="o">&amp;&amp;</span> <span class="nx">s2Y</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">s2Y</span> <span class="o">&lt;</span> <span class="nx">sprite2Data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">height</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-201'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-201">&#182;</a>
        </div>
        <p>console.log(&lsquo;[ loop row/col &rsquo; + i + &lsquo;, &rsquo; + k +&lsquo;]: comparing &rsquo; + s1X + &lsquo;, &rsquo; + s1Y + &lsquo; to &rsquo; + s2X + &lsquo;, &rsquo; + s2Y);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">pixel_test</span> <span class="o">=</span> <span class="p">(</span><span class="nx">sprite1Data</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">s1Y</span><span class="p">,</span> <span class="nx">s1X</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">sprite2Data</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">s2Y</span><span class="p">,</span> <span class="nx">s2X</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">pixel_test</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">PERFORMANCE_MODE</span> <span class="o">||</span> <span class="nx">DEBUG_MODE</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;FOUND HIT at loop row/col &#39;</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">k</span> <span class="o">+</span><span class="s1">&#39;, comparing &#39;</span> <span class="o">+</span> <span class="nx">s1X</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">s1Y</span> <span class="o">+</span> <span class="s1">&#39; to &#39;</span> <span class="o">+</span> <span class="nx">s2X</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">s2Y</span><span class="p">);</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;sprite1, sprite2&#39;</span><span class="p">,</span> <span class="nx">sprite1</span><span class="p">,</span> <span class="nx">sprite2</span><span class="p">);</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;delta X, Y, W, H: &#39;</span> <span class="o">+</span> <span class="nx">deltaX</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">deltaY</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">deltaW</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">deltaH</span><span class="p">);</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;overlap data&#39;</span><span class="p">,</span> <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite1</span><span class="p">,</span> <span class="nx">overlap</span><span class="p">.</span><span class="nx">sprite2</span><span class="p">);</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">sprite1Data</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">sprite2Data</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="nx">pixel_overlap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">pixel_overlap</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">checkGrid</span><span class="p">(</span><span class="nx">point</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// { x, y, w, h, includeNeighbours }</span></pre></div>
      </td>
    </tr>
    <tr id='section-202'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-202">&#182;</a>
        </div>
        <p>given a box, check either the midpoint or the four corners for intersects.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
          <span class="nx">item</span><span class="p">,</span>
          <span class="nx">intersect_hash</span> <span class="o">=</span> <span class="p">{},</span>
          <span class="nx">intersects</span> <span class="o">=</span> <span class="p">[],</span>
          <span class="nx">result</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">point</span><span class="p">.</span><span class="nx">includeNeighbours</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-203'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-203">&#182;</a>
        </div>
        <p>build the hash of unique intersecting objects</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">intersects</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">getIntersect</span><span class="p">(</span><span class="nx">point</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">y</span><span class="p">));</span>
        <span class="nx">intersects</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">getIntersect</span><span class="p">(</span><span class="nx">point</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">point</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">y</span><span class="p">));</span>
        <span class="nx">intersects</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">getIntersect</span><span class="p">(</span><span class="nx">point</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">point</span><span class="p">.</span><span class="nx">h</span><span class="p">));</span>
        <span class="nx">intersects</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">getIntersect</span><span class="p">(</span><span class="nx">point</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">point</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">point</span><span class="p">.</span><span class="nx">h</span><span class="p">));</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">intersects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-204'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-204">&#182;</a>
        </div>
        <p>mark neighbouring offsets</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">isNeighbour</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>

      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-205'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-205">&#182;</a>
        </div>
        <p>default case: go with the midpoint of the thing.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">intersects</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">getIntersect</span><span class="p">(</span><span class="nx">point</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="p">(</span><span class="nx">point</span><span class="p">.</span><span class="nx">w</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="p">(</span><span class="nx">point</span><span class="p">.</span><span class="nx">h</span><span class="o">/</span><span class="mi">2</span><span class="p">)));</span>

      <span class="k">return</span> <span class="nx">intersects</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>

      <span class="nx">check</span><span class="o">:</span> <span class="nx">check</span><span class="p">,</span>
      <span class="nx">checkGrid</span><span class="o">:</span> <span class="nx">checkGrid</span><span class="p">,</span>
      <span class="nx">checkSprites</span><span class="o">:</span> <span class="nx">checkSprites</span><span class="p">,</span>
      <span class="nx">xyToRowCol</span><span class="o">:</span> <span class="nx">xyToRowCol</span>

    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">fireTemplate</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
  <span class="nx">fireTemplate</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;&amp;bull;&#39;</span><span class="p">;</span>
  <span class="nx">fireTemplate</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;ship-gunfire&#39;</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">shipGunfireCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">ShipGunfire</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-206'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-206">&#182;</a>
        </div>
        <p>&ldquo;pew pew pew&rdquo; from the ship.
fires bi-directionally based on ship heading (up/down, left/right or diagonals.)
can kill bad guys and turrets.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">objectInterface</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nx">fireTemplate</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">active</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">dead</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">visible</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;shipGunfire&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">shipGunfireCounter</span><span class="o">++</span><span class="p">),</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
      <span class="nx">w</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
      <span class="nx">h</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span>
      <span class="nx">vX</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">vX</span><span class="p">,</span>
      <span class="nx">vY</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">vY</span><span class="p">,</span>
      <span class="nx">row</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">col</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastX</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastY</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastCollisionX</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastCollisionY</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastCollisionResult</span><span class="o">:</span> <span class="kc">null</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">nodeParent</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">frame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-207'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-207">&#182;</a>
        </div>
        <p>die when fire hits end of screen?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">function</span> <span class="nx">hide</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">nodeParent</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
      <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">show</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">nodeParent</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">hide</span><span class="p">();</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">frame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">location</span><span class="p">;</span>

      <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">lastX</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">lastY</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>

        <span class="nx">location</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">xyToRowCol</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>

        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">col</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">||</span> <span class="nx">location</span><span class="p">.</span><span class="nx">row</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">col</span><span class="p">;</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">row</span><span class="p">;</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfireMap</span><span class="p">.</span><span class="nx">registerLocation</span><span class="p">({</span>
            <span class="nx">object</span><span class="o">:</span> <span class="nx">objectInterface</span><span class="p">,</span>
            <span class="nx">id</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
            <span class="nx">col</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
            <span class="nx">row</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span>
          <span class="p">});</span>

        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveBy</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// TODO: labels for relative grid item values?</span>

      <span class="kd">var</span> <span class="nx">screen</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-208'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-208">&#182;</a>
        </div>
        <p>move and do collision check?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">x</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">width</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span> <span class="o">&gt;</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_width</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-209'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-209">&#182;</a>
        </div>
        <p>X-axis boundary check</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">die</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">y</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">&gt;</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">height</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span> <span class="o">&gt;</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_height</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-210'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-210">&#182;</a>
        </div>
        <p>Y-axis boundary check</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">die</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-211'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-211">&#182;</a>
        </div>
        <p>all good</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">moveTo</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

        <span class="nx">show</span><span class="p">();</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">ship</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">visibleGrid</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-212'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-212">&#182;</a>
        </div>
        <p>may be inactive, or died and awaiting cleanup</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-213'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-213">&#182;</a>
        </div>
        <p>increase frame count, move vX + vY</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">moveBy</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-214'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-214">&#182;</a>
        </div>
        <p>and do collision check?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">collisionCheck</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">fire</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hittable</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">collisionCheck</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-215'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-215">&#182;</a>
        </div>
        <p>did ship fire hit anything?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">intersects</span><span class="p">,</span> <span class="nx">item</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">hit</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">incrementPitch</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">audioPitch</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">mapObjectItem</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">passThrough</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lastCollisionX</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lastCollisionY</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">lastCollisionX</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">lastCollisionY</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-216'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-216">&#182;</a>
        </div>
        <p>check grid</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">intersects</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">checkGrid</span><span class="p">({</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
          <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
          <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span></pre></div>
      </td>
    </tr>
    <tr id='section-217'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-217">&#182;</a>
        </div>
        <p>TODO: includeNeighbours: true ?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="p">});</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">intersects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>

          <span class="nx">item</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span><span class="p">][</span><span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">col</span><span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">item</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">hittable</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">hittable</span><span class="p">())</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-218'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-218">&#182;</a>
        </div>
        <p>additional pixel-level collision check</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-219'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-219">&#182;</a>
        </div>
        <p>HACK (sorta): check current position, and (potentially) last two in-between coordinates
given bullet may &ldquo;skip&rdquo; walls or turret gunfire etc. otherwise
i.e., cover (almost) the full range of movement</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="nx">hit</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship-gunfire&#39;</span><span class="p">,</span>
                <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
              <span class="p">});</span>

              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-220'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-220">&#182;</a>
        </div>
        <p>move backwards a bit more and try again.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">hit</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship-gunfire&#39;</span><span class="p">,</span>
                  <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">),</span>
                  <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">),</span>
                  <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                  <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
                <span class="p">});</span>

              <span class="p">}</span>

              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-221'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-221">&#182;</a>
        </div>
        <p>move backwards a bit less and try again.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">hit</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship-gunfire&#39;</span><span class="p">,</span>
                  <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*</span> <span class="mf">0.25</span><span class="p">),</span>
                  <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*</span> <span class="mf">0.25</span><span class="p">),</span>
                  <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                  <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
                <span class="p">});</span>

              <span class="p">}</span>

              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-222'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-222">&#182;</a>
        </div>
        <p>move forwards just a bit and try again.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">hit</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship-gunfire&#39;</span><span class="p">,</span>
                  <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*</span> <span class="mf">0.25</span><span class="p">),</span>
                  <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*</span> <span class="mf">0.25</span><span class="p">),</span>
                  <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                  <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
                <span class="p">});</span>

              <span class="p">}</span>


            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-223'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-223">&#182;</a>
        </div>
        <p>console.log(&lsquo;no pixel-level check on item, assuming dead&rsquo;);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;no pixel check on item:&#39;</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span>

              <span class="nx">hit</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-224'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-224">&#182;</a>
        </div>
        <p>did we kill the thing?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="nx">item</span><span class="p">.</span><span class="nx">hit</span><span class="p">();</span>

              <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">incrementPitch</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
              <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-225'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-225">&#182;</a>
        </div>
        <p>kill the gunfire, too?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="nx">die</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-226'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-226">&#182;</a>
        </div>
        <p>stop on the first one?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="k">break</span><span class="p">;</span>

            <span class="p">}</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">item</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">item</span><span class="p">.</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-227'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-227">&#182;</a>
        </div>
        <p>probably a wall or something else.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;WARN: Wall or other un-handled grid item hit case.&#39;</span><span class="p">);</span>
            <span class="nx">die</span><span class="p">();</span>
            <span class="k">break</span><span class="p">;</span>

          <span class="p">}</span>

        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-228'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-228">&#182;</a>
        </div>
        <p>non-&ldquo;grid&rdquo; items: bad guys, turret gunfire, spaceballs</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-229'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-229">&#182;</a>
        </div>
        <p>check bad guys</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">hit</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyController</span><span class="p">.</span><span class="nx">collisionCheck</span><span class="p">();</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-230'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-230">&#182;</a>
        </div>
        <p>we hit something, so mark the pitch to increase, and die</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">item</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-231'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-231">&#182;</a>
        </div>
        <p>did the thing just die?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="nx">incrementPitch</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-232'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-232">&#182;</a>
        </div>
        <p>let gunfire pass through bad guys, per original game rules.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">passThrough</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>

        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-233'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-233">&#182;</a>
        </div>
        <p>check turret gunfire</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">mapObjectItem</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfireMap</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">mapObjectItem</span> <span class="o">&amp;&amp;</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">collisionCheck</span><span class="p">())</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-234'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-234">&#182;</a>
        </div>
        <p>turret gunfire trumps ship gunfire.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="k">if</span> <span class="p">(</span><span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">)</span> <span class="p">{</span>

              <span class="nx">hit</span> <span class="o">=</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship-gunfire&#39;</span><span class="p">,</span>
                <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
              <span class="p">});</span>

              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-235'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-235">&#182;</a>
        </div>
        <p>move backwards a bit more and try again.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">hit</span> <span class="o">=</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship-gunfire&#39;</span><span class="p">,</span>
                  <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*</span> <span class="mf">0.75</span><span class="p">),</span>
                  <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*</span> <span class="mf">0.75</span><span class="p">),</span>
                  <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                  <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
                <span class="p">});</span>

              <span class="p">}</span>

              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-236'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-236">&#182;</a>
        </div>
        <p>move backwards a bit more and try again.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">hit</span> <span class="o">=</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship-gunfire&#39;</span><span class="p">,</span>
                  <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">),</span>
                  <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">),</span>
                  <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                  <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
                <span class="p">});</span>

              <span class="p">}</span>

              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-237'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-237">&#182;</a>
        </div>
        <p>move backwards a bit less and try again.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">hit</span> <span class="o">=</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship-gunfire&#39;</span><span class="p">,</span>
                  <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*</span> <span class="mf">0.25</span><span class="p">),</span>
                  <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*</span> <span class="mf">0.25</span><span class="p">),</span>
                  <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                  <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
                <span class="p">});</span>

              <span class="p">}</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

              <span class="nx">hit</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

            <span class="p">}</span>

          <span class="p">}</span>

        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-238'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-238">&#182;</a>
        </div>
        <p>check spaceballs</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">mapObjectItem</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBallMap</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">mapObjectItem</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-239'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-239">&#182;</a>
        </div>
        <p>we have an object. do a collision check.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;spaceball found at &#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-240'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-240">&#182;</a>
        </div>
        <p>HACK: compare vs. ship object shape for collision. it&rsquo;s close enough.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">hit</span> <span class="o">=</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
              <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship&#39;</span><span class="p">,</span>
              <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">),</span>
              <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">),</span>
              <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
              <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
            <span class="p">});</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;result of collision check with spaceball&#39;</span><span class="p">,</span> <span class="nx">hit</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-241'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-241">&#182;</a>
        </div>
        <p>hit = mapObjectItem.hittable();</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="p">}</span>

        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">passThrough</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-242'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-242">&#182;</a>
        </div>
        <p>kill the gunfire, provided it wasn&rsquo;t a bad guy (which shots can kill and pass through)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">die</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">lastCollisionResult</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">hit</span><span class="o">:</span> <span class="nx">hit</span><span class="p">,</span>
          <span class="nx">incrementPitch</span><span class="o">:</span> <span class="nx">incrementPitch</span>
        <span class="p">}</span>

      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lastCollisionResult</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">die</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-243'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-243">&#182;</a>
        </div>
        <p>called when end of screen hit, or object hit</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="nx">reset</span><span class="p">();</span>
      <span class="nx">destruct</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">destruct</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-244'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-244">&#182;</a>
        </div>
        <p>remove from the dom, etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">hide</span><span class="p">();</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-245'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-245">&#182;</a>
        </div>
        <p>append to DOM
game.dom.world.appendChild(o);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-246'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-246">&#182;</a>
        </div>
        <p>hack/convenience: start right away?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">init</span><span class="p">();</span>

    <span class="nx">fire</span><span class="p">();</span>

    <span class="nx">objectInterface</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">collisionCheck</span><span class="o">:</span> <span class="nx">collisionCheck</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">die</span><span class="o">:</span> <span class="nx">die</span><span class="p">,</span>
      <span class="nx">hittable</span><span class="o">:</span> <span class="nx">hittable</span><span class="p">,</span>
      <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">objectInterface</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">bigExplosionTemplate</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
  <span class="nx">bigExplosionTemplate</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;big-explosion&#39;</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">BigExplosion</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-247'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-247">&#182;</a>
        </div>
        <p>a large boom.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">active</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">animationModulus</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">animationModulus</span><span class="p">,</span>
      <span class="nx">frame</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">frameCount</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
      <span class="nx">node</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">node</span><span class="p">,</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
      <span class="nx">w</span><span class="o">:</span> <span class="mi">96</span><span class="p">,</span>
      <span class="nx">h</span><span class="o">:</span> <span class="mi">80</span><span class="p">,</span>
      <span class="nx">vX</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">vX</span><span class="p">,</span>
      <span class="nx">vY</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">vY</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveBy</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">y</span><span class="p">;</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">applyFrame</span><span class="p">(</span><span class="nx">frame</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundPosition</span> <span class="o">=</span> <span class="s1">&#39;0px &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">frame</span> <span class="o">*</span> <span class="o">-</span><span class="nx">data</span><span class="p">.</span><span class="nx">h</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">counter</span><span class="o">++</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">!==</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">moveBy</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-248'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-248">&#182;</a>
        </div>
        <p>flick(e)r</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span> <span class="o">=</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.25</span> <span class="o">?</span> <span class="s1">&#39;visible&#39;</span> <span class="o">:</span> <span class="s1">&#39;hidden&#39;</span><span class="p">);</span>

        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">counter</span> <span class="o">%</span> <span class="nx">data</span><span class="p">.</span><span class="nx">animationModulus</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">frame</span> <span class="o">&gt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">frameCount</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-249'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-249">&#182;</a>
        </div>
        <p>apply background position</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">applyFrame</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">frame</span><span class="p">);</span>

          <span class="nx">data</span><span class="p">.</span><span class="nx">frame</span><span class="o">++</span><span class="p">;</span>

        <span class="p">}</span>

      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">destruct</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">o</span> <span class="o">=</span> <span class="nx">bigExplosionTemplate</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-250'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-250">&#182;</a>
        </div>
        <p>set initial position</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">node</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="nx">init</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">destruct</span><span class="o">:</span> <span class="nx">destruct</span><span class="p">,</span>
      <span class="nx">moveBy</span><span class="o">:</span> <span class="nx">moveBy</span><span class="p">,</span>
      <span class="nx">moveTo</span><span class="o">:</span> <span class="nx">moveTo</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">Ship</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">audio</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">explode</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">thrustStart</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">thrustLoop</span><span class="o">:</span> <span class="kc">null</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-251'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-251">&#182;</a>
        </div>
        <p>angle: 0,</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">accelMultiplier</span><span class="o">:</span> <span class="mf">0.015</span><span class="p">,</span>
      <span class="nx">almostZero</span><span class="o">:</span> <span class="mf">0.02</span><span class="p">,</span>
      <span class="nx">dead</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">dying</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">hidden</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">decelRate</span><span class="o">:</span> <span class="mf">0.8</span><span class="p">,</span>
      <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">w</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
      <span class="nx">h</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
      <span class="nx">lastX</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastY</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastCollisionX</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastCollisionY</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">vX</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">vxMax</span><span class="o">:</span> <span class="mf">0.25</span><span class="p">,</span>
      <span class="nx">vY</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">vyMax</span><span class="o">:</span> <span class="mf">0.25</span><span class="p">,</span>
      <span class="nx">row</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">col</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">thrusting</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">thrustDirection</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">up</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// the initial/default.</span>
        <span class="nx">down</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">left</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">right</span><span class="o">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="nx">firing</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">smartbombs</span><span class="o">:</span> <span class="nx">DEFAULT_SMARTBOMBS</span> <span class="c1">// by default, armed with these many...</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">shipGunfire</span><span class="o">:</span> <span class="p">[],</span>
      <span class="nx">explosion</span><span class="o">:</span> <span class="kc">null</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">css</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">thrust</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">up</span><span class="o">:</span> <span class="s1">&#39;thrust-up&#39;</span><span class="p">,</span>
        <span class="nx">right</span><span class="o">:</span> <span class="s1">&#39;thrust-right&#39;</span><span class="p">,</span>
        <span class="nx">down</span><span class="o">:</span> <span class="s1">&#39;thrust-down&#39;</span><span class="p">,</span>
        <span class="nx">left</span><span class="o">:</span> <span class="s1">&#39;thrust-left&#39;</span>
      <span class="p">},</span>
      <span class="nx">thrusting</span><span class="o">:</span> <span class="s1">&#39;thrusting&#39;</span><span class="p">,</span>
      <span class="nx">hidden</span><span class="o">:</span> <span class="s1">&#39;hidden&#39;</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">setPosition</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">;</span>

      <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>

      <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
      <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">stop</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-252'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-252">&#182;</a>
        </div>
        <p>kill movement and thrust, etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">endThrust</span><span class="p">();</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">addDirection</span><span class="p">(</span><span class="nx">direction</span><span class="p">,</span> <span class="nx">opposite</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-253'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-253">&#182;</a>
        </div>
        <p>adds one direction, optionally removing the other.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">thrustDirection</span><span class="p">[</span><span class="nx">direction</span><span class="p">])</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">thrustDirection</span><span class="p">[</span><span class="nx">direction</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">thrust</span><span class="p">[</span><span class="nx">direction</span><span class="p">]);</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">opposite</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">thrustDirection</span><span class="p">[</span><span class="nx">opposite</span><span class="p">])</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">thrustDirection</span><span class="p">[</span><span class="nx">opposite</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">thrust</span><span class="p">[</span><span class="nx">opposite</span><span class="p">]);</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">removeDirection</span><span class="p">(</span><span class="nx">direction</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-254'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-254">&#182;</a>
        </div>
        <p>removes one direction</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">thrustDirection</span><span class="p">[</span><span class="nx">direction</span><span class="p">])</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">thrustDirection</span><span class="p">[</span><span class="nx">direction</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">thrust</span><span class="p">[</span><span class="nx">direction</span><span class="p">]);</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">thrust</span><span class="p">(</span><span class="nx">xDirection</span><span class="p">,</span> <span class="nx">yDirection</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">thrusting</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-255'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-255">&#182;</a>
        </div>
        <p>initial start.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">thrusting</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">audio</span><span class="p">.</span><span class="nx">thrustStart</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
          <span class="nx">audio</span><span class="p">.</span><span class="nx">thrustLoop</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
        <span class="p">}</span>

      <span class="p">}</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">thrusting</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-256'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-256">&#182;</a>
        </div>
        <p>starts moving in a given direction.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">+=</span> <span class="nx">xDirection</span> <span class="o">*</span> <span class="nx">data</span><span class="p">.</span><span class="nx">accelMultiplier</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">GAME_SPEED</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">+=</span> <span class="nx">yDirection</span> <span class="o">*</span> <span class="nx">data</span><span class="p">.</span><span class="nx">accelMultiplier</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">GAME_SPEED</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-257'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-257">&#182;</a>
        </div>
        <p>change ship UI based on pending direction change</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">xDirection</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">addDirection</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">xDirection</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">addDirection</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">);</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="o">-</span><span class="nx">data</span><span class="p">.</span><span class="nx">vxMax</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

        <span class="nx">removeDirection</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">);</span>
        <span class="nx">removeDirection</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">);</span>

      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">yDirection</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">addDirection</span><span class="p">(</span><span class="s1">&#39;down&#39;</span><span class="p">,</span> <span class="s1">&#39;up&#39;</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">yDirection</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">addDirection</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">,</span> <span class="s1">&#39;down&#39;</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

        <span class="nx">removeDirection</span><span class="p">(</span><span class="s1">&#39;down&#39;</span><span class="p">);</span>
        <span class="nx">removeDirection</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">);</span>

      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-258'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-258">&#182;</a>
        </div>
        <p>enforce velocity limits</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vxMax</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="o">-</span><span class="nx">data</span><span class="p">.</span><span class="nx">vxMax</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">);</span>

      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vyMax</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="o">-</span><span class="nx">data</span><span class="p">.</span><span class="nx">vyMax</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span><span class="p">);</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">endThrust</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">thrusting</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">thrusting</span><span class="p">)</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">thrusting</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-259'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-259">&#182;</a>
        </div>
        <p>initial start.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">audio</span><span class="p">.</span><span class="nx">thrustStart</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
        <span class="nx">audio</span><span class="p">.</span><span class="nx">thrustLoop</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">isThrusting</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">thrusting</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">killGunFire</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfire</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>

        <span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfire</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">die</span><span class="p">();</span>

      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-260'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-260">&#182;</a>
        </div>
        <p>clean out the array, too.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfire</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animateGunFire</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-261'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-261">&#182;</a>
        </div>
        <p>this array should be empty / zero when no gunfire is active, since objects self-destruct.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
          <span class="nx">items</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfire</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-262'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-262">&#182;</a>
        </div>
        <p>console.log(&lsquo;animating &rsquo; + items.length + &lsquo; gunfire objects&rsquo;);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-263'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-263">&#182;</a>
        </div>
        <p>do yo' thang.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">animate</span><span class="p">();</span>
        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">startFire</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">firing</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">firing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">endFire</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">firing</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">firing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-264'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-264">&#182;</a>
        </div>
        <p>note: continue animating active elements, regardless of firing state.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">maybeFire</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-265'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-265">&#182;</a>
        </div>
        <p>is the fire key being pressed? fire if so.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">keyboardMonitor</span><span class="p">.</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;shift&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">keyboardMonitor</span><span class="p">.</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;ctrl&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">fire</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">fire</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">firing</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-266'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-266">&#182;</a>
        </div>
        <p>for alignment with ship sprite&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">xOffset</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">yOffset</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-267'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-267">&#182;</a>
        </div>
        <p>create two new fire objects, on opposite axes.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">xDir</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">thrustDirection</span><span class="p">.</span><span class="nx">left</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">thrustDirection</span><span class="p">.</span><span class="nx">right</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">));</span>
      <span class="kd">var</span> <span class="nx">yDir</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">thrustDirection</span><span class="p">.</span><span class="nx">up</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">thrustDirection</span><span class="p">.</span><span class="nx">down</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">));</span>

      <span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfire</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">ShipGunfire</span><span class="p">({</span>
        <span class="nx">vX</span><span class="o">:</span> <span class="nx">xDir</span><span class="p">,</span>
        <span class="nx">vY</span><span class="o">:</span> <span class="nx">yDir</span><span class="p">,</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">xOffset</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">yOffset</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-268'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-268">&#182;</a>
        </div>
        <p>TODO: Review w/h</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">w</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span>
        <span class="nx">h</span><span class="o">:</span> <span class="mi">8</span>
      <span class="p">}));</span></pre></div>
      </td>
    </tr>
    <tr id='section-269'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-269">&#182;</a>
        </div>
        <p>mirror gunfire</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfire</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">ShipGunfire</span><span class="p">({</span>
        <span class="nx">vX</span><span class="o">:</span> <span class="nx">xDir</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="nx">vY</span><span class="o">:</span> <span class="nx">yDir</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">xOffset</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">yOffset</span><span class="p">,</span>
        <span class="nx">w</span><span class="o">:</span> <span class="mi">8</span><span class="p">,</span>
        <span class="nx">h</span><span class="o">:</span> <span class="mi">8</span>
      <span class="p">}));</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">decelerate</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-270'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-270">&#182;</a>
        </div>
        <p>simulate the effects of friction.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">isDown</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">keyboardMonitor</span><span class="p">.</span><span class="nx">isDown</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">almostZero</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">decelRate</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-271'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-271">&#182;</a>
        </div>
        <p>opposite direction thrust case</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">decelRate</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;down&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">almostZero</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">decelRate</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;down&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">decelRate</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-272'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-272">&#182;</a>
        </div>
        <p>apply continued x/y velocities and move.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">keyboardMonitor</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">decelerate</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">k</span><span class="p">.</span><span class="nx">isDown</span><span class="p">(</span><span class="s1">&#39;down&#39;</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-273'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-273">&#182;</a>
        </div>
        <p>thrust if acceleration is needed</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">||</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">thrust</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">moveBy</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span><span class="p">);</span>

        <span class="nx">animateGunFire</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-274'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-274">&#182;</a>
        </div>
        <p>collision checks</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">gridCollisionCheck</span><span class="p">();</span>

        <span class="nx">gunfireCollisionCheck</span><span class="p">();</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyController</span><span class="p">.</span><span class="nx">collisionCheck</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">dying</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-275'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-275">&#182;</a>
        </div>
        <p>animate explosions?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">animateExplosion</span><span class="p">();</span>

        <span class="p">}</span>

      <span class="p">}</span>
    
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animateExplosion</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">inactive</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">explosion</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
        <span class="nx">inactive</span> <span class="o">+=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">explosion</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">animate</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">inactive</span> <span class="o">&gt;=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">explosion</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-276'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-276">&#182;</a>
        </div>
        <p>all objects have finished animating.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">explosion</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">explosion</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">destruct</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="nx">objects</span><span class="p">.</span><span class="nx">explosion</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-277'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-277">&#182;</a>
        </div>
        <p>ship is now dead.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

        <span class="nx">dieComplete</span><span class="p">();</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">collisionCheck</span><span class="p">(</span><span class="nx">point</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-278'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-278">&#182;</a>
        </div>
        <p>return true if ship intersects a given box with x/y/w/h.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">intersects</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">point</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
        <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
        <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="nx">intersects</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">gunfireCollisionCheck</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-279'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-279">&#182;</a>
        </div>
        <p>check ship fire for collision</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfire</span><span class="p">,</span>
          <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">result</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="kd">var</span> <span class="nx">hit</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">incrementPitch</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">toRemove</span> <span class="o">=</span> <span class="p">[];</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">result</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfire</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">collisionCheck</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-280'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-280">&#182;</a>
        </div>
        <p>if there was a hit, allow pitch to increase.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">incrementPitch</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">incrementPitch</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">hit</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-281'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-281">&#182;</a>
        </div>
        <p>is this now dead (or killed elsewhere, ie., hitting a bad guy), and needing clean-up?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="k">if</span> <span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfire</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">toRemove</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
          <span class="p">}</span>

        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-282'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-282">&#182;</a>
        </div>
        <p>TODO: sound should only be played when hitting blocks.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span> <span class="o">&amp;&amp;</span> <span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-283'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-283">&#182;</a>
        </div>
        <p>make noise.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">audioPitch</span> <span class="o">=</span> <span class="nx">getAudioPitch</span><span class="p">();</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">playPop</span><span class="p">(</span><span class="nx">audioPitch</span><span class="p">);</span>

          <span class="p">}</span>

        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">incrementPitch</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">incrementAudioPitch</span><span class="p">();</span>
        <span class="p">}</span>

      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-284'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-284">&#182;</a>
        </div>
        <p>remove dead items from the array</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">toRemove</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">toRemove</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfire</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">toRemove</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

   <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">gridCollisionCheck</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-285'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-285">&#182;</a>
        </div>
        <p>compares ship coords to grid, looks for collisions.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span>
          <span class="nx">intersects</span><span class="p">,</span>
          <span class="nx">item</span><span class="p">,</span>
          <span class="nx">hit</span><span class="p">,</span>
          <span class="nx">mapObjectItem</span><span class="p">,</span>
          <span class="nx">location</span><span class="p">,</span>
          <span class="nx">nextX</span><span class="p">,</span>
          <span class="nx">nextY</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lastCollisionX</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lastCollisionY</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-286'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-286">&#182;</a>
        </div>
        <p>refresh and update collision</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">data</span><span class="p">.</span><span class="nx">lastCollisionX</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">lastCollisionY</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

        <span class="nx">intersects</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">checkGrid</span><span class="p">({</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
          <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
          <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span>
          <span class="nx">includeNeighbours</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">});</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">intersects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>

          <span class="nx">item</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span><span class="p">][</span><span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">col</span><span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">hittable</span> <span class="o">&amp;&amp;</span> <span class="nx">item</span><span class="p">.</span><span class="nx">hittable</span><span class="p">())</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-287'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-287">&#182;</a>
        </div>
        <p>is this an active item? alive, not dead etc.?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-288'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-288">&#182;</a>
        </div>
        <p>additional pixel-level collision check?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="k">if</span> <span class="p">(</span><span class="nx">item</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-289'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-289">&#182;</a>
        </div>
        <p>HACK (sorta): check current position, and (potentially) last two in-between coordinates
given bullet may &ldquo;skip&rdquo; walls otherwise
i.e., cover (almost) the full range of movement</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">hit</span> <span class="o">=</span> <span class="nx">item</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship&#39;</span><span class="p">,</span>
                  <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                  <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                  <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                  <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
                <span class="p">});</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ship: pixel-level collision check with item&#39;</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span>
                  <span class="k">return</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">die</span><span class="p">();</span>
                <span class="p">}</span>

              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-290'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-290">&#182;</a>
        </div>
        <p>kill the ship?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ship collision: hittable grid item&#39;</span><span class="p">,</span> <span class="nx">item</span><span class="p">);</span>

                <span class="k">return</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">die</span><span class="p">();</span>

              <span class="p">}</span>

            <span class="p">}</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-291'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-291">&#182;</a>
        </div>
        <p>check moving grid items</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-292'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-292">&#182;</a>
        </div>
        <p>if (!intersects[i].isNeighbour) {</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-293'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-293">&#182;</a>
        </div>
        <p>look only at midpoint, exclude neighbours&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="nx">mapObjectItem</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfireMap</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span><span class="p">,</span> <span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">col</span><span class="p">);</span>

              <span class="k">if</span> <span class="p">(</span><span class="nx">mapObjectItem</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-294'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-294">&#182;</a>
        </div>
        <p>console.log(&lsquo;found turret gunfire&rsquo;, mapObjectItem);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-295'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-295">&#182;</a>
        </div>
        <p>additional pixel-level collision check</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="k">if</span> <span class="p">(</span><span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">)</span> <span class="p">{</span>

                  <span class="nx">hit</span> <span class="o">=</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship&#39;</span><span class="p">,</span>
                    <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                    <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                    <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                    <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
                  <span class="p">});</span>

                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-296'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-296">&#182;</a>
        </div>
        <p>we have an object. do a collision check.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                  <span class="nx">hit</span> <span class="o">=</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">collisionCheck</span><span class="p">();</span>

                <span class="p">}</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ship hit moving item&#39;</span><span class="p">,</span> <span class="nx">mapObjectItem</span><span class="p">);</span>
                  <span class="k">return</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">die</span><span class="p">();</span>
                <span class="p">}</span>

              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-297'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-297">&#182;</a>
        </div>
        <p>did we hit a spaceball?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">mapObjectItem</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBallMap</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span><span class="p">,</span> <span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">col</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">mapObjectItem</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-298'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-298">&#182;</a>
        </div>
        <p>console.log(&lsquo;found spaceball&rsquo;);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-299'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-299">&#182;</a>
        </div>
        <p>we have an object. do a collision check.
hit = mapObjectItem.hittable();</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                  <span class="nx">hit</span> <span class="o">=</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship&#39;</span><span class="p">,</span>
                    <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">),</span>
                    <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">),</span>
                    <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                    <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
                  <span class="p">});</span>

                  <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;spaceball hit ship&#39;</span><span class="p">);</span>
                    <span class="k">return</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">die</span><span class="p">();</span>
                  <span class="p">}</span>

                <span class="p">}</span>

              <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-300'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-300">&#182;</a>
        </div>
        <p>}</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="p">}</span>

        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-301'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-301">&#182;</a>
        </div>
        <p>ship not moving, but check other items for intersects (and smashy smashy)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">intersects</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">checkGrid</span><span class="p">({</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
          <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
          <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span>
          <span class="nx">includeNeighbours</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">});</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">intersects</span> <span class="o">&amp;&amp;</span> <span class="nx">intersects</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>

          <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">intersects</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-302'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-302">&#182;</a>
        </div>
        <p>whether moving or not &ndash; did we hit turret gunfire?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>            <span class="nx">mapObjectItem</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfireMap</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span><span class="p">,</span> <span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">col</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="nx">mapObjectItem</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-303'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-303">&#182;</a>
        </div>
        <p>console.log(&lsquo;found turret gunfire&rsquo;, mapObjectItem);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-304'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-304">&#182;</a>
        </div>
        <p>additional pixel-level collision check</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="k">if</span> <span class="p">(</span><span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">)</span> <span class="p">{</span>

                <span class="nx">hit</span> <span class="o">=</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                  <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship&#39;</span><span class="p">,</span>
                  <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                  <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                  <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                  <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
                <span class="p">});</span>

              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-305'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-305">&#182;</a>
        </div>
        <p>we have an object. do a collision check.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">hit</span> <span class="o">=</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">collisionCheck</span><span class="p">();</span>

              <span class="p">}</span>

              <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ship hit turret gunfire&#39;</span><span class="p">);</span>
                <span class="k">return</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">die</span><span class="p">();</span>
              <span class="p">}</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-306'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-306">&#182;</a>
        </div>
        <p>don&rsquo;t check neighbouring locations, in this case&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">isNeighbour</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-307'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-307">&#182;</a>
        </div>
        <p>did we hit a spaceball?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                <span class="nx">mapObjectItem</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBallMap</span><span class="p">.</span><span class="nx">check</span><span class="p">(</span><span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span><span class="p">,</span> <span class="nx">intersects</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">col</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">mapObjectItem</span><span class="p">)</span> <span class="p">{</span>

                  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;found spaceball&#39;</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-308'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-308">&#182;</a>
        </div>
        <p>we have an object. do a collision check.
hit = mapObjectItem.hittable();</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>                  <span class="nx">hit</span> <span class="o">=</span> <span class="nx">mapObjectItem</span><span class="p">.</span><span class="nx">pixelCollisionCheck</span><span class="p">({</span>
                    <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;ship&#39;</span><span class="p">,</span>
                    <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">),</span>
                    <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">),</span>
                    <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
                    <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
                  <span class="p">});</span>

                  <span class="k">if</span> <span class="p">(</span><span class="nx">hit</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">die</span><span class="p">();</span>
                  <span class="p">}</span>

                <span class="p">}</span>

              <span class="p">}</span>

            <span class="p">}</span>

          <span class="p">}</span>

        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveBy</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// TODO: Rename to be relative column distances or something</span>

      <span class="kd">var</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">col</span><span class="p">,</span>
          <span class="nx">w</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">,</span>
          <span class="nx">h</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">,</span>
          <span class="nx">targetX</span><span class="p">,</span>
          <span class="nx">targetY</span><span class="p">;</span>

      <span class="nx">col</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_cols</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">+</span> <span class="nx">x</span><span class="p">));</span>
      <span class="nx">row</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_rows</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">+</span> <span class="nx">y</span><span class="p">));</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">col</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">||</span> <span class="nx">row</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-309'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-309">&#182;</a>
        </div>
        <p>broadcast event?        </p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">=</span> <span class="nx">col</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">=</span> <span class="nx">row</span><span class="p">;</span>

      <span class="p">}</span>

      <span class="nx">targetX</span> <span class="o">=</span> <span class="p">(</span><span class="nx">w</span> <span class="o">*</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">w</span> <span class="o">*</span> <span class="p">(</span><span class="nx">x</span><span class="o">/</span><span class="nx">w</span><span class="p">));</span>
      <span class="nx">targetY</span> <span class="o">=</span> <span class="p">(</span><span class="nx">h</span> <span class="o">*</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">h</span> <span class="o">*</span> <span class="p">(</span><span class="nx">y</span><span class="o">/</span><span class="nx">h</span><span class="p">));</span></pre></div>
      </td>
    </tr>
    <tr id='section-310'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-310">&#182;</a>
        </div>
        <p>limit ship x/y to world dimensions</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">targetX</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_width</span><span class="p">,</span> <span class="nx">targetX</span><span class="p">));</span>
      <span class="nx">targetY</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_height</span><span class="p">,</span> <span class="nx">targetY</span><span class="p">));</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">targetX</span><span class="p">,</span> <span class="nx">targetY</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">deltaX</span><span class="p">,</span> <span class="nx">deltaY</span><span class="p">,</span>
          <span class="nx">screenW</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span>
          <span class="nx">screenH</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">height</span><span class="p">,</span>
          <span class="nx">screenX</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
          <span class="nx">screenXAbs</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">screenX</span><span class="p">),</span>
          <span class="nx">screenY</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
          <span class="nx">screenYAbs</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">screenY</span><span class="p">),</span>
          <span class="nx">screenWMid</span> <span class="o">=</span> <span class="nx">screenW</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
          <span class="nx">screenHMid</span> <span class="o">=</span> <span class="nx">screenH</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
          <span class="nx">screenWThird</span> <span class="o">=</span> <span class="nx">screenW</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span>
          <span class="nx">screenWQuarter</span> <span class="o">=</span> <span class="nx">screenW</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span>
          <span class="nx">screenWFifteen</span> <span class="o">=</span> <span class="nx">screenW</span><span class="o">*</span><span class="mf">0.15</span><span class="p">,</span>
          <span class="nx">screenHThird</span> <span class="o">=</span> <span class="nx">screenH</span><span class="o">/</span><span class="mi">3</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">vX</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">vY</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span><span class="p">;</span>

      <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>

      <span class="nx">deltaX</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
      <span class="nx">deltaY</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">lastX</span> <span class="o">===</span> <span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lastY</span> <span class="o">===</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">lastX</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">lastY</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>

      <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
      <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-311'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-311">&#182;</a>
        </div>
        <p>console.log(deltaX, screenXAbs, screenW, screenWThird);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-312'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-312">&#182;</a>
        </div>
        <p>are we near the screen boundary?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">deltaX</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="p">(</span><span class="nx">screenXAbs</span> <span class="o">+</span> <span class="nx">screenW</span> <span class="o">-</span> <span class="nx">screenWThird</span><span class="p">))</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-313'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-313">&#182;</a>
        </div>
        <p>moving right</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">moveBy</span><span class="p">(</span><span class="nx">vX</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">deltaX</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nx">screenXAbs</span> <span class="o">+</span> <span class="nx">screenWThird</span><span class="p">))</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-314'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-314">&#182;</a>
        </div>
        <p>moving left</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">moveBy</span><span class="p">(</span><span class="nx">vX</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">deltaY</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">&gt;</span> <span class="p">(</span><span class="nx">screenYAbs</span> <span class="o">+</span> <span class="nx">screenH</span> <span class="o">-</span> <span class="nx">screenHThird</span><span class="p">))</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-315'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-315">&#182;</a>
        </div>
        <p>moving down</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">moveBy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">vY</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">deltaY</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nx">screenYAbs</span> <span class="o">+</span> <span class="nx">screenHThird</span><span class="p">))</span> <span class="p">{</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">moveBy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">vY</span><span class="p">);</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hide</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">hidden</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">hidden</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">hidden</span><span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">show</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">hidden</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">hidden</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">hidden</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">hidden</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span> <span class="mi">10</span><span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">isAlive</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">die</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-316'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-316">&#182;</a>
        </div>
        <p>already underway or done.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span>
          <span class="nx">x</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
          <span class="nx">y</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
          <span class="nx">directions</span> <span class="o">=</span> <span class="p">[</span>
           <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
           <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
           <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
           <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
           <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
           <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
           <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
           <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> 
          <span class="p">];</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">audio</span><span class="p">.</span><span class="nx">explode</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="nx">hide</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-317'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-317">&#182;</a>
        </div>
        <p>gunfire should die at this point, too</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">killGunFire</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-318'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-318">&#182;</a>
        </div>
        <p>create explosion object (if needed), position here and go boom.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">objects</span><span class="p">.</span><span class="nx">explosion</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">objects</span><span class="p">.</span><span class="nx">explosion</span> <span class="o">=</span> <span class="p">[];</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">directions</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">explosion</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">BigExplosion</span><span class="p">({</span>
            <span class="nx">animationModulus</span><span class="o">:</span> <span class="mi">6</span><span class="p">,</span>
            <span class="nx">node</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">,</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">x</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">y</span><span class="p">,</span>
            <span class="nx">vX</span><span class="o">:</span> <span class="nx">directions</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">vY</span><span class="o">:</span> <span class="nx">directions</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
          <span class="p">}));</span>
        <span class="p">}</span>

      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-319'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-319">&#182;</a>
        </div>
        <p>next animation loop will pick up from here.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">dieComplete</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-320'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-320">&#182;</a>
        </div>
        <p>minus one man. next screen, game over, etc.?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">isGameOver</span><span class="p">;</span>

      <span class="nx">isGameOver</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">shipDied</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isGameOver</span><span class="p">)</span> <span class="p">{</span>

        <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">findSafeRespawnLocation</span><span class="p">();</span>
          <span class="nx">reset</span><span class="p">();</span>
        <span class="p">},</span> <span class="mi">500</span><span class="p">);</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">findSafeRespawnLocation</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-321'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-321">&#182;</a>
        </div>
        <p>based on existing row/col, find nearby dead wall space (or open space) to occupy.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">col</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">),</span>
          <span class="nx">row</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">),</span>
          <span class="nx">freeSpace</span><span class="p">,</span>
          <span class="nx">object</span><span class="p">;</span>

      <span class="nx">freeSpace</span> <span class="o">=</span> <span class="nx">findFreeSpace</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-322'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-322">&#182;</a>
        </div>
        <p>hack: directly assign ship row/col, so they are picked up when moveBy() is later applied.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">=</span> <span class="nx">freeSpace</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">=</span> <span class="nx">freeSpace</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span></pre></div>
      </td>
    </tr>
    <tr id='section-323'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-323">&#182;</a>
        </div>
        <p>prevent ship driving</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">keyboardMonitor</span><span class="p">.</span><span class="nx">releaseAll</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-324'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-324">&#182;</a>
        </div>
        <p>also, stop any velocity that may be applied.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-325'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-325">&#182;</a>
        </div>
        <p>hide();</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">),</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">));</span></pre></div>
      </td>
    </tr>
    <tr id='section-326'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-326">&#182;</a>
        </div>
        <p>show();</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">setDefaultPosition</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-327'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-327">&#182;</a>
        </div>
        <p>center relative to screen midsection?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">w</span><span class="p">,</span> <span class="nx">h</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">col</span><span class="p">;</span>

      <span class="nx">w</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
      <span class="nx">h</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">coords</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>

      <span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">w</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">);</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">h</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-328'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-328">&#182;</a>
        </div>
        <p>HACK</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">x</span> <span class="o">=</span> <span class="mi">32</span> <span class="o">*</span> <span class="nx">DEFAULT_HOME_COL</span><span class="p">;</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="mi">32</span> <span class="o">*</span> <span class="nx">DEFAULT_HOME_ROW</span><span class="p">;</span>

      <span class="nx">col</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="o">/</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">);</span>
      <span class="nx">row</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">y</span><span class="o">/</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">);</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">=</span> <span class="nx">col</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">=</span> <span class="nx">row</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-329'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-329">&#182;</a>
        </div>
        <p>round x/y now to nearest row/col</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">x</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">;</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">;</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">);</span>

      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">centerAtPoint</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="nx">show</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getNode</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">initSound</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">audio</span><span class="p">.</span><span class="nx">thrustStart</span> <span class="o">=</span> <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
          <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ship-thrust-start&#39;</span><span class="p">,</span>
          <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/ship-thrust-start.mp3&#39;</span><span class="p">,</span>
          <span class="nx">autoLoad</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">});</span>

        <span class="nx">audio</span><span class="p">.</span><span class="nx">thrustLoop</span> <span class="o">=</span> <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
          <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ship-thrust-loop&#39;</span><span class="p">,</span>
          <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/ship-thrust-loop.mp3&#39;</span><span class="p">,</span>
          <span class="nx">loops</span><span class="o">:</span> <span class="mi">999</span><span class="p">,</span>
          <span class="nx">autoLoad</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">});</span>

        <span class="nx">audio</span><span class="p">.</span><span class="nx">explode</span> <span class="o">=</span> <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
          <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;ship-explode&#39;</span><span class="p">,</span>
          <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/ship-explode.mp3&#39;</span><span class="p">,</span>
          <span class="nx">autoLoad</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">});</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">o</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
      <span class="nx">o</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;ship&#39;</span><span class="p">;</span>

      <span class="nx">hide</span><span class="p">();</span>

      <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">worldFragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

      <span class="nx">show</span><span class="p">();</span>

      <span class="nx">initSound</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>

      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">collisionCheck</span><span class="o">:</span> <span class="nx">collisionCheck</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">decelerate</span><span class="o">:</span> <span class="nx">decelerate</span><span class="p">,</span>
      <span class="nx">die</span><span class="o">:</span> <span class="nx">die</span><span class="p">,</span>
      <span class="nx">isAlive</span><span class="o">:</span> <span class="nx">isAlive</span><span class="p">,</span>
      <span class="nx">fire</span><span class="o">:</span> <span class="nx">fire</span><span class="p">,</span>
      <span class="nx">endFire</span><span class="o">:</span> <span class="nx">endFire</span><span class="p">,</span>
      <span class="nx">maybeFire</span><span class="o">:</span> <span class="nx">maybeFire</span><span class="p">,</span>
      <span class="nx">objects</span><span class="o">:</span> <span class="nx">objects</span><span class="p">,</span>
      <span class="nx">startFire</span><span class="o">:</span> <span class="nx">startFire</span><span class="p">,</span>
      <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span><span class="p">,</span>
      <span class="nx">isThrusting</span><span class="o">:</span> <span class="nx">isThrusting</span><span class="p">,</span>
      <span class="nx">endThrust</span><span class="o">:</span> <span class="nx">endThrust</span><span class="p">,</span>
      <span class="nx">moveBy</span><span class="o">:</span> <span class="nx">moveBy</span><span class="p">,</span>
      <span class="nx">moveTo</span><span class="o">:</span> <span class="nx">moveTo</span><span class="p">,</span>
      <span class="nx">getNode</span><span class="o">:</span> <span class="nx">getNode</span><span class="p">,</span>
      <span class="nx">reset</span><span class="o">:</span> <span class="nx">reset</span><span class="p">,</span>
      <span class="nx">stop</span><span class="o">:</span> <span class="nx">stop</span><span class="p">,</span>
      <span class="nx">thrust</span><span class="o">:</span> <span class="nx">thrust</span><span class="p">,</span>
      <span class="nx">setDefaultPosition</span><span class="o">:</span> <span class="nx">setDefaultPosition</span><span class="p">,</span>
      <span class="nx">findSafeRespawnLocation</span><span class="o">:</span> <span class="nx">findSafeRespawnLocation</span>

    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">BaseWall</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-330'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-330">&#182;</a>
        </div>
        <p>a component of a &ldquo;base&rdquo;
consisting of walls and turrets</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">frameCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">css</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">exploding</span><span class="o">:</span> <span class="s1">&#39;exploding&#39;</span><span class="p">,</span>
      <span class="nx">exploded</span><span class="o">:</span> <span class="s1">&#39;exploded&#39;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">col</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
      <span class="nx">row</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">col</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">row</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">,</span>
      <span class="nx">w</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
      <span class="nx">h</span><span class="o">:</span> <span class="mi">32</span><span class="p">,</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
      <span class="nx">subType</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">subType</span><span class="p">,</span>
      <span class="nx">exploding</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">exploded</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">explosionFrame</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">explosionFrames</span><span class="o">:</span> <span class="mi">6</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">explode</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">exploding</span><span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">explodeComplete</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">exploded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-331'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-331">&#182;</a>
        </div>
        <p>utils.css.swap(o, css.exploding, css.exploded);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">exploding</span><span class="p">);</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">exploded</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">destruct</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploded</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">frameCount</span><span class="o">++</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-332'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-332">&#182;</a>
        </div>
        <p>if (frameCount % 2 === 0) {</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundPosition</span> <span class="o">=</span> <span class="s1">&#39;0px &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span> <span class="o">*</span> <span class="o">-</span><span class="mi">32</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span><span class="o">++</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span> <span class="o">&gt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrames</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-333'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-333">&#182;</a>
        </div>
        <p>}</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getNode</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">pixelCollisionCheck</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">hit</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">collision</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">wallType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">subType</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">);</span>
      <span class="nx">wallType</span> <span class="o">=</span> <span class="nx">wallType</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/wall\-type\-[234]/i</span><span class="p">,</span> <span class="s1">&#39;wall-type-generic&#39;</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-334'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-334">&#182;</a>
        </div>
        <p>console.log(&lsquo;comparing &rsquo; + oOptions.type + &lsquo; &lt;&ndash;&gt; &rsquo; + wallType);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">hit</span> <span class="o">=</span> <span class="nx">collision</span><span class="p">.</span><span class="nx">checkSprites</span><span class="p">({</span>
         <span class="nx">object1</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">,</span>
         <span class="nx">object2</span><span class="o">:</span> <span class="p">{</span>
           <span class="nx">type</span><span class="o">:</span> <span class="nx">wallType</span><span class="p">,</span>
           <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
           <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
           <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
           <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
         <span class="p">}</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="nx">hit</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hit</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-335'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-335">&#182;</a>
        </div>
        <p>walls absorb gunfire, do nothing.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;wall hit, doing nothing&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hittable</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-336'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-336">&#182;</a>
        </div>
        <p>considered hittable until exploded.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">return</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploded</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">restore</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploded</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">exploded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">init</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">destruct</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">o</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">o</span> <span class="o">=</span> <span class="nx">makeGridItem</span><span class="p">({</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span>
          <span class="nx">type</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
          <span class="nx">subType</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">subType</span>
        <span class="p">});</span>

      <span class="p">}</span>

      <span class="nx">dom</span><span class="p">.</span><span class="nx">worldFragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="nx">init</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-337'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-337">&#182;</a>
        </div>
        <p>die: die,</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">explode</span><span class="o">:</span> <span class="nx">explode</span><span class="p">,</span>
      <span class="nx">explodeComplete</span><span class="o">:</span> <span class="nx">explodeComplete</span><span class="p">,</span>
      <span class="nx">hit</span><span class="o">:</span> <span class="nx">hit</span><span class="p">,</span>
      <span class="nx">hittable</span><span class="o">:</span> <span class="nx">hittable</span><span class="p">,</span>
      <span class="nx">pixelCollisionCheck</span><span class="o">:</span> <span class="nx">pixelCollisionCheck</span><span class="p">,</span>
      <span class="nx">restore</span><span class="o">:</span> <span class="nx">restore</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">ObjectMap</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-338'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-338">&#182;</a>
        </div>
        <p>2D array tracking references to game objects
for quick lookup (for collision purposes)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="p">[];</span></pre></div>
      </td>
    </tr>
    <tr id='section-339'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-339">&#182;</a>
        </div>
        <p>hash which tracks last row/col</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">lastLocation</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="kd">function</span> <span class="nx">check</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">col</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-340'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-340">&#182;</a>
        </div>
        <p>a dead-simple lookup.
TODO: consider safety check.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-341'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-341">&#182;</a>
        </div>
        <p>first, round down to ensure we have an integer.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">row</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>
      <span class="nx">col</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">col</span><span class="p">);</span>

      <span class="k">return</span> <span class="k">typeof</span> <span class="nx">map</span><span class="p">[</span><span class="nx">row</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">map</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">?</span> <span class="nx">map</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">registerLocation</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-342'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-342">&#182;</a>
        </div>
        <p>register an object as being at x,y</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-343'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-343">&#182;</a>
        </div>
        <p>{ object, row, col }</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">object</span><span class="p">,</span>
          <span class="nx">id</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
          <span class="nx">col</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
          <span class="nx">row</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">row</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">id</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;registerLocation: id required.&#39;</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-344'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-344">&#182;</a>
        </div>
        <p>first, see if this object is already somewhere else, and remove it if so</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">clearLocation</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-345'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-345">&#182;</a>
        </div>
        <p>register new location (TODO: if row/col ranges are valid?)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-346'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-346">&#182;</a>
        </div>
        <p>console.log(&lsquo;registering &rsquo; + col + &lsquo;, &rsquo; + row);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">map</span><span class="p">[</span><span class="nx">row</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">map</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;registerLocation(): row/col &#39;</span> <span class="o">+</span> <span class="nx">row</span> <span class="o">+</span> <span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nx">col</span> <span class="o">+</span> <span class="s1">&#39; is invalid?&#39;</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">map</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">]</span> <span class="o">=</span> <span class="nx">o</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-347'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-347">&#182;</a>
        </div>
        <p>and for future removal&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">lastLocation</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">row</span><span class="o">:</span> <span class="nx">row</span><span class="p">,</span>
        <span class="nx">col</span><span class="o">:</span> <span class="nx">col</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">clearLocation</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-348'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-348">&#182;</a>
        </div>
        <p>given an object ID, remove its registered location in the map.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">previous</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">lastLocation</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">previous</span> <span class="o">=</span> <span class="nx">lastLocation</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">map</span><span class="p">[</span><span class="nx">previous</span><span class="p">.</span><span class="nx">row</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">map</span><span class="p">[</span><span class="nx">previous</span><span class="p">.</span><span class="nx">row</span><span class="p">][</span><span class="nx">previous</span><span class="p">.</span><span class="nx">col</span><span class="p">])</span> <span class="p">{</span>
          <span class="nx">map</span><span class="p">[</span><span class="nx">previous</span><span class="p">.</span><span class="nx">row</span><span class="p">][</span><span class="nx">previous</span><span class="p">.</span><span class="nx">col</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">delete</span> <span class="nx">lastLocation</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-349'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-349">&#182;</a>
        </div>
        <p>just re-init empty array</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">init</span><span class="p">();</span>

    <span class="p">}</span>    

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">l</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_rows</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">map</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">k</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">l</span><span class="o">=</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_cols</span><span class="p">;</span> <span class="nx">k</span><span class="o">&lt;</span><span class="nx">l</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">map</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-350'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-350">&#182;</a>
        </div>
        <p>console.log(&lsquo;ObjectMap.init(): made map of &rsquo; + map.length + &lsquo; x &rsquo; + map[0].length);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="p">}</span>

    <span class="nx">init</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">{</span>

      <span class="nx">check</span><span class="o">:</span> <span class="nx">check</span><span class="p">,</span>
      <span class="nx">registerLocation</span><span class="o">:</span> <span class="nx">registerLocation</span><span class="p">,</span>
      <span class="nx">clearLocation</span><span class="o">:</span> <span class="nx">clearLocation</span><span class="p">,</span>
      <span class="nx">map</span><span class="o">:</span> <span class="nx">map</span><span class="p">,</span>
      <span class="nx">reset</span><span class="o">:</span> <span class="nx">reset</span>

    <span class="p">};</span>

  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">turretGunfireTemplate</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">turretGunfireTemplates</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">up</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">down</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">left</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">right</span><span class="o">:</span> <span class="kc">null</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">turretGunfireCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">TurretGunfire</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-351'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-351">&#182;</a>
        </div>
        <p>append to turret container element, relative to it.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">objectInterface</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">directionsMap</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">&#39;left&#39;</span><span class="o">:</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">,</span>
      <span class="s1">&#39;right&#39;</span><span class="o">:</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">,</span>
      <span class="s1">&#39;up&#39;</span><span class="o">:</span> <span class="s1">&#39;vertical&#39;</span><span class="p">,</span>
      <span class="s1">&#39;down&#39;</span><span class="o">:</span> <span class="s1">&#39;vertical&#39;</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">nodeParent</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-352'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-352">&#182;</a>
        </div>
        <p>note use of worldFragment vs. parent (turret) node, testing performance</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">active</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">dead</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;turretGunfire&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">turretGunfireCounter</span><span class="o">++</span><span class="p">),</span>
      <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;turret-gunfire&#39;</span><span class="p">,</span>
      <span class="nx">subType</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">direction</span><span class="p">,</span>
      <span class="nx">visible</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
      <span class="nx">w</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
      <span class="nx">h</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span>
      <span class="nx">turretX</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">turretX</span><span class="p">,</span>
      <span class="nx">turretY</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">turretY</span><span class="p">,</span>
      <span class="nx">xDirection</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">vX</span><span class="p">,</span>
      <span class="nx">yDirection</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">vY</span><span class="p">,</span>
      <span class="nx">vX</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="o">/</span><span class="mi">10</span> <span class="o">*</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">vX</span><span class="p">,</span>
      <span class="nx">vY</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="o">/</span><span class="mi">10</span> <span class="o">*</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">vY</span><span class="p">,</span>
      <span class="nx">row</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span>
      <span class="nx">col</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
      <span class="nx">endRow</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">endCol</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastRow</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastCol</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastX</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastY</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastCollisionX</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastCollisionY</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">lastCollisionResult</span><span class="o">:</span> <span class="kc">null</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">frame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">hide</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">o</span> <span class="o">&amp;&amp;</span> <span class="nx">nodeParent</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">nodeParent</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">show</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">o</span> <span class="o">&amp;&amp;</span> <span class="nx">nodeParent</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">nodeParent</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">hide</span><span class="p">();</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">frame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">location</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>

      <span class="nx">location</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">.</span><span class="nx">xyToRowCol</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">turretX</span> <span class="o">+</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">turretY</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-353'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-353">&#182;</a>
        </div>
        <p>note position is relative to body, not parent turret node.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">isInView</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span> <span class="nx">location</span><span class="p">.</span><span class="nx">row</span><span class="p">))</span> <span class="p">{</span>

          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">turretX</span> <span class="o">+</span> <span class="nx">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">turretY</span> <span class="o">+</span> <span class="nx">y</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

          <span class="nx">show</span><span class="p">();</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

          <span class="nx">hide</span><span class="p">();</span>

        <span class="p">}</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">lastX</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">lastY</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>

      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">col</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lastCol</span> <span class="o">||</span> <span class="nx">location</span><span class="p">.</span><span class="nx">row</span> <span class="o">!==</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lastRow</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">col</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">row</span><span class="p">;</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfireMap</span><span class="p">.</span><span class="nx">registerLocation</span><span class="p">({</span>
          <span class="nx">object</span><span class="o">:</span> <span class="nx">objectInterface</span><span class="p">,</span>
          <span class="nx">id</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span>
          <span class="nx">col</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
          <span class="nx">row</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span>
        <span class="p">});</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">moveBy</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// TODO: labels for relative grid item values?</span></pre></div>
      </td>
    </tr>
    <tr id='section-354'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-354">&#182;</a>
        </div>
        <p>move and do collision check?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">data</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">speedMultiplier</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">GAME_SPEED</span><span class="p">);</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vY</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">speedMultiplier</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">GAME_SPEED</span><span class="p">);</span>

      <span class="nx">moveTo</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">screen</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">visibleGrid</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-355'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-355">&#182;</a>
        </div>
        <p>may be inactive, or died and awaiting cleanup</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">show</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-356'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-356">&#182;</a>
        </div>
        <p>increase frame count, move vX + vY</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">moveBy</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">vX</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">vY</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-357'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-357">&#182;</a>
        </div>
        <p>and do collision check?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">collisionCheck</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-358'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-358">&#182;</a>
        </div>
        <p>should this shot &ldquo;expire&rdquo;?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">expireCheck</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">expireCheck</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-359'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-359">&#182;</a>
        </div>
        <p>stop if it&rsquo;s about to hit a grid space occupied by a block (even if the block is dead.)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">shouldExpire</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">xDirection</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">shouldExpire</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">&gt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">endCol</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">xDirection</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">shouldExpire</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span> <span class="o">&lt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">endCol</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">yDirection</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">shouldExpire</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">&gt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">endRow</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">yDirection</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">shouldExpire</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span> <span class="o">&lt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">endRow</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">shouldExpire</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">reset</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">fire</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">findDestinationBlock</span><span class="p">();</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">collisionCheck</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-360'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-360">&#182;</a>
        </div>
        <p>if this object is being referenced, we already know there&rsquo;s a potential collision.
so just return the active state.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">return</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">visible</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">pixelCollisionCheck</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">hit</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">collision</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">;</span>

      <span class="nx">hit</span> <span class="o">=</span> <span class="nx">collision</span><span class="p">.</span><span class="nx">checkSprites</span><span class="p">({</span>
         <span class="nx">object1</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">,</span>
         <span class="nx">object2</span><span class="o">:</span> <span class="p">{</span>
           <span class="nx">type</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s1">&#39;-&#39;</span> <span class="o">+</span> <span class="nx">directionsMap</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">subType</span><span class="p">],</span>
           <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">turretX</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
           <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">turretY</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
           <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
           <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
         <span class="p">}</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="p">(</span><span class="nx">hit</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">visible</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">findDestinationBlock</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-361'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-361">&#182;</a>
        </div>
        <p>based on start x/y and direction, figure out where the shot should end (before hitting a block.)
reference: data.endRow, data.endCol</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">endCol</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">endRow</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-362'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-362">&#182;</a>
        </div>
        <p>this has already been done.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">col</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
          <span class="nx">row</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">;</span>

      <span class="k">do</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-363'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-363">&#182;</a>
        </div>
        <p>find the next occupied grid item.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">col</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">xDirection</span><span class="p">;</span>
        <span class="nx">row</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">yDirection</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">row</span><span class="p">][</span><span class="nx">col</span><span class="p">]</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">col</span> <span class="o">&amp;&amp;</span> <span class="nx">row</span> <span class="o">&amp;&amp;</span> <span class="nx">col</span> <span class="o">&lt;</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_cols</span> <span class="o">&amp;&amp;</span> <span class="nx">row</span> <span class="o">&lt;</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_rows</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-364'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-364">&#182;</a>
        </div>
        <p>if heading down or right, subtract one to prevent target overlap.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">xDirection</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">col</span><span class="o">--</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">yDirection</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">row</span><span class="o">--</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-365'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-365">&#182;</a>
        </div>
        <p>console.log(&lsquo;direction x/y, &rsquo; + data.xDirection + &lsquo;, &rsquo; + data.yDirection + &lsquo;, start / end: &rsquo;, data.col + &lsquo;, &rsquo; + data.row + &lsquo;, end: &rsquo; + col + &lsquo;, &rsquo; + row);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">data</span><span class="p">.</span><span class="nx">endRow</span> <span class="o">=</span> <span class="nx">row</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">endCol</span> <span class="o">=</span> <span class="nx">col</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">restore</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="nx">init</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">die</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-366'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-366">&#182;</a>
        </div>
        <p>called when end of screen hit, or object hit (or turret dies)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">reset</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">destruct</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-367'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-367">&#182;</a>
        </div>
        <p>remove from the dom, etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">hide</span><span class="p">();</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>


      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">turretGunfireTemplates</span><span class="p">[</span><span class="nx">oOptions</span><span class="p">.</span><span class="nx">direction</span><span class="p">])</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-368'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-368">&#182;</a>
        </div>
        <p>make one, then clone for future re-use.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">o</span> <span class="o">=</span> <span class="nx">turretGunfireTemplate</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;turret-gunfire &#39;</span> <span class="o">+</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">direction</span><span class="p">;</span>
          <span class="nx">turretGunfireTemplates</span><span class="p">[</span><span class="nx">oOptions</span><span class="p">.</span><span class="nx">direction</span><span class="p">]</span> <span class="o">=</span> <span class="nx">o</span><span class="p">;</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

          <span class="nx">o</span> <span class="o">=</span> <span class="nx">turretGunfireTemplates</span><span class="p">[</span><span class="nx">oOptions</span><span class="p">.</span><span class="nx">direction</span><span class="p">].</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

        <span class="p">}</span>

      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-369'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-369">&#182;</a>
        </div>
        <p>append to DOM
parentNode.appendChild(o);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-370'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-370">&#182;</a>
        </div>
        <p>hack/convenience: start right away?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">init</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-371'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-371">&#182;</a>
        </div>
        <p>fire();</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">objectInterface</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">collisionCheck</span><span class="o">:</span> <span class="nx">collisionCheck</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">die</span><span class="o">:</span> <span class="nx">die</span><span class="p">,</span>
      <span class="nx">fire</span><span class="o">:</span> <span class="nx">fire</span><span class="p">,</span>
      <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span><span class="p">,</span>
      <span class="nx">pixelCollisionCheck</span><span class="o">:</span> <span class="nx">pixelCollisionCheck</span><span class="p">,</span>
      <span class="nx">reset</span><span class="o">:</span> <span class="nx">reset</span><span class="p">,</span>
      <span class="nx">restore</span><span class="o">:</span> <span class="nx">restore</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">objectInterface</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">Turret</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-372'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-372">&#182;</a>
        </div>
        <p>a component of a &ldquo;base&rdquo;
creates a TurretGunfire() instance</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">frameCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">css</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">exploding</span><span class="o">:</span> <span class="s1">&#39;exploding&#39;</span><span class="p">,</span>
      <span class="nx">exploded</span><span class="o">:</span> <span class="s1">&#39;exploded&#39;</span><span class="p">,</span>
      <span class="nx">dead</span><span class="o">:</span> <span class="s1">&#39;dead&#39;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">turretGunfire</span><span class="o">:</span> <span class="kc">null</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">directions</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">x</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;left&#39;</span><span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;right&#39;</span><span class="o">:</span> <span class="mi">1</span>
      <span class="p">},</span>
      <span class="nx">y</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;up&#39;</span><span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
        <span class="s1">&#39;down&#39;</span><span class="o">:</span> <span class="mi">1</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">directionsMap</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">&#39;left&#39;</span><span class="o">:</span> <span class="s1">&#39;vertical&#39;</span><span class="p">,</span>
      <span class="s1">&#39;right&#39;</span><span class="o">:</span> <span class="s1">&#39;vertical&#39;</span><span class="p">,</span>
      <span class="s1">&#39;up&#39;</span><span class="o">:</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">,</span>
      <span class="s1">&#39;down&#39;</span><span class="o">:</span> <span class="s1">&#39;horizontal&#39;</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">_direction</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">subType</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">];</span> <span class="c1">// hack-ish :D</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">col</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
      <span class="nx">row</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span>
      <span class="nx">direction</span><span class="o">:</span> <span class="nx">_direction</span><span class="p">,</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">col</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">row</span> <span class="o">*</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">,</span>
      <span class="nx">w</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">,</span>
      <span class="nx">h</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">,</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
      <span class="nx">subType</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">subType</span><span class="p">,</span>
      <span class="nx">wallType</span><span class="o">:</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="c1">// for pixel map references when dead</span>
      <span class="nx">wallDirection</span><span class="o">:</span> <span class="nx">directionsMap</span><span class="p">[</span><span class="nx">_direction</span><span class="p">],</span>
      <span class="nx">points</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span>
      <span class="nx">dead</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span></pre></div>
      </td>
    </tr>
    <tr id='section-373'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-373">&#182;</a>
        </div>
        <p>firing: false,</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">exploding</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">baseExploding</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">exploded</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">explosionFrame</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">explosionFrames</span><span class="o">:</span> <span class="mi">6</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">getNode</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>
    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-374'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-374">&#182;</a>
        </div>
        <p>events.gameLoop?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-375'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-375">&#182;</a>
        </div>
        <p>called from main game loop
fire and animate</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfire</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfire</span><span class="p">.</span><span class="nx">animate</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">frameCount</span><span class="o">++</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-376'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-376">&#182;</a>
        </div>
        <p>if (frameCount % 2 === 0) {</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-377'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-377">&#182;</a>
        </div>
        <p>individual turret + base destruction animation</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundPosition</span> <span class="o">=</span> <span class="s1">&#39;0px &#39;</span> <span class="o">+</span> <span class="p">(</span><span class="o">-</span><span class="mi">32</span> <span class="o">*</span> <span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

          <span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span><span class="o">++</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span> <span class="o">&gt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrames</span><span class="p">)</span> <span class="p">{</span>

            <span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">baseExploding</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-378'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-378">&#182;</a>
        </div>
        <p>end the animation.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>              <span class="nx">explodeComplete</span><span class="p">();</span>

            <span class="p">}</span>

          <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-379'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-379">&#182;</a>
        </div>
        <p>}</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">maybeFire</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-380'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-380">&#182;</a>
        </div>
        <p>give &lsquo;er</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">&amp;&amp;</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfire</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfire</span><span class="p">.</span><span class="nx">fire</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">createTurretGunfire</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfire</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfire</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TurretGunfire</span><span class="p">({</span>
        <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">w</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">,</span>
        <span class="nx">h</span><span class="o">:</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">,</span>
        <span class="nx">turretX</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
        <span class="nx">turretY</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
        <span class="nx">col</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
        <span class="nx">row</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span>
        <span class="nx">vX</span><span class="o">:</span> <span class="nx">directions</span><span class="p">.</span><span class="nx">x</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">direction</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">vY</span><span class="o">:</span> <span class="nx">directions</span><span class="p">.</span><span class="nx">y</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">direction</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">direction</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">direction</span><span class="p">,</span>
        <span class="nx">node</span><span class="o">:</span> <span class="nx">o</span>
      <span class="p">});</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">pixelCollisionCheck</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-381'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-381">&#182;</a>
        </div>
        <p>hack: while alive, count all pixels as hittable and always return true.
only do pixel check when dead, and shown as a wall.
console.log('Turret pixelCollisionCheck: turret alive, force-returning true&rsquo;);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">hit</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">collision</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-382'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-382">&#182;</a>
        </div>
        <p>HACK: Note use of -type-generic-, slightly inaccurate when on -type-1 turrets that have become walls.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">wallType</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">wallType</span> <span class="o">+</span> <span class="s1">&#39;-type-generic-&#39;</span><span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">wallDirection</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">);</span>

      <span class="nx">hit</span> <span class="o">=</span> <span class="nx">collision</span><span class="p">.</span><span class="nx">checkSprites</span><span class="p">({</span>
         <span class="nx">object1</span><span class="o">:</span> <span class="nx">oOptions</span><span class="p">,</span>
         <span class="nx">object2</span><span class="o">:</span> <span class="p">{</span>
           <span class="nx">type</span><span class="o">:</span> <span class="nx">wallType</span><span class="p">,</span>
           <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
           <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
           <span class="nx">w</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">w</span><span class="p">,</span>
           <span class="nx">h</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">h</span>
         <span class="p">}</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="nx">hit</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hit</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-383'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-383">&#182;</a>
        </div>
        <p>boom.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">die</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">die</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

      <span class="nx">explode</span><span class="p">();</span>

      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">addPoints</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">points</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-384'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-384">&#182;</a>
        </div>
        <p>make noise.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">incrementAudioPitch</span><span class="p">();</span>
        <span class="nx">soundSprites</span><span class="p">.</span><span class="nx">playBoom</span><span class="p">(</span><span class="nx">audioBoomScale</span><span class="p">[</span><span class="nx">getAudioPitch</span><span class="p">()]);</span>
      <span class="p">}</span>

      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">statsController</span><span class="p">.</span><span class="nx">record</span><span class="p">(</span><span class="s1">&#39;turret&#39;</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-385'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-385">&#182;</a>
        </div>
        <p>don&rsquo;t let gunfire respawn?
objects.turretGunfire.data.dead = true;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">dieComplete</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">dead</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">baseExploding</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-386'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-386">&#182;</a>
        </div>
        <p>allow again, i.e., for base explosion.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">data</span><span class="p">.</span><span class="nx">exploded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-387'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-387">&#182;</a>
        </div>
        <p>data.active = false;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">explode</span><span class="p">(</span><span class="nx">isBaseExplosion</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">isBaseExplosion</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">baseExploding</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploded</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">dead</span><span class="p">);</span> <span class="c1">// hack to allow bgposition to work again</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">exploding</span><span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">explodeComplete</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">exploded</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-388'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-388">&#182;</a>
        </div>
        <p>utils.css.swap(o, css.exploding, css.exploded);</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">exploding</span><span class="p">);</span>

        <span class="nx">dieComplete</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">baseExploding</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">stopGunfire</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-389'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-389">&#182;</a>
        </div>
        <p>and self-destruct.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">exploded</span><span class="p">);</span>
          <span class="nx">destruct</span><span class="p">();</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-390'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-390">&#182;</a>
        </div>
        <p>only the turret is dead.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">stopGunfire</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfire</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfire</span><span class="p">.</span><span class="nx">die</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">hittable</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-391'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-391">&#182;</a>
        </div>
        <p>considered hittable until exploded.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">return</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploded</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">restore</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-392'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-392">&#182;</a>
        </div>
        <p>reset and re-init</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-393'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-393">&#182;</a>
        </div>
        <p>additional hack: reset bgpos, let CSS take over</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundPosition</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">dead</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploded</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">exploded</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span> <span class="nx">css</span><span class="p">.</span><span class="nx">exploded</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">baseExploding</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">explosionFrame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="nx">init</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">destruct</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">o</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">o</span> <span class="o">=</span> <span class="nx">makeGridItem</span><span class="p">({</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">,</span>
          <span class="nx">type</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
          <span class="nx">subType</span><span class="o">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">subType</span>
        <span class="p">});</span>

      <span class="p">}</span>

      <span class="nx">createTurretGunfire</span><span class="p">();</span>

      <span class="nx">dom</span><span class="p">.</span><span class="nx">worldFragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="nx">init</span><span class="p">();</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">die</span><span class="o">:</span> <span class="nx">die</span><span class="p">,</span>
      <span class="nx">destruct</span><span class="o">:</span> <span class="nx">destruct</span><span class="p">,</span>
      <span class="nx">explode</span><span class="o">:</span> <span class="nx">explode</span><span class="p">,</span>
      <span class="nx">explodeComplete</span><span class="o">:</span> <span class="nx">explodeComplete</span><span class="p">,</span>
      <span class="nx">hit</span><span class="o">:</span> <span class="nx">hit</span><span class="p">,</span>
      <span class="nx">hittable</span><span class="o">:</span> <span class="nx">hittable</span><span class="p">,</span>
      <span class="nx">maybeFire</span><span class="o">:</span> <span class="nx">maybeFire</span><span class="p">,</span>
      <span class="nx">objects</span><span class="o">:</span> <span class="nx">objects</span><span class="p">,</span>
      <span class="nx">pixelCollisionCheck</span><span class="o">:</span> <span class="nx">pixelCollisionCheck</span><span class="p">,</span>
      <span class="nx">restore</span><span class="o">:</span> <span class="nx">restore</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">Base</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-394'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-394">&#182;</a>
        </div>
        <p>an object made up of walls and turrets
explodes once all turrets have been destroyed</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">walls</span><span class="o">:</span> <span class="p">[],</span>
      <span class="nx">turrets</span><span class="o">:</span> <span class="p">[]</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">active</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">dead</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">deadTurretCount</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">frame</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">dying</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">points</span><span class="o">:</span> <span class="mi">10000</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">css</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">wall</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">base</span><span class="o">:</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span>
        <span class="nx">up</span><span class="o">:</span> <span class="s1">&#39;wall-up&#39;</span><span class="p">,</span>
        <span class="nx">down</span><span class="o">:</span> <span class="s1">&#39;wall-down&#39;</span><span class="p">,</span>
        <span class="nx">left</span><span class="o">:</span> <span class="s1">&#39;wall-left&#39;</span><span class="p">,</span>
        <span class="nx">right</span><span class="o">:</span> <span class="s1">&#39;wall-right&#39;</span>
      <span class="p">},</span>

      <span class="nx">turret</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">base</span><span class="o">:</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span>
        <span class="nx">up</span><span class="o">:</span> <span class="s1">&#39;turret-up&#39;</span><span class="p">,</span>
        <span class="nx">down</span><span class="o">:</span> <span class="s1">&#39;turret-down&#39;</span><span class="p">,</span>
        <span class="nx">left</span><span class="o">:</span> <span class="s1">&#39;turret-left&#39;</span><span class="p">,</span>
        <span class="nx">right</span><span class="o">:</span> <span class="s1">&#39;turret-right&#39;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">typeToConstructor</span> <span class="o">=</span> <span class="p">{</span>
      <span class="s1">&#39;wall&#39;</span><span class="o">:</span> <span class="nx">BaseWall</span><span class="p">,</span>
      <span class="s1">&#39;turret&#39;</span><span class="o">:</span> <span class="nx">Turret</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">typeToArray</span> <span class="o">=</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-395'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-395">&#182;</a>
        </div>
        <p>for storing in objects array</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;wall&#39;</span><span class="o">:</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">walls</span><span class="p">,</span>
      <span class="s1">&#39;turret&#39;</span><span class="o">:</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">addItem</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-396'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-396">&#182;</a>
        </div>
        <p>{type, subType, col, row}</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">itemType</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span>
          <span class="nx">itemArray</span> <span class="o">=</span> <span class="nx">typeToArray</span><span class="p">[</span><span class="nx">itemType</span><span class="p">],</span> <span class="c1">// eg. &#39;wall&#39; -&gt; objects.walls[]</span>
          <span class="nx">TargetClass</span> <span class="o">=</span> <span class="nx">typeToConstructor</span><span class="p">[</span><span class="nx">itemType</span><span class="p">],</span>
          <span class="nx">baseItemObject</span><span class="p">;</span>

      <span class="nx">baseItemObject</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TargetClass</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">);</span>
      <span class="nx">itemArray</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">baseItemObject</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-397'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-397">&#182;</a>
        </div>
        <p>mark as active, since an item was registered</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

      <span class="k">return</span> <span class="nx">baseItemObject</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">||</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dying</span><span class="p">))</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-398'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-398">&#182;</a>
        </div>
        <p>nothing to do.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-399'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-399">&#182;</a>
        </div>
        <p>animate turret gunfire, OR explosion / death sequence?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">dying</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-400'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-400">&#182;</a>
        </div>
        <p>reset&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">data</span><span class="p">.</span><span class="nx">deadTurretCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">animate</span><span class="p">();</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">deadTurretCount</span> <span class="o">+=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">dieCheck</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-401'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-401">&#182;</a>
        </div>
        <p>base dying/explosion sequence</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">animate</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">walls</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">walls</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">animate</span><span class="p">();</span>
        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-402'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-402">&#182;</a>
        </div>
        <p>flash screen colors, too, once explosion is active (hack)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="k">if</span> <span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">walls</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">exploding</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">frame</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="s1">&#39;#660000&#39;</span> <span class="o">:</span> <span class="s1">&#39;transparent&#39;</span><span class="p">);</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">frame</span><span class="o">++</span><span class="p">;</span>

        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">pulse</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-403'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-403">&#182;</a>
        </div>
        <p>maybe fire</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">maybeFire</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">dieComplete</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">explodeComplete</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">walls</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">walls</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">explodeComplete</span><span class="p">();</span>
        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-404'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-404">&#182;</a>
        </div>
        <p>ensure the world background resets</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">&#39;transparent&#39;</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-405'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-405">&#182;</a>
        </div>
        <p>notify the controller, perhaps finish the level etc</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">baseController</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">baseDied</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">dieExplosion</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-406'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-406">&#182;</a>
        </div>
        <p>mark all elements as dying, begin exploding animation</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">explode</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">walls</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">walls</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">explode</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">die</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">features</span><span class="p">.</span><span class="nx">audio</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">soundManager</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s1">&#39;base-explode&#39;</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">addPoints</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">points</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-407'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-407">&#182;</a>
        </div>
        <p>increase ship lives, smartbombs etc. as a reward</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">lives</span> <span class="o">+=</span> <span class="mi">3</span><span class="p">;</span>
      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">smartbombs</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">refreshUI</span><span class="p">();</span>

      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">statsController</span><span class="p">.</span><span class="nx">record</span><span class="p">(</span><span class="s1">&#39;base&#39;</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-408'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-408">&#182;</a>
        </div>
        <ul>
<li>BOOM *</li>
</ul>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">dieExplosion</span><span class="p">,</span> <span class="mi">950</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-409'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-409">&#182;</a>
        </div>
        <p>&hellip; and disappear.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">dieComplete</span><span class="p">,</span> <span class="mi">2500</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">dieCheck</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-410'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-410">&#182;</a>
        </div>
        <p>if all turrets shot, then BOOM</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dying</span> <span class="o">||</span> <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">deadTurretCount</span> <span class="o">&gt;=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-411'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-411">&#182;</a>
        </div>
        <p>boom!</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">die</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-412'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-412">&#182;</a>
        </div>
        <p>bring the base back to life, per se</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">data</span><span class="p">.</span><span class="nx">deadTurretCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">addItem</span><span class="o">:</span> <span class="nx">addItem</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">objects</span><span class="o">:</span> <span class="nx">objects</span><span class="p">,</span>
      <span class="nx">pulse</span><span class="o">:</span> <span class="nx">pulse</span><span class="p">,</span>
      <span class="nx">reset</span><span class="o">:</span> <span class="nx">reset</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">baseController</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">BaseController</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-413'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-413">&#182;</a>
        </div>
        <p>all your Base() are belong to BaseController().
enumerates bases, updates and so forth.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-414'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-414">&#182;</a>
        </div>
        <p>BASE TYPES
UTF8 box-drawing reference: http://en.wikipedia.org/wiki/Box-drawing_characters</p>

<p>â â â¬ â
â â â â
â â â¼ â¤
â â â´ â</p>

<p>â â â¦ â
â   â â
â  â â¬ â£
â â â© â</p>

<p>â â â³ â
â â â â
â£ â â â«
â â â» â</p>

<p>â â â¥ â
â â â â
â â â« â¢
â â â¨ â</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">baseItemMap</span> <span class="o">=</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-415'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-415">&#182;</a>
        </div>
        <p>type 1</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-1&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;upRight&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-1&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;rightDown&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-1&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;downRight&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-1&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;downLeft&#39;</span><span class="p">],</span>
      <span class="s1">&#39;-&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-1&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">],</span> <span class="c1">// regular dash - used here to avoid conflict</span>
      <span class="s1">&#39;|&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-1&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;vertical&#39;</span><span class="p">],</span> <span class="c1">// regular pipe character</span>
      <span class="s1">&#39;â´&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-1&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;up&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-1&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â¬&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-1&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;down&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â¤&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-1&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">],</span></pre></div>
      </td>
    </tr>
    <tr id='section-416'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-416">&#182;</a>
        </div>
        <p>type 2</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-2&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;upRight&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-2&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;rightDown&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-2&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;downRight&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-2&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;downLeft&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-2&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-2&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;vertical&#39;</span><span class="p">],</span> <span class="c1">// not sure why â conflicted with type 4, but eh.</span>
      <span class="s1">&#39;â©&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-2&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;up&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â &#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-2&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â¦&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-2&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;down&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â£&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-2&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">],</span></pre></div>
      </td>
    </tr>
    <tr id='section-417'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-417">&#182;</a>
        </div>
        <p>type 3</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-3&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;upRight&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-3&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;rightDown&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-3&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;downRight&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-3&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;downLeft&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-3&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-3&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;vertical&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â»&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-3&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;up&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â£&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-3&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â³&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-3&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;down&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â«&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-3&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">],</span></pre></div>
      </td>
    </tr>
    <tr id='section-418'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-418">&#182;</a>
        </div>
        <p>type 4</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-4&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;upRight&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-4&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;rightDown&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-4&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;downRight&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-4&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;downLeft&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-4&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;horizontal&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-4&#39;</span><span class="p">,</span> <span class="s1">&#39;wall&#39;</span><span class="p">,</span> <span class="s1">&#39;vertical&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â¨&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-4&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;up&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-4&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â¥&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-4&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;down&#39;</span><span class="p">],</span>
      <span class="s1">&#39;â¢&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;type-4&#39;</span><span class="p">,</span> <span class="s1">&#39;turret&#39;</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">]</span>

    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">objects</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">bases</span><span class="o">:</span> <span class="p">[],</span>
      <span class="nx">basesHash</span><span class="o">:</span> <span class="p">{}</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">activeBaseCount</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">deadBaseCount</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-419'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-419">&#182;</a>
        </div>
        <p>events.loop? animate()?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">animate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">bases</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">bases</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">animate</span><span class="p">();</span>
        <span class="p">}</span>

      <span class="p">},</span>

      <span class="nx">baseDied</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-420'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-420">&#182;</a>
        </div>
        <p>callback for a base explosion.
if all basese are dead, end the level.
otherwise, advance the pulse stage.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">data</span><span class="p">.</span><span class="nx">deadBaseCount</span><span class="o">++</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">deadBaseCount</span> <span class="o">&gt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">activeBaseCount</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-421'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-421">&#182;</a>
        </div>
        <p>end the level.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">levelEndSequence</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-422'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-422">&#182;</a>
        </div>
        <p>make the world faster, etc.?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">nextPulseStage</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-423'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-423">&#182;</a>
        </div>
        <p>and resume (seems redundant)
TODO: Remove this.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">startTimer</span><span class="p">();</span>

        <span class="p">}</span>

      <span class="p">},</span>

      <span class="nx">pulse</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">bases</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">objects</span><span class="p">.</span><span class="nx">bases</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">pulse</span><span class="p">();</span>
        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">createBase</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-424'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-424">&#182;</a>
        </div>
        <p>NOTE: Only one instance of each base type allowed.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">newBase</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Base</span><span class="p">(</span><span class="nx">type</span><span class="p">);</span>
      <span class="nx">objects</span><span class="p">.</span><span class="nx">bases</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newBase</span><span class="p">);</span>
      <span class="nx">objects</span><span class="p">.</span><span class="nx">basesHash</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="o">=</span> <span class="nx">newBase</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">createBases</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">createBase</span><span class="p">(</span><span class="s1">&#39;type-1&#39;</span><span class="p">);</span>
      <span class="nx">createBase</span><span class="p">(</span><span class="s1">&#39;type-2&#39;</span><span class="p">);</span>
      <span class="nx">createBase</span><span class="p">(</span><span class="s1">&#39;type-3&#39;</span><span class="p">);</span>
      <span class="nx">createBase</span><span class="p">(</span><span class="s1">&#39;type-4&#39;</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">addBaseItem</span><span class="p">(</span><span class="kr">char</span><span class="p">,</span> <span class="nx">col</span><span class="p">,</span> <span class="nx">row</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-425'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-425">&#182;</a>
        </div>
        <p>given a map character, create and add a wall or turret on the proper base object.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">baseObject</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">itemData</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">baseType</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">baseItemObject</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-426'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-426">&#182;</a>
        </div>
        <p>sanity check</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">baseItemMap</span><span class="p">[</span><span class="kr">char</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;addBaseItem(&#39;</span><span class="o">+</span><span class="kr">char</span><span class="o">+</span><span class="s1">&#39;): Illegal map character.&#39;</span><span class="p">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">itemData</span> <span class="o">=</span> <span class="nx">baseItemMap</span><span class="p">[</span><span class="kr">char</span><span class="p">];</span></pre></div>
      </td>
    </tr>
    <tr id='section-427'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-427">&#182;</a>
        </div>
        <p>we now know what base style, type and &ldquo;direction&rdquo; of object we&rsquo;re dealing with.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">baseType</span> <span class="o">=</span> <span class="nx">itemData</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span></pre></div>
      </td>
    </tr>
    <tr id='section-428'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-428">&#182;</a>
        </div>
        <p>console.log(&lsquo;adding base item for character &ldquo;&rsquo; + char + &lsquo;&rdquo; at row &rsquo; + row + &lsquo;, col &rsquo; + col + &lsquo;: &rsquo; + itemData.join(&lsquo;, &rsquo;));</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-429'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-429">&#182;</a>
        </div>
        <p>add one wall or turret to a base object.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">baseItemObject</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">basesHash</span><span class="p">[</span><span class="nx">baseType</span><span class="p">].</span><span class="nx">addItem</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="nx">itemData</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nx">subType</span><span class="o">:</span> <span class="nx">baseType</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">itemData</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="c1">// eg. type-0 wall downRight</span>
        <span class="nx">col</span><span class="o">:</span> <span class="nx">col</span><span class="p">,</span>
        <span class="nx">row</span><span class="o">:</span> <span class="nx">row</span>
      <span class="p">});</span>

      <span class="k">return</span> <span class="nx">baseItemObject</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">isBaseItem</span><span class="p">(</span><span class="kr">char</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-430'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-430">&#182;</a>
        </div>
        <p>is this a base map character?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">return</span> <span class="p">(</span><span class="kr">char</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">baseItemMap</span><span class="p">[</span><span class="kr">char</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">findActiveBases</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-431'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-431">&#182;</a>
        </div>
        <p>after parsing map, find out which bases are actually &ldquo;in use.&rdquo;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">activeBaseCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">bases</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">bases</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">data</span><span class="p">.</span><span class="nx">activeBaseCount</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-432'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-432">&#182;</a>
        </div>
        <p>revert all bases, etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">data</span><span class="p">.</span><span class="nx">deadBaseCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">objects</span><span class="p">.</span><span class="nx">bases</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">bases</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">reset</span><span class="p">();</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">createBases</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">events</span><span class="o">:</span> <span class="nx">events</span><span class="p">,</span>
      <span class="nx">findActiveBases</span><span class="o">:</span> <span class="nx">findActiveBases</span><span class="p">,</span>
      <span class="nx">isBaseItem</span><span class="o">:</span> <span class="nx">isBaseItem</span><span class="p">,</span>
      <span class="nx">addBaseItem</span><span class="o">:</span> <span class="nx">addBaseItem</span><span class="p">,</span>
      <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span><span class="p">,</span>
      <span class="nx">objects</span><span class="o">:</span> <span class="nx">objects</span><span class="p">,</span>
      <span class="nx">reset</span><span class="o">:</span> <span class="nx">reset</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">FocusMonitor</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-433'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-433">&#182;</a>
        </div>
        <p>watches window blur/focus, pauses/resumes the game etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">focus</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">resume</span><span class="p">();</span>

      <span class="p">},</span>

      <span class="nx">blur</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">objects</span><span class="p">.</span><span class="nx">keyboardMonitor</span><span class="p">.</span><span class="nx">releaseAll</span><span class="p">();</span>
        <span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">addEvents</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-434'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-434">&#182;</a>
        </div>
        <p>release keys, mute audio and pause game on window blur</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="nx">isIE</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">utils</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span> <span class="s1">&#39;focusin&#39;</span><span class="p">,</span> <span class="nx">events</span><span class="p">.</span><span class="nx">focus</span><span class="p">);</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span> <span class="s1">&#39;focusout&#39;</span><span class="p">,</span> <span class="nx">events</span><span class="p">.</span><span class="nx">blur</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

        <span class="nx">utils</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s1">&#39;focus&#39;</span><span class="p">,</span> <span class="nx">events</span><span class="p">.</span><span class="nx">focus</span><span class="p">);</span>
        <span class="nx">utils</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s1">&#39;blur&#39;</span><span class="p">,</span> <span class="nx">events</span><span class="p">.</span><span class="nx">blur</span><span class="p">);</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">addEvents</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>

      <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span>

    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">GameController</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">score</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">lives</span><span class="o">:</span> <span class="nx">DEFAULT_LIVES</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">dom</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">lives</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">points</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">smartbombs</span><span class="o">:</span> <span class="kc">null</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getScore</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">score</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">addPoints</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">score</span> <span class="o">+=</span> <span class="nx">points</span><span class="p">;</span>
      <span class="nx">updatePoints</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">updatePoints</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">dom</span><span class="p">.</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">points</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">score</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">resetScore</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">score</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">updatePoints</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">shipDied</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">o</span><span class="p">,</span>
          <span class="nx">oStats</span><span class="p">,</span>
          <span class="nx">oStatsBody</span><span class="p">,</span>
          <span class="nx">statsData</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">isGameOver</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">lives</span><span class="o">--</span><span class="p">;</span>

      <span class="nx">updateLives</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">lives</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-435'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-435">&#182;</a>
        </div>
        <p>game over man, game over!</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">o</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;game-over-screen&#39;</span><span class="p">),</span>
        <span class="nx">oStats</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;game-over-stats&#39;</span><span class="p">),</span>
        <span class="nx">oStatsBody</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
        <span class="nx">statsData</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">statsController</span><span class="p">.</span><span class="nx">getStats</span><span class="p">();</span>

        <span class="nx">isGameOver</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

        <span class="nx">oStats</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="p">[</span>
          <span class="s1">&#39;&lt;br&gt;&#39;</span><span class="p">,</span>
          <span class="s1">&#39;&lt;p&gt;Your score: &#39;</span> <span class="o">+</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">getScore</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; points&lt;/p&gt;&#39;</span><span class="p">,</span>
          <span class="s1">&#39;&lt;br&gt;&#39;</span><span class="p">,</span>
          <span class="s1">&#39;&lt;p&gt;Destruction report:&lt;/p&gt;&#39;</span><span class="p">,</span>
          <span class="s1">&#39;&lt;div class=&quot;fixed&quot;&gt;&lt;div class=&quot;icon type-2 block&quot;&gt;&lt;/div&gt; Blocks: &#39;</span> <span class="o">+</span> <span class="nx">statsData</span><span class="p">.</span><span class="nx">block</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">,</span>
          <span class="s1">&#39;&lt;div class=&quot;fixed&quot;&gt;&lt;div class=&quot;icon type-1 turret right&quot;&gt;&lt;/div&gt; Turrets: &#39;</span> <span class="o">+</span> <span class="nx">statsData</span><span class="p">.</span><span class="nx">turret</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">,</span>
          <span class="s1">&#39;&lt;div class=&quot;fixed&quot;&gt;&lt;div class=&quot;icon type-1 wall rightDown&quot;&gt;&lt;/div&gt; Bases: &#39;</span> <span class="o">+</span> <span class="nx">statsData</span><span class="p">.</span><span class="nx">base</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span><span class="p">,</span>
          <span class="s1">&#39;&lt;div class=&quot;fixed bad-guy smiley&quot;&gt;&lt;div class=&quot;icon&quot;&gt;&lt;/div&gt; Bad guys: &#39;</span> <span class="o">+</span> <span class="nx">statsData</span><span class="p">.</span><span class="nx">badGuy</span> <span class="o">+</span> <span class="s1">&#39;&lt;/div&gt;&#39;</span>
        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
        
        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-436'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-436">&#182;</a>
        </div>
        <p>position</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">oStatsBody</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginTop</span> <span class="o">=</span> <span class="o">-</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">oStats</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-437'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-437">&#182;</a>
        </div>
        <p>objects.gameLoop.pause();</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nb">document</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-438'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-438">&#182;</a>
        </div>
        <p>game reset? title screen?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nb">document</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

          <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-439'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-439">&#182;</a>
        </div>
        <p>reset the whole (entire) game</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>          <span class="nx">survivor</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

          <span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">resume</span><span class="p">();</span>

        <span class="p">}</span>
        
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">isGameOver</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">updateLives</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">dom</span><span class="p">.</span><span class="nx">lives</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">lives</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">lives</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">updateSmartbombs</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">dom</span><span class="p">.</span><span class="nx">smartbombs</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">smartbombs</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">smartbombs</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-440'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-440">&#182;</a>
        </div>
        <p>assign defaults to data like lives, smartbombs etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">smartbombs</span> <span class="o">=</span> <span class="nx">DEFAULT_SMARTBOMBS</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">score</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">lives</span> <span class="o">=</span> <span class="nx">DEFAULT_LIVES</span><span class="p">;</span>

      <span class="nx">refreshUI</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">refreshUI</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">updateLives</span><span class="p">();</span>
      <span class="nx">updatePoints</span><span class="p">();</span>
      <span class="nx">updateSmartbombs</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">dom</span><span class="p">.</span><span class="nx">lives</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;lives&#39;</span><span class="p">);</span>
      <span class="nx">dom</span><span class="p">.</span><span class="nx">points</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;points&#39;</span><span class="p">);</span>
      <span class="nx">dom</span><span class="p">.</span><span class="nx">smartbombs</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;smartbombs&#39;</span><span class="p">);</span>

      <span class="nx">refreshUI</span><span class="p">();</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>

      <span class="nx">addPoints</span><span class="o">:</span> <span class="nx">addPoints</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span><span class="p">,</span>
      <span class="nx">getScore</span><span class="o">:</span> <span class="nx">getScore</span><span class="p">,</span>
      <span class="nx">refreshUI</span><span class="o">:</span> <span class="nx">refreshUI</span><span class="p">,</span>
      <span class="nx">reset</span><span class="o">:</span> <span class="nx">reset</span><span class="p">,</span>
      <span class="nx">shipDied</span><span class="o">:</span> <span class="nx">shipDied</span><span class="p">,</span>
      <span class="nx">updateSmartbombs</span><span class="o">:</span> <span class="nx">updateSmartbombs</span>

    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">SmartbombController</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">active</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">flashColor</span><span class="o">:</span> <span class="s1">&#39;#fff&#39;</span><span class="p">,</span>
      <span class="nx">frame</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">frameCount</span><span class="o">:</span> <span class="mi">4</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">dom</span> <span class="o">=</span> <span class="p">{</span>
      
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">frame</span><span class="o">++</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">frame</span> <span class="o">&lt;=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">frameCount</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">frame</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">data</span><span class="p">.</span><span class="nx">flashColor</span> <span class="o">:</span> <span class="s1">&#39;transparent&#39;</span><span class="p">);</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

          <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">&#39;transparent&#39;</span><span class="p">;</span>

          <span class="nx">data</span><span class="p">.</span><span class="nx">frame</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

          <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">fire</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-441'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-441">&#182;</a>
        </div>
        <p>play noise, decrement and so forth</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">&amp;&amp;</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">smartbombs</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">smartbombs</span><span class="o">--</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-442'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-442">&#182;</a>
        </div>
        <p>take out any active bad guys</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyController</span><span class="p">.</span><span class="nx">killAll</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-443'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-443">&#182;</a>
        </div>
        <p>update the status bar UI</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">updateSmartbombs</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;no more smartbombs&#39;</span><span class="p">);</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">animate</span><span class="o">:</span> <span class="nx">animate</span><span class="p">,</span>
      <span class="nx">fire</span><span class="o">:</span> <span class="nx">fire</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">StatsController</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">block</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">badGuy</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">turret</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">base</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">record</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">amount</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">data</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">amount</span> <span class="o">||</span> <span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">getStats</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">blocks</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">badGuys</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">turrets</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">data</span><span class="p">.</span><span class="nx">bases</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="p">}</span>    

    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">getStats</span><span class="o">:</span> <span class="nx">getStats</span><span class="p">,</span>
      <span class="nx">record</span><span class="o">:</span> <span class="nx">record</span><span class="p">,</span>
      <span class="nx">reset</span><span class="o">:</span> <span class="nx">reset</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="p">(</span><span class="kd">function</span> <span class="nx">DebugPanel</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">timer</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">timerInterval</span><span class="o">:</span> <span class="mi">1000</span>

    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">dom</span> <span class="o">=</span> <span class="p">{</span>

      <span class="nx">divCount</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">divBlockCount</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">divWallCount</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">divTurretCount</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">turretFireCount</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">spaceballCount</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">badGuyCount</span><span class="o">:</span> <span class="kc">null</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">handleChange</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

      <span class="nx">e</span> <span class="o">=</span> <span class="nx">e</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;checkbox&#39;</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-444'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-444">&#182;</a>
        </div>
        <p>depending on checked state, add or remove the target ID as a className on the world.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">[</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">checked</span> <span class="o">?</span> <span class="s1">&#39;add&#39;</span> <span class="o">:</span> <span class="s1">&#39;remove&#39;</span><span class="p">](</span><span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">refreshStats</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">onScreen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">k</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">bases</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">baseController</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">bases</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">bases</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">bases</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">bases</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfire</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">dead</span> <span class="o">&amp;&amp;</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">isInView</span><span class="p">(</span><span class="nx">bases</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfire</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span> <span class="nx">bases</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turrets</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfire</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">onScreen</span><span class="o">++</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="nx">dom</span><span class="p">.</span><span class="nx">divCount</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;#world div&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>

      <span class="nx">dom</span><span class="p">.</span><span class="nx">divBlockCount</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;#world div.block&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>

      <span class="nx">dom</span><span class="p">.</span><span class="nx">divWallCount</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;#world div.wall&#39;</span><span class="p">).</span><span class="nx">length</span> <span class="o">-</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;#world div.wall.exploded&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>

      <span class="nx">dom</span><span class="p">.</span><span class="nx">divTurretCount</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s1">&#39;#world div.turret&#39;</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>

      <span class="nx">dom</span><span class="p">.</span><span class="nx">turretFireCount</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">onScreen</span><span class="p">;</span>

      <span class="nx">onScreen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">isInView</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">onScreen</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="nx">dom</span><span class="p">.</span><span class="nx">spaceballCount</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">onScreen</span><span class="p">;</span>

      <span class="nx">onScreen</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyController</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyController</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">active</span> <span class="o">&amp;&amp;</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">isInView</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyController</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">col</span><span class="p">,</span> <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyController</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuys</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">row</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">onScreen</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="nx">dom</span><span class="p">.</span><span class="nx">badGuyCount</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">onScreen</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">startTimer</span><span class="p">()</span> <span class="p">{</span>

      <span class="nx">data</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">setInterval</span><span class="p">(</span><span class="nx">refreshStats</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">timerInterval</span><span class="p">);</span>

    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">o</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">items</span><span class="p">;</span>

      <span class="nx">o</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;debug-panel&#39;</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">PERFORMANCE_MODE</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-445'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-445">&#182;</a>
        </div>
        <p>not needed &ndash; remove from the DOM altogether.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">o</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-446'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-446">&#182;</a>
        </div>
        <p>reset checkboxes, etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">o</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;form&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">reset</span><span class="p">();</span>

        <span class="nx">items</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">items</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>

          <span class="nx">utils</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">items</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">handleChange</span><span class="p">);</span>

        <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-447'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-447">&#182;</a>
        </div>
        <p>show the UI.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>

        <span class="nx">dom</span><span class="p">.</span><span class="nx">divCount</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;debug-div-count&#39;</span><span class="p">);</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">divBlockCount</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;debug-div-block-count&#39;</span><span class="p">);</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">divWallCount</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;debug-div-wall-count&#39;</span><span class="p">);</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">divTurretCount</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;debug-div-turret-count&#39;</span><span class="p">);</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">turretFireCount</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;debug-turret-fire-count&#39;</span><span class="p">);</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">spaceballCount</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;debug-spaceball-count&#39;</span><span class="p">);</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">badGuyCount</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;debug-badguy-count&#39;</span><span class="p">);</span>

        <span class="nx">startTimer</span><span class="p">();</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="nx">init</span><span class="p">();</span>


  <span class="p">}());</span>

  <span class="kd">function</span> <span class="nx">createSpaceBalls</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">l</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">spaceBallCount</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">freeSpaces</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">location</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">cols</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">tmp</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-448'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-448">&#182;</a>
        </div>
        <p>check for space characters in the map character data.
these are safe spaces to occupy.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">cols</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">k</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">l</span><span class="o">=</span><span class="nx">rows</span><span class="p">;</span> <span class="nx">k</span><span class="o">&lt;</span><span class="nx">l</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">mapData</span><span class="p">[</span><span class="nx">k</span><span class="p">][</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">MAP_FREE_SPACE_CHAR</span> <span class="o">||</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">mapData</span><span class="p">[</span><span class="nx">k</span><span class="p">][</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">MAP_ALT_FREE_SPACE_CHAR</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">freeSpaces</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
            <span class="nx">row</span><span class="o">:</span> <span class="nx">k</span><span class="p">,</span>
            <span class="nx">col</span><span class="o">:</span> <span class="nx">i</span>
          <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">DEBUG_MODE</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-449'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-449">&#182;</a>
        </div>
        <p>highlight empty spaces</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">x</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">);</span>
      <span class="nx">x</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="s1">&#39;absolute&#39;</span><span class="p">;</span>
      <span class="nx">x</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="s1">&#39;31px&#39;</span><span class="p">;</span>
      <span class="nx">x</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="s1">&#39;31px&#39;</span><span class="p">;</span>
      <span class="nx">x</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">border</span> <span class="o">=</span> <span class="s1">&#39;1px solid #66ff66&#39;</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-450'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-450">&#182;</a>
        </div>
        <p>x.style.background = &lsquo;#006600&rsquo;;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">freeSpaces</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
        <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
        <span class="nx">tmp</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="p">(</span><span class="nx">freeSpaces</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">col</span> <span class="o">*</span> <span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
        <span class="nx">tmp</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="p">(</span><span class="nx">freeSpaces</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">row</span> <span class="o">*</span> <span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
        <span class="nx">dom</span><span class="p">.</span><span class="nx">worldFragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">tmp</span><span class="p">)</span>
      <span class="p">}</span>

    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">spaceBallCount</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-451'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-451">&#182;</a>
        </div>
        <p>choose a random location&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">location</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span><span class="o">*</span><span class="nx">freeSpaces</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

      <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">SpaceBall</span><span class="p">(</span><span class="nx">freeSpaces</span><span class="p">[</span><span class="nx">location</span><span class="p">]));</span></pre></div>
      </td>
    </tr>
    <tr id='section-452'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-452">&#182;</a>
        </div>
        <p>and remove this item from the array (since it&rsquo;s now occupied)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">freeSpaces</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">location</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">getArgs</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>

    <span class="k">return</span> <span class="nx">_slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>

  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">mapTypes</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;0&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">new</span> <span class="nx">Block</span><span class="p">(</span><span class="nx">mixin</span><span class="p">(</span><span class="nx">getArgs</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span> <span class="nx">subType</span><span class="o">:</span> <span class="s1">&#39;type-0&#39;</span><span class="p">}))</span> <span class="p">},</span>
    <span class="s1">&#39;1&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">new</span> <span class="nx">Block</span><span class="p">(</span><span class="nx">mixin</span><span class="p">(</span><span class="nx">getArgs</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span> <span class="nx">subType</span><span class="o">:</span> <span class="s1">&#39;type-1&#39;</span><span class="p">}))</span> <span class="p">},</span>
    <span class="s1">&#39;2&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">new</span> <span class="nx">Block</span><span class="p">(</span><span class="nx">mixin</span><span class="p">(</span><span class="nx">getArgs</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span> <span class="nx">subType</span><span class="o">:</span> <span class="s1">&#39;type-2&#39;</span><span class="p">}))</span> <span class="p">},</span>
    <span class="s1">&#39;3&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">new</span> <span class="nx">Block</span><span class="p">(</span><span class="nx">mixin</span><span class="p">(</span><span class="nx">getArgs</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="p">{</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span> <span class="nx">subType</span><span class="o">:</span> <span class="s1">&#39;type-3&#39;</span><span class="p">}))</span> <span class="p">}</span>
  <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-453'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-453">&#182;</a>
        </div>
        <p>NOTE: UTF-8 character encoding required for map parsing to work.
reference: http://en.wikipedia.org/wiki/Box-drawing_characters
empty space inside walls is marked by a period character &ndash; &ldquo;.&rdquo;
space inside bases, not safe to be occupied is marked by a middle dot &ndash; Georgian comma (&middot;) &ndash; &ldquo;Â·&rdquo;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="kd">var</span> <span class="nx">MAP_FREE_SPACE_CHAR</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">MAP_ALT_FREE_SPACE_CHAR</span> <span class="o">=</span> <span class="s1">&#39;_&#39;</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">MAP_INSIDE_BASE_CHAR</span> <span class="o">=</span> <span class="s1">&#39;Â·&#39;</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">MAP_INSIDE_WALLS_CHAR</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="p">;</span>

  <span class="nx">mapData</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;                                                                         &#39;</span><span class="p">,</span>
    <span class="s1">&#39;                                                                         &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    000000000000000000000000000                                          &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    000000000000000000000000000                                          &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00.......................00                                          &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00.......................00                                          &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00..............ââ»ââ.....00            333333333333333333            &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00.........ââ»âââ»ââââ.....00           33333333333333333333           &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00...ââ»â...âÂ·Â·Â·Â·Â·â£.......00          33..................33          &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00...ââââ»ââ»âÂ·Â·Â·Â·Â·âââ.....00         33....................33         &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00....â«ââââââÂ·Â·Â·Â·âââ.....00        33.......ââ©â............33        &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00....ââ....â«Â·Â·Â·Â·â£.......00       33........âââââ©ââ©â........33       &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00....â«ââââââÂ·Â·Â·Â·âââ.....0033333333..........â£ââ¦âÂ·Â·â .........33      &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00....ââââÂ·âââ³ââ³âââ³â.....0033333333.........âââ.âââ¦â.........33      &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00.......ââ³â....ââ.......00       33........ââ¦â.ââ..........33       &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00.......................00        33......................33        &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    00.......................00         33....................33         &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    000000000000000000000000000          33..................33          &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    000000000000000000000000000           33333333333333333333           &#39;</span><span class="p">,</span>
    <span class="s1">&#39;          00                               333333333333333333            &#39;</span><span class="p">,</span>
    <span class="s1">&#39;          00                                            33               &#39;</span><span class="p">,</span>
    <span class="s1">&#39;          00                                            33               &#39;</span><span class="p">,</span>
    <span class="s1">&#39;          11                                            33               &#39;</span><span class="p">,</span>
    <span class="s1">&#39;          11                                            33               &#39;</span><span class="p">,</span>
    <span class="s1">&#39;          11                               2            222              &#39;</span><span class="p">,</span>
    <span class="s1">&#39;          11                              222           2222             &#39;</span><span class="p">,</span>
    <span class="s1">&#39;          11                             22.22         22..22            &#39;</span><span class="p">,</span>
    <span class="s1">&#39;         111                            22...22       22....22           &#39;</span><span class="p">,</span>
    <span class="s1">&#39;        11.11                          22.....22     22......22          &#39;</span><span class="p">,</span>
    <span class="s1">&#39;       11...11                        22.......22   22........22         &#39;</span><span class="p">,</span>
    <span class="s1">&#39;      11.....11                      22.........22222..........22        &#39;</span><span class="p">,</span>
    <span class="s1">&#39;     11.ââ.ââ.11                    22..ââ¨ââ¨âââ¨â.222..ââ........22       &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    11.ââââ´âââ.11                  22...â¢Â·âââââââ...ââ¨ââ.........22      &#39;</span><span class="p">,</span>
    <span class="s1">&#39;   11..ââÂ·Â·Â·ââ..11                22....âââÂ·Â·Â·ââââ¨ââ¨ââââ..........22     &#39;</span><span class="p">,</span>
    <span class="s1">&#39;  11....â¤Â·Â·Â·â....11111           22......â¢âÂ·Â·Â·Â·â¢Â·Â·Â·Â·Â·â.............22    &#39;</span><span class="p">,</span>
    <span class="s1">&#39;  11...ââÂ·Â·Â·ââ.....111111111111222.......ââÂ·Â·Â·Â·âÂ·Â·Â·Â·Â·ââââ...........22   &#39;</span><span class="p">,</span>
    <span class="s1">&#39;   11..â¤ââ¬-â¬ââ..111111111111111222.......â¢ââââââÂ·Â·Â·Â·Â·Â·Â·Â·â............22  &#39;</span><span class="p">,</span>
    <span class="s1">&#39;    11.ââ...ââ.11                22....âââÂ·ââ¥âÂ·Â·Â·Â·Â·Â·Â·ââââ...........22   &#39;</span><span class="p">,</span>
    <span class="s1">&#39;     11.......11                  22...ââÂ·Â·â.âÂ·Â·Â·Â·Â·Â·Â·â.............22    &#39;</span><span class="p">,</span>
    <span class="s1">&#39;      11.....11                    22...â¢âââ.âÂ·ââ¥ââ¥âÂ·âââ..........22     &#39;</span><span class="p">,</span>
    <span class="s1">&#39;       11...11                      22..ââ...ââ¥â...âââ¥ââ.........22      &#39;</span><span class="p">,</span>
    <span class="s1">&#39;        11.11                        22...........222.ââ........22       &#39;</span><span class="p">,</span>
    <span class="s1">&#39;         111                          22.........22222.........22        &#39;</span><span class="p">,</span>
    <span class="s1">&#39;          1                            22...2...22   22...2...22         &#39;</span><span class="p">,</span>
    <span class="s1">&#39;                                        22.222.22     22.222.22          &#39;</span><span class="p">,</span>
    <span class="s1">&#39;                                         222 222       222 222           &#39;</span><span class="p">,</span>
    <span class="s1">&#39;                                          2   2         2   2            &#39;</span><span class="p">,</span>
    <span class="s1">&#39;                                                                         &#39;</span><span class="p">,</span>
    <span class="s1">&#39;                                                                         &#39;</span>
  <span class="p">];</span></pre></div>
      </td>
    </tr>
    <tr id='section-454'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-454">&#182;</a>
        </div>
        <p>user-provided map</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span><span class="sr">/mapData/</span><span class="p">))</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="nb">decodeURI</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>

    <span class="nx">mapData</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;mapData&#39;</span><span class="p">)</span><span class="o">+</span><span class="mi">8</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-455'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-455">&#182;</a>
        </div>
        <p>for now&hellip;</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">DEFAULT_HOME_ROW</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">DEFAULT_HOME_COL</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="nx">objects</span><span class="p">.</span><span class="nx">mapData</span> <span class="o">=</span> <span class="nx">mapData</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">makeGridItem</span><span class="p">(</span><span class="nx">oOptions</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">subType</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">oNode</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">node</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>

    <span class="nx">x</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">y</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="nx">type</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="nx">subType</span> <span class="o">=</span> <span class="nx">oOptions</span><span class="p">.</span><span class="nx">subType</span><span class="p">;</span>

    <span class="nx">o</span> <span class="o">=</span> <span class="nx">dom</span><span class="p">.</span><span class="nx">gridItemTemplate</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="nx">oNode</span><span class="p">);</span>

    <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span> <span class="o">*</span> <span class="nx">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span> <span class="o">*</span> <span class="nx">y</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

    <span class="nx">o</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">subType</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">o</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">createGrid</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">gridItems</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="kr">char</span><span class="p">;</span>

    <span class="nx">j</span> <span class="o">=</span> <span class="nx">mapData</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;looping through &#39;</span> <span class="o">+</span> <span class="nx">j</span> <span class="o">+</span> <span class="s1">&#39; rows of &#39;</span> <span class="o">+</span> <span class="nx">mapData</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span> <span class="o">+</span> <span class="s1">&#39; characters&#39;</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-456'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-456">&#182;</a>
        </div>
        <p>data for one row</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">l</span> <span class="o">=</span> <span class="nx">mapData</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>

      <span class="nx">gridItems</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>

      <span class="k">for</span> <span class="p">(</span><span class="nx">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">k</span><span class="o">&lt;</span><span class="nx">l</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-457'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-457">&#182;</a>
        </div>
        <p>find the character and create the relevant object</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="kr">char</span> <span class="o">=</span> <span class="nx">mapData</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">k</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="kr">char</span> <span class="o">!==</span> <span class="s1">&#39; &#39;</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">mapTypes</span><span class="p">[</span><span class="kr">char</span><span class="p">]</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>

          <span class="nx">gridItems</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">mapTypes</span><span class="p">[</span><span class="kr">char</span><span class="p">]({</span>
            <span class="s1">&#39;x&#39;</span><span class="o">:</span> <span class="nx">k</span><span class="p">,</span>
            <span class="s1">&#39;y&#39;</span><span class="o">:</span> <span class="nx">i</span>
          <span class="p">}));</span>

        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">baseController</span><span class="p">.</span><span class="nx">isBaseItem</span><span class="p">(</span><span class="kr">char</span><span class="p">))</span> <span class="p">{</span>

          <span class="nx">gridItems</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">objects</span><span class="p">.</span><span class="nx">baseController</span><span class="p">.</span><span class="nx">addBaseItem</span><span class="p">(</span><span class="kr">char</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">i</span><span class="p">));</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

          <span class="nx">gridItems</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

        <span class="p">}</span>

      <span class="p">}</span>

    <span class="p">}</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">baseController</span><span class="p">.</span><span class="nx">findActiveBases</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-458'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-458">&#182;</a>
        </div>
        <p>set world dimensions</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_width</span> <span class="o">=</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_WIDTH</span> <span class="o">*</span> <span class="nx">mapData</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_height</span> <span class="o">=</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">NODE_HEIGHT</span> <span class="o">*</span> <span class="nx">mapData</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-459'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-459">&#182;</a>
        </div>
        <p>record # of columns + rows
TODO: One-off error?</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_cols</span> <span class="o">=</span> <span class="nx">mapData</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_rows</span> <span class="o">=</span> <span class="nx">mapData</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-460'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-460">&#182;</a>
        </div>
        <p>apply to DOM</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_width</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>
    <span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_height</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;world set to &#39;</span> <span class="o">+</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_width</span> <span class="o">+</span> <span class="s1">&#39; x &#39;</span> <span class="o">+</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">world_height</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-461'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-461">&#182;</a>
        </div>
        <p>reset the window scroll, if any (may be remembered from last time)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">gridItems</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">audioPitchCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">audioPitchCounterMax</span> <span class="o">=</span> <span class="mi">15</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">audioBoomScale</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">];</span>
  <span class="kd">var</span> <span class="nx">lastAudioIncrement</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">audioIncrementThrottle</span> <span class="o">=</span> <span class="mi">333</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">createShip</span><span class="p">()</span> <span class="p">{</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ship</span><span class="p">();</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">makeRandomBadGuy</span><span class="p">(</span><span class="nx">force</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">isActive</span> <span class="o">=</span> <span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">isActive</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">((</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.75</span> <span class="o">||</span> <span class="nx">force</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">isActive</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;makeRandomBadGuy()&#39;</span><span class="p">);</span>
      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyController</span><span class="p">.</span><span class="nx">createBadGuy</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">isActive</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;no bad guy this time around&#39;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">makeRandomBadGuy</span><span class="p">,</span> <span class="mi">10000</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">15000</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">getAudioPitch</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">audioPitchCounter</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">incrementAudioPitch</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-462'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-462">&#182;</a>
        </div>
        <p>throttle audible pitch increase calls</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">now</span> <span class="o">-</span> <span class="nx">lastAudioIncrement</span> <span class="o">&gt;</span> <span class="nx">audioIncrementThrottle</span><span class="p">)</span> <span class="p">{</span>
      
      <span class="nx">lastAudioIncrement</span> <span class="o">=</span> <span class="nx">now</span><span class="p">;</span>
      <span class="nx">audioPitchCounter</span> <span class="o">+=</span> <span class="mf">0.5</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">audioPitchCounter</span> <span class="o">&gt;=</span> <span class="nx">audioPitchCounterMax</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">audioPitchCounter</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">getAudioPitch</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-463'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-463">&#182;</a>
        </div>
        <p>oh, what a hack! (destroy the world markup)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-464'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-464">&#182;</a>
        </div>
        <p>TODO: Hide turret gunfire, which may barf when trying to remove nodes that can&rsquo;t be found after this point.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-465'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-465">&#182;</a>
        </div>
        <p>reset the maps</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfireMap</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfireMap</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyMap</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBallMap</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-466'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-466">&#182;</a>
        </div>
        <p>reset and re-append objects to the grid as needed</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">l</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">j</span><span class="o">=</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">k</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nx">l</span><span class="o">=</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">k</span><span class="o">&lt;</span><span class="nx">l</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">k</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">k</span><span class="p">].</span><span class="nx">restore</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">game</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">k</span><span class="p">].</span><span class="nx">restore</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-467'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-467">&#182;</a>
        </div>
        <p>reset the spaceballs, too</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBalls</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">restore</span><span class="p">();</span>
    <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-468'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-468">&#182;</a>
        </div>
        <p>reset the base controller, bringing all bases back to life</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">baseController</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-469'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-469">&#182;</a>
        </div>
        <p>re-append ship, which will have been nuked as well</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">worldFragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">getNode</span><span class="p">());</span>

    <span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">game</span><span class="p">.</span><span class="nx">dom</span><span class="p">.</span><span class="nx">worldFragment</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-470'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-470">&#182;</a>
        </div>
        <p>set default heartbeat rate</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">setPulseStage</span><span class="p">();</span>

    <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">statsController</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

    <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

    <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">setDefaultPosition</span><span class="p">();</span>

    <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">findSafeRespawnLocation</span><span class="p">();</span>

    <span class="nx">soundManager</span><span class="p">.</span><span class="nx">play</span><span class="p">(</span><span class="s1">&#39;gamewarp-start&#39;</span><span class="p">);</span>

    <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">resume</span><span class="p">();</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;game reset complete&#39;</span><span class="p">);</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">assignRemixLink</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;remix&#39;</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span><span class="sr">/mapData/i</span><span class="p">))</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-471'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-471">&#182;</a>
        </div>
        <p>assign the link including the mapData, replacing MAP<em>FREE</em>SPACE<em>CHAR with MAP</em>ALT<em>FREE</em>SPACE_CHAR</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nx">o</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">&#39;editor.html#mapData=&#39;</span> <span class="o">+</span> <span class="nx">survivor</span><span class="p">.</span><span class="nx">mapData</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s/g</span><span class="p">,</span> <span class="nx">MAP_ALT_FREE_SPACE_CHAR</span><span class="p">);</span>

        <span class="nx">o</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">&#39;Remix this level&#39;</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-472'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-472">&#182;</a>
        </div>
        <p>show the &ldquo;play original game&rdquo; link, too</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;original&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;inline&#39;</span><span class="p">;</span>

      <span class="p">}</span>

    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">assignHelpLink</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;help&#39;</span><span class="p">);</span>

    <span class="kd">function</span> <span class="nx">mouseDownHandler</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">o</span><span class="p">,</span>
          <span class="nx">oBody</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">className</span> <span class="o">=</span> <span class="s1">&#39;show-help&#39;</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">is_showing</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="nx">className</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">is_showing</span><span class="p">)</span> <span class="p">{</span>

        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="nx">className</span><span class="p">);</span>

        <span class="nx">o</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;help-screen&#39;</span><span class="p">);</span>
        <span class="nx">oBody</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>

        <span class="nx">oBody</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginTop</span> <span class="o">=</span> <span class="o">-</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">oBody</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span><span class="p">;</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">pause</span><span class="p">();</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

        <span class="nx">utils</span><span class="p">.</span><span class="nx">css</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="nx">className</span><span class="p">);</span>

        <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">resume</span><span class="p">();</span>

      <span class="p">}</span>

      <span class="nx">stopEvent</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>

      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="p">{</span>

      <span class="nx">o</span><span class="p">.</span><span class="nx">onmousedown</span> <span class="o">=</span> <span class="nx">mouseDownHandler</span><span class="p">;</span></pre></div>
      </td>
    </tr>
    <tr id='section-473'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-473">&#182;</a>
        </div>
        <p>and get the help screen, too</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;help-screen&#39;</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="nx">mouseDownHandler</span><span class="p">;</span>

    <span class="p">}</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">init</span><span class="p">()</span> <span class="p">{</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameLoop</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">soundManager</span><span class="p">.</span><span class="nx">ok</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">IS_MUTED</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">initAudio</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">collision</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Collision</span><span class="p">();</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Screen</span><span class="p">();</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;creating BaseController()...&#39;</span><span class="p">);</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">baseController</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">BaseController</span><span class="p">();</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">baseController</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;calling createGrid()&#39;</span><span class="p">);</span>

    <span class="nx">data</span><span class="p">.</span><span class="nx">map</span> <span class="o">=</span> <span class="nx">createGrid</span><span class="p">();</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">screen</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">statsController</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">StatsController</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-474'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-474">&#182;</a>
        </div>
        <p>2D array tracking references to moving objects</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">objects</span><span class="p">.</span><span class="nx">turretGunfireMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ObjectMap</span><span class="p">();</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">shipGunfireMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ObjectMap</span><span class="p">();</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">badGuyMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ObjectMap</span><span class="p">();</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">spaceBallMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ObjectMap</span><span class="p">();</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;creating ship&#39;</span><span class="p">);</span>

    <span class="nx">createShip</span><span class="p">();</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;creating bad guys&#39;</span><span class="p">);</span>

    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">makeRandomBadGuy</span><span class="p">,</span> <span class="mi">10000</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">15000</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;making spaceballs&#39;</span><span class="p">);</span>

    <span class="nx">createSpaceBalls</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-475'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-475">&#182;</a>
        </div>
        <p>append fragment containing everything to DOM</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">dom</span><span class="p">.</span><span class="nx">world</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">dom</span><span class="p">.</span><span class="nx">worldFragment</span><span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;world created&#39;</span><span class="p">);</span></pre></div>
      </td>
    </tr>
    <tr id='section-476'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-476">&#182;</a>
        </div>
        <p>position ship
hack &ndash; otherwise, window scroll doesn&rsquo;t quite exist yet or something and doesn&rsquo;t get picked up.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">setDefaultPosition</span><span class="p">();</span>
      <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">ship</span><span class="p">.</span><span class="nx">findSafeRespawnLocation</span><span class="p">();</span>
    <span class="p">},</span> <span class="mi">20</span><span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;keyboard init&#39;</span><span class="p">);</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">keyboardMonitor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">KeyboardMonitor</span><span class="p">();</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">keyboardMonitor</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">focusMonitor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FocusMonitor</span><span class="p">();</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">focusMonitor</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>

    <span class="nx">game</span><span class="p">.</span><span class="nx">objects</span><span class="p">.</span><span class="nx">levelEndSequence</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LevelEndSequence</span><span class="p">({</span>
      <span class="nx">node</span><span class="o">:</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;level-end-sequence&#39;</span><span class="p">)</span>
    <span class="p">});</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">smartbombController</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SmartbombController</span><span class="p">();</span>

    <span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GameController</span><span class="p">();</span>
    <span class="nx">objects</span><span class="p">.</span><span class="nx">gameController</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>

    <span class="nx">assignRemixLink</span><span class="p">();</span>

    <span class="nx">assignHelpLink</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-477'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-477">&#182;</a>
        </div>
        <p>start game loop</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">objects</span><span class="p">.</span><span class="nx">gameLoop</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">initAudio</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">i</span><span class="p">;</span>

    <span class="nx">features</span><span class="p">.</span><span class="nx">audio</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;gamewarp-start&#39;</span><span class="p">,</span>
      <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/gamewarp-start.mp3&#39;</span>
    <span class="p">}).</span><span class="nx">play</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">heartbeat</span> <span class="o">=</span> <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;heartbeat&#39;</span><span class="p">,</span>
      <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/heartbeat.mp3&#39;</span><span class="p">,</span>
      <span class="nx">multiShot</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">autoLoad</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">});</span>

    <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;badguy-loop-0&#39;</span><span class="p">,</span>
      <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/badguy-loop-1.mp3&#39;</span><span class="p">,</span>
      <span class="nx">loops</span><span class="o">:</span> <span class="mi">999</span><span class="p">,</span>
      <span class="nx">autoLoad</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">});</span>

    <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;badguy-loop-1&#39;</span><span class="p">,</span>
      <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/badguy-loop-2.mp3&#39;</span><span class="p">,</span>
      <span class="nx">loops</span><span class="o">:</span> <span class="mi">999</span><span class="p">,</span>
      <span class="nx">autoLoad</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">});</span>

    <span class="kd">var</span> <span class="nx">baseExplode</span> <span class="o">=</span> <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;base-explode&#39;</span><span class="p">,</span>
      <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/base-explode.mp3&#39;</span><span class="p">,</span>
      <span class="nx">autoLoad</span><span class="o">:</span> <span class="kc">true</span>
    <span class="p">});</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">soundSprites</span><span class="p">.</span><span class="nx">boomSpriteCounterMax</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;boom-sprite-&#39;</span><span class="o">+</span><span class="nx">i</span><span class="p">,</span>
        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/boom-sprite.mp3&#39;</span><span class="p">,</span>
        <span class="nx">autoLoad</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">soundSprites</span><span class="p">.</span><span class="nx">popSpriteCounterMax</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;pop-sprite-&#39;</span><span class="o">+</span><span class="nx">i</span><span class="p">,</span>
        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/pop-sprite.mp3&#39;</span><span class="p">,</span>
        <span class="nx">autoLoad</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">});</span>
    <span class="p">}</span>

  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">init</span><span class="o">:</span> <span class="nx">init</span><span class="p">,</span>
    <span class="nx">mapData</span><span class="o">:</span> <span class="nx">mapData</span><span class="p">,</span>
    <span class="nx">reset</span><span class="o">:</span> <span class="nx">reset</span>
  <span class="p">}</span>

<span class="p">};</span>

<span class="kd">function</span> <span class="nx">go_go_go</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-478'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-478">&#182;</a>
        </div>
        <p>function name: inside Flickr-circa-2004 joke.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre></pre></div>
      </td>
    </tr>
    <tr id='section-479'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-479">&#182;</a>
        </div>
        <p>hackish: bypass loading / intro screens if noIntro, or if mapData and offline (file://) etc.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="kd">var</span> <span class="nx">bypassIntro</span> <span class="o">=</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/nointro/i</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">referrer</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">referrer</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/editor/i</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/http/i</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/mapdata/i</span><span class="p">)))),</span>
      <span class="nx">l0</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;loading0&#39;</span><span class="p">),</span>
      <span class="nx">l1</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;loading1&#39;</span><span class="p">),</span>
      <span class="nx">l2</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;loading2&#39;</span><span class="p">);</span>

  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;cursor&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">startGame</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">soundManager</span><span class="p">.</span><span class="nx">ok</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">soundManager</span><span class="p">.</span><span class="nx">stop</span><span class="p">(</span><span class="s1">&#39;valkyries&#39;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">survivor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Survivor</span><span class="p">();</span>
    <span class="nx">survivor</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;world-container&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>

  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">bypassIntro</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-480'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-480">&#182;</a>
        </div>
        <p>go directly to the game.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="nx">hideGameTitleScreen</span><span class="p">();</span>
    <span class="nx">startGame</span><span class="p">();</span></pre></div>
      </td>
    </tr>
    <tr id='section-481'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-481">&#182;</a>
        </div>
        <p>and show the &ldquo;tweeter&rdquo; link, encouraging creators to share (maybe)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;tweeter&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/temp/i</span><span class="p">))</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;tweeter&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;inline&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

  <span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-482'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-482">&#182;</a>
        </div>
        <p>first, make the noise.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="k">if</span> <span class="p">(</span><span class="nx">soundManager</span><span class="p">.</span><span class="nx">ok</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/mobile/i</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">IS_MUTED</span><span class="p">)</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-483'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-483">&#182;</a>
        </div>
        <p>Audio sample credit / thank-you: YouTube user &ldquo;daddlertl2&rdquo;, last active 2 years ago (as of February 2012)
http://youtu.be/_K7MUkxjeaM
video &ldquo;C64-Diskette wird formatiert (mit Basic Befehl) &rdquo; uploaded May 1, 2009
(gappy audio track from video fixed for use in this project)</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>    <span class="kd">var</span> <span class="nx">_1541</span> <span class="o">=</span> <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;c64-1541-format&#39;</span><span class="p">,</span>
      <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/1541-formatting-sound-short.mp3&#39;</span>
    <span class="p">});</span>

    <span class="nx">_1541</span><span class="p">.</span><span class="nx">onPosition</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-484'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-484">&#182;</a>
        </div>
        <p>SEARCHING FOR SURVIVOR-2012
at this point, the Commodore 1541-II floppy drive&rsquo;s head knocking sound is playing.
and yes, technically this alignment process is usually heard only when formatting disks.
if you heard that and were frowning in disappointment at the mis-use, yes, you are technically correct.
if you are both technically correct and reading this comment, then you win approximately one internets.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">l1</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="nx">_1541</span><span class="p">.</span><span class="nx">onPosition</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-485'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-485">&#182;</a>
        </div>
        <p>LOADING</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">l2</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="nx">_1541</span><span class="p">.</span><span class="nx">onPosition</span><span class="p">(</span><span class="mi">5000</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-486'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-486">&#182;</a>
        </div>
        <p>READY.
RUN</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;go_go_go&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="nx">_1541</span><span class="p">.</span><span class="nx">onPosition</span><span class="p">(</span><span class="mi">6000</span><span class="p">,</span> <span class="nx">showGameTitleScreen</span><span class="p">);</span>

    <span class="nx">_1541</span><span class="p">.</span><span class="nx">play</span><span class="p">();</span>

    <span class="nx">l0</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

    <span class="nx">l0</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>
    <span class="nx">l1</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>
    <span class="nx">l2</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>

    <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;go_go_go&#39;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">showGameTitleScreen</span><span class="p">,</span> <span class="mi">2500</span><span class="p">);</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">showHelpScreen</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">hideHelpScreen</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">hideGameTitleScreen</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">boot</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;boot-screen&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">title</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;title-screen&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">c64</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;c64&#39;</span><span class="p">);</span>

    <span class="nx">boot</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">boot</span><span class="p">);</span>
    <span class="nx">title</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">title</span><span class="p">);</span>

  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">showGameTitleScreen</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">title</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;title-screen&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">c64</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;c64&#39;</span><span class="p">);</span>

    <span class="nx">title</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">;</span>

    <span class="nx">c64</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">c64</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">soundManager</span><span class="p">.</span><span class="nx">ok</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">IS_MUTED</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">soundManager</span><span class="p">.</span><span class="nx">createSound</span><span class="p">({</span>
        <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;valkyries&#39;</span><span class="p">,</span>
        <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;audio/valkyries.mp3&#39;</span><span class="p">,</span>
        <span class="nx">autoPlay</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="nx">title</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">hideGameTitleScreen</span><span class="p">();</span>
      <span class="nx">startGame</span><span class="p">();</span>
    <span class="p">}</span>

  <span class="p">}</span>

<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">protocol</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/http/i</span><span class="p">)</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">domain</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/schillmania\.com/i</span><span class="p">))</span> <span class="p">{</span>

  <span class="nx">soundManager</span><span class="p">.</span><span class="nx">onready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">referrer</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">referrer</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/editor/i</span><span class="p">))</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-487'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-487">&#182;</a>
        </div>
        <p>if coming from the editor, skip straight to the goods.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">go_go_go</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-488'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-488">&#182;</a>
        </div>
        <p>let &ldquo;READY.&rdquo; show for a second.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>      <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">go_go_go</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">soundManager</span><span class="p">.</span><span class="nx">ontimeout</span><span class="p">(</span><span class="nx">go_go_go</span><span class="p">);</span>

<span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>
      </td>
    </tr>
    <tr id='section-489'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-489">&#182;</a>
        </div>
        <p>no sound effects for external use.
let &ldquo;READY.&rdquo; show for a second.</p>
      </td>
      <td class=code>
        <div class='highlight'><pre>  <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">go_go_go</span><span class="p">,</span> <span class="mi">1000</span><span class="p">);</span>

<span class="p">}</span></pre></div>
      </td>
    </tr>
    <tr id='section-490'>
      <td class=docs>
        <div class="pilwrap">
          <a class="pilcrow" href="#section-490">&#182;</a>
        </div>
        <p>invocation closure</p>

      </td>
      <td class=code>
        <div class='highlight'><pre><span class="p">}(</span><span class="nb">window</span><span class="p">));</span></pre></div>
      </td>
    </tr>
  </table>
</div>
</body>
